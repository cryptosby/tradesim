<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trade Sim - Advanced Cryptos Trading Simulator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * {
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        body {
            margin: 0;
            background: #0e1116;
            color: #fff;
        }
        header {
            background-color: #1e2228;
            padding: 1em;
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            position: relative;
        }
        .container {
            padding: 20px;
        }
        .controls, .actions {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }
        select, input, button {
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            font-size: 0.9em;
        }
        button {
            background-color: #3a8dd8;
            color: #fff;
            cursor: pointer;
            min-width: 80px;
        }
        button:hover {
            background-color: #337ac4;
        }
        #buy-btn {
            background-color: #00aa5e;
        }
        #sell-btn {
            background-color: #ff4d4d;
        }
        .chart {
            width: 100%;
            height: 500px;
            margin-bottom: 30px;
        }
        .balance, .profit-loss, .timer {
            text-align: center;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        .profit { color: #00ff9f; }
        .loss { color: #ff4d4d; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
            background: #1e222d;
        }
        th, td {
            padding: 10px;
            text-align: center;
            border: 1px solid #333;
        }
        th {
            background-color: #2c313a;
        }
        .exchange-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }
        .exchange-card {
            background: #1e2228;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            transition: transform 0.2s;
        }
        .exchange-card:hover {
            transform: translateY(-3px);
        }
        .exchange-logo {
            height: 30px;
            margin-bottom: 5px;
        }
        .news-popup {
            position: relative;
            display: inline-block;
            margin: 20px auto;
            text-align: center;
            width: 100%;
        }
        .news-popup button {
            background: linear-gradient(135deg, #3a8dd8, #2c5f9e);
            padding: 12px 24px;
            font-size: 1.1em;
            border-radius: 30px;
            box-shadow: 0 4px 15px rgba(58, 141, 216, 0.3);
            transition: all 0.3s ease;
        }
        .news-popup button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(58, 141, 216, 0.4);
        }
        .news-popup-content {
            display: none;
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            background: #1e222d;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            z-index: 1;
        }
        .news-popup:hover .news-popup-content {
            display: block;
        }
        footer {
            background: #1e2228;
            padding: 20px;
            text-align: center;
            margin-top: 30px;
        }
        .footer-links {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
        }
        .footer-links a {
            color: #3a8dd8;
            text-decoration: none;
        }
        .ad-banner {
            width: 100%;
            margin: 20px 0;
            text-align: center;
            background: #1e2228;
            padding: 10px;
            border-radius: 5px;
        }
        .header-banner {
            height: 90px;
        }
        .top-banner {
            height: 60px;
        }
        .middle-banner {
            height: 90px;
        }
        .bottom-banner {
            height: 90px;
        }
        .amazon-affiliate {
            margin: 20px auto;
            text-align: center;
        }
        .amazon-btn {
            background: linear-gradient(135deg, #FF9900, #FFAC33);
            color: #000;
            padding: 12px 24px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        .amazon-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 153, 0, 0.3);
        }
        .exchange-name {
            color: #00b4ff;
            font-weight: bold;
            margin: 5px 0;
        }
        .exchange-fiat {
            color: #ffff00;
            font-size: 0.8em;
            margin: 5px 0;
        }
        .exchange-signup {
            color: #fff;
            font-size: 0.9em;
            margin: 5px 0;
        }
    </style>
</head>
<body>
<header>
    TradeSim 
    <div class="ad-banner header-banner">
        <!-- Header Banner (728x90) -->
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
             crossorigin="anonymous"></script>
        <!-- CryptoSim_Header -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
             data-ad-slot="XXXXXXXXXX"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
</header>

<div class="container">
    <div class="ad-banner top-banner">
        <!-- Top Content Banner (468x60) -->
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
             crossorigin="anonymous"></script>
        <!-- CryptoSim_Top -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:468px;height:60px"
             data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
             data-ad-slot="XXXXXXXXXX"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <div class="balance">Balance: $<span id="balance">100000.00</span></div>
    <div class="profit-loss" id="profit-loss"></div>
    <div class="timer" id="timer">Timer: 0s</div>

    <div class="controls">
        <label for="crypto-select">Select Coin:</label>
        <select id="crypto-select">
            <!-- Top 100 Cryptocurrencies by Market Cap -->
            <option value="BINANCE:BTCUSDT">Bitcoin (BTC)</option>
            <option value="BINANCE:ETHUSDT">Ethereum (ETH)</option>
            <option value="BINANCE:BNBUSDT">Binance Coin (BNB)</option>
            <option value="BINANCE:XRPUSDT">XRP (XRP)</option>
            <option value="BINANCE:SOLUSDT">Solana (SOL)</option>
            <option value="BINANCE:ADAUSDT">Cardano (ADA)</option>
            <option value="BINANCE:DOGEUSDT">Dogecoin (DOGE)</option>
            <option value="BINANCE:TRXUSDT">TRON (TRX)</option>
            <option value="BINANCE:DOTUSDT">Polkadot (DOT)</option>
            <option value="BINANCE:MATICUSDT">Polygon (MATIC)</option>
            <option value="BINANCE:LTCUSDT">Litecoin (LTC)</option>
            <option value="BINANCE:SHIBUSDT">Shiba Inu (SHIB)</option>
            <option value="BINANCE:AVAXUSDT">Avalanche (AVAX)</option>
            <option value="BINANCE:LINKUSDT">Chainlink (LINK)</option>
            <option value="BINANCE:ATOMUSDT">Cosmos (ATOM)</option>
            <option value="BINANCE:UNIUSDT">Uniswap (UNI)</option>
            <option value="BINANCE:XLMUSDT">Stellar (XLM)</option>
            <option value="BINANCE:XMRUSDT">Monero (XMR)</option>
            <option value="BINANCE:ETCUSDT">Ethereum Classic (ETC)</option>
            <option value="BINANCE:ICPUSDT">Internet Computer (ICP)</option>
            <option value="BINANCE:FILUSDT">Filecoin (FIL)</option>
            <option value="BINANCE:APTUSDT">Aptos (APT)</option>
            <option value="BINANCE:HBARUSDT">Hedera (HBAR)</option>
            <option value="BINANCE:NEARUSDT">NEAR Protocol (NEAR)</option>
            <option value="BINANCE:VETUSDT">VeChain (VET)</option>
            <option value="BINANCE:ARBUSDT">Arbitrum (ARB)</option>
            <option value="BINANCE:OPUSDT">Optimism (OP)</option>
            <option value="BINANCE:GRTUSDT">The Graph (GRT)</option>
            <option value="BINANCE:AAVEUSDT">Aave (AAVE)</option>
            <option value="BINANCE:ALGOUSDT">Algorand (ALGO)</option>
            <option value="BINANCE:STXUSDT">Stacks (STX)</option>
            <option value="BINANCE:QNTUSDT">Quant (QNT)</option>
            <option value="BINANCE:EOSUSDT">EOS (EOS)</option>
            <option value="BINANCE:FLOWUSDT">Flow (FLOW)</option>
            <option value="BINANCE:THETAUSDT">Theta Network (THETA)</option>
            <option value="BINANCE:XTZUSDT">Tezos (XTZ)</option>
            <option value="BINANCE:AXSUSDT">Axie Infinity (AXS)</option>
            <option value="BINANCE:RNDRUSDT">Render (RNDR)</option>
            <option value="BINANCE:SNXUSDT">Synthetix (SNX)</option>
            <option value="BINANCE:APEUSDT">ApeCoin (APE)</option>
            <option value="BINANCE:CHZUSDT">Chiliz (CHZ)</option>
            <option value="BINANCE:MANAUSDT">Decentraland (MANA)</option>
            <option value="BINANCE:CRVUSDT">Curve DAO (CRV)</option>
            <option value="BINANCE:KAVAUSDT">Kava (KAVA)</option>
            <option value="BINANCE:IMXUSDT">Immutable X (IMX)</option>
            <option value="BINANCE:1INCHUSDT">1inch (1INCH)</option>
            <option value="BINANCE:COMPUSDT">Compound (COMP)</option>
            <option value="BINANCE:ZECUSDT">Zcash (ZEC)</option>
            <option value="BINANCE:GMTUSDT">STEPN (GMT)</option>
            <option value="BINANCE:DASHUSDT">Dash (DASH)</option>
            <option value="BINANCE:KLAYUSDT">Klaytn (KLAY)</option>
            <option value="BINANCE:ENSUSDT">Ethereum Name Service (ENS)</option>
            <option value="BINANCE:WAVESUSDT">Waves (WAVES)</option>
            <option value="BINANCE:CVXUSDT">Convex Finance (CVX)</option>
            <option value="BINANCE:GMXUSDT">GMX (GMX)</option>
            <option value="BINANCE:GALAUSDT">Gala (GALA)</option>
            <option value="BINANCE:LDOUSDT">Lido DAO (LDO)</option>
            <option value="BINANCE:ROSEUSDT">Oasis Network (ROSE)</option>
            <option value="BINANCE:MINAUSDT">Mina (MINA)</option>
            <option value="BINANCE:API3USDT">API3 (API3)</option>
            <option value="BINANCE:JASMYUSDT">JasmyCoin (JASMY)</option>
            <option value="BINANCE:ICXUSDT">ICON (ICX)</option>
            <option value="BINANCE:BATUSDT">Basic Attention Token (BAT)</option>
            <option value="BINANCE:STORJUSDT">Storj (STORJ)</option>
            <option value="BINANCE:ANKRUSDT">Ankr (ANKR)</option>
            <option value="BINANCE:OCEANUSDT">Ocean Protocol (OCEAN)</option>
            <option value="BINANCE:ZILUSDT">Zilliqa (ZIL)</option>
            <option value="BINANCE:SKLUSDT">SKALE (SKL)</option>
            <option value="BINANCE:QTUMUSDT">Qtum (QTUM)</option>
            <option value="BINANCE:HOTUSDT">Holo (HOT)</option>
            <option value="BINANCE:ONTUSDT">Ontology (ONT)</option>
            <option value="BINANCE:RVNUSDT">Ravencoin (RVN)</option>
            <option value="BINANCE:GLMRUSDT">Moonbeam (GLMR)</option>
            <option value="BINANCE:IOTXUSDT">IoTeX (IOTX)</option>
            <option value="BINANCE:ONEUSDT">Harmony (ONE)</option>
            <option value="BINANCE:SCUSDT">Siacoin (SC)</option>
            <option value="BINANCE:CELRUSDT">Celer Network (CELR)</option>
            <option value="BINANCE:ACHUSDT">Alchemy Pay (ACH)</option>
            <option value="BINANCE:STMXUSDT">StormX (STMX)</option>
            <option value="BINANCE:ZENUSDT">Horizen (ZEN)</option>
            <option value="BINANCE:RSRUSDT">Reserve Rights (RSR)</option>
            <option value="BINANCE:YFIUSDT">yearn.finance (YFI)</option>
            <option value="BINANCE:BLURUSDT">Blur (BLUR)</option>
            <option value="BINANCE:PEOPLEUSDT">ConstitutionDAO (PEOPLE)</option>
            <option value="BINANCE:PERPUSDT">Perpetual Protocol (PERP)</option>
            <option value="BINANCE:UMAUSDT">UMA (UMA)</option>
            <option value="BINANCE:IDUSDT">SPACE ID (ID)</option>
            <option value="BINANCE:AGIXUSDT">SingularityNET (AGIX)</option>
            <option value="BINANCE:FETUSDT">Fetch.ai (FET)</option>
            <option value="BINANCE:LITUSDT">Litentry (LIT)</option>
            <option value="BINANCE:CTSIUSDT">Cartesi (CTSI)</option>
            <option value="BINANCE:ARUSDT">Arweave (AR)</option>
            <option value="BINANCE:DYDXUSDT">dYdX (DYDX)</option>
            <option value="BINANCE:OGNUSDT">Origin Protocol (OGN)</option>
            <option value="BINANCE:REEFUSDT">Reef Finance (REEF)</option>
            <option value="BINANCE:NMRUSDT">Numeraire (NMR)</option>
            <option value="BINANCE:MDTUSDT">Measurable Data Token (MDT)</option>
            <option value="BINANCE:KEYUSDT">SelfKey (KEY)</option>
            <option value="BINANCE:AUCTIONUSDT">Bounce Token (AUCTION)</option>
            <option value="BINANCE:ATAUSDT">Automata (ATA)</option>
            <option value="BINANCE:SLPUSDT">Smooth Love Potion (SLP)</option>
            <option value="BINANCE:ILVUSDT">Illuvium (ILV)</option>
            <option value="BINANCE:ALICEUSDT">MyNeighborAlice (ALICE)</option>
            <option value="BINANCE:SUPERUSDT">SuperVerse (SUPER)</option>
            <option value="BINANCE:MASKUSDT">Mask Network (MASK)</option>
            <option value="BINANCE:HIGHUSDT">Highstreet (HIGH)</option>
            <option value="BINANCE:INJUSDT">Injective (INJ)</option>
            <option value="BINANCE:RADUSDT">Radicle (RAD)</option>
            <option value="BINANCE:AMPUSDT">Amp (AMP)</option>
            <option value="BINANCE:TRBUSDT">Truebit (TRB)</option>
            <option value="BINANCE:ANTUSDT">Aragon (ANT)</option>
            <option value="BINANCE:CFXUSDT">Conflux (CFX)</option>
            <option value="BINANCE:SSVUSDT">SSV Network (SSV)</option>
            <option value="BINANCE:WOOUSDT">WOO Network (WOO)</option>
            <option value="BINANCE:BAKEUSDT">BakeryToken (BAKE)</option>
            <option value="BINANCE:GTCUSDT">Gitcoin (GTC)</option>
            <option value="BINANCE:FXSUSDT">Frax Share (FXS)</option>
            <option value="BINANCE:JOEUSDT">JOE (JOE)</option>
            <option value="BINANCE:RAYUSDT">Raydium (RAY)</option>
            <option value="BINANCE:QIUSDT">BENQI (QI)</option>
            <option value="BINANCE:SPELLUSDT">Spell Token (SPELL)</option>
            <option value="BINANCE:ALPHAUSDT">Alpha Finance (ALPHA)</option>
            <option value="BINANCE:REQUSDT">Request (REQ)</option>
            <option value="BINANCE:ORNUSDT">Orion Protocol (ORN)</option>
            <option value="BINANCE:TOMOUSDT">TomoChain (TOMO)</option>
            <option value="BINANCE:CTKUSDT">CertiK (CTK)</option>
            <option value="BINANCE:FORTHUSDT">Ampleforth Governance (FORTH)</option>
            <option value="BINANCE:FRONTUSDT">Frontier (FRONT)</option>
            <option value="BINANCE:TRUUSDT">TrueFi (TRU)</option>
            <option value="BINANCE:MBLUSDT">MovieBloc (MBL)</option>
            <option value="BINANCE:OXTUSDT">Orchid (OXT)</option>
            <option value="BINANCE:STPTUSDT">Standard Tokenization Protocol (STPT)</option>
            <option value="BINANCE:COCOSUSDT">COCOS BCX (COCOS)</option>
            <option value="BINANCE:TLMUSDT">Alien Worlds (TLM)</option>
            <option value="BINANCE:ERNUSDT">Ethernity Chain (ERN)</option>
            <option value="BINANCE:MLNUSDT">Enzyme (MLN)</option>
            <option value="BINANCE:UTKUSDT">Utrust (UTK)</option>
            <option value="BINANCE:VTHOUSDT">v.systems (VTHO)</option>
            <option value="BINANCE:WRXUSDT">WazirX (WRX)</option>
            <option value="BINANCE:DREPUSDT">Drep (DREP)</option>
            <option value="BINANCE:BEAMUSDT">Beam (BEAM)</option>
            <option value="BINANCE:AVAUSDT">Travala.com (AVA)</option>
            <option value="BINANCE:ARDRUSDT">Ardor (ARDR)</option>
            <option value="BINANCE:STMXUSDT">StormX (STMX)</option>
        </select>
        
        <label for="timeframe">Timeframe:</label>
        <select id="timeframe">
            <option value="1">1 Minute</option>
            <option value="5">5 Minutes</option>
            <option value="15" selected>15 Minutes</option>
            <option value="60">1 Hour</option>
        </select>
        
        <button onclick="deposit()">Deposit</button>
        <button onclick="withdraw()">Withdraw</button>
    </div>

    <div class="ad-banner middle-banner">
        <!-- Middle Content Banner (728x90) -->
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
             crossorigin="anonymous"></script>
        <!-- CryptoSim_Middle -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
             data-ad-slot="XXXXXXXXXX"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <div class="chart" id="tradingview-widget-container"></div>

    <div class="actions">
        <input type="number" placeholder="Amount (min $10)" id="trade-amount" min="10">
        <button id="buy-btn" onclick="buy()">Buy/Long</button>
        <button id="sell-btn" onclick="sell()">Sell/Short</button>
        <button onclick="cancelTrade()">Cancel</button>
        <button onclick="closeAll()">Close All</button>
        <button onclick="resetAccount()">Reset</button>
    </div>

    <div class="amazon-affiliate">
        <!-- Amazon Affiliate Button -->
        <a href="https://www.amazon.com/s?k=crypto+hardware+wallet&tag=yourtag-20" class="amazon-btn" target="_blank">
            <span>Shop Crypto Products on Amazon</span>
        </a>
    </div>

    <h2 style="text-align: center;">Trade on Top Cryptos Exchanges</h2>
    <div class="exchange-grid">
        <!-- Ordered as requested -->
        <div class="exchange-card">
            <img src="logo/binance.png" class="exchange-logo">
            <div class="exchange-name">Binance</div>
            <div class="exchange-fiat">USD, EUR, GBP, BRL +8 more</div>
            <a href="https://accounts.binance.com/register?ref=13150265" target="_blank" style="color:#ffffff; font-weight:roman;">Sign Up</a>
        </div>
        <div class="exchange-card">
            <img src="logo/bybit.png" class="exchange-logo">
            <div class="exchange-name">Bybit</div>
            <div class="exchange-fiat">USD, EUR, GBP, JPY +5 more</div>
            <a href="https://www.bybit.com/invite?ref=6GN055J" target="_blank" style="color:#ffffff; font-weight:roman;">Sign Up</a>            
        </div>
        <div class="exchange-card">
            <img src="logo/bitso.png" class="exchange-logo">
            <div class="exchange-name">Bitso</div>
            <div class="exchange-fiat">MXN, ARS, BRL, USD</div>
            <a href="https://bitso.com/?ref=uyca" target="_blank" style="color:#ffffff; font-weight:roman;">Sign Up</a>
        </div>
        <div class="exchange-card">
            <img src="logo/coinbase.png" class="exchange-logo">
            <div class="exchange-name">Coinbase</div>
            <div class="exchange-fiat">USD, EUR, GBP, CAD +7 more</div>
            <div class="exchange-signup">Sign Up</div>
        </div>        
        <div class="exchange-card">
            <img src="logo/okx.png" class="exchange-logo">
            <div class="exchange-name">OKX</div>
            <div class="exchange-fiat">USD, EUR, GBP, JPY +6 more</div>
            <a href="https://okx.com/join/37153892" target="_blank" style="color:#ffffff; font-weight:roman;">Sign Up</a>
        </div>
        <div class="exchange-card">
            <img src="logo/bitget.png" class="exchange-logo">
            <div class="exchange-name">Bitget</div>
            <div class="exchange-fiat">USD, EUR, GBP, JPY +4 more</div>
            <a href="https://share.bitget.com/u/9U7F1J5T" target="_blank" style="color:#ffffff; font-weight:roman;">Sign Up</a>
        </div>
        <div class="exchange-card">
            <img src="logo/mexc.png"  class="exchange-logo">
            <div class="exchange-name">MEXC</div>
            <div class="exchange-fiat">USD, EUR, GBP, JPY +5 more</div>
            <a href="https://promote.mexc.com/r/3SSKENHs" target="_blank" style="color:#ffffff; font-weight:roman;">Sign Up</a>
        </div>
        <div class="exchange-card">
            <img src="logo/gate.png" class="exchange-logo">
            <div class="exchange-name">Gate.io</div>
            <div class="exchange-fiat">USD, EUR, GBP, JPY +7 more</div>
            <a href="/" target="_blank" style="color:#ffffff; font-weight:roman;">Sign Up</a>
        </div>
        <div class="exchange-card">
            <img src="logo/Htx.png" class="exchange-logo">
            <div class="exchange-name">HTX</div>
            <div class="exchange-fiat">USD, EUR, GBP, JPY +6 more</div>
            <a href="https://www.htx.com/invite/es-la/1f?invite_code=k73kc223" target="_blank" style="color:#ffffff; font-weight:roman;">Sign Up</a>
        </div>
        <div class="exchange-card">
            <img src="logo/kucoin.png" class="exchange-logo">
            <div class="exchange-name">KuCoin</div>
            <div class="exchange-fiat">USD, EUR, GBP, JPY +5 more</div>
            <a href="https://www.kucoin.com/r/rf/CX8TUK3Z" target="_blank" style="color:#ffffff; font-weight:roman;">Sign Up</a>
        </div>
        <div class="exchange-card">
            <img src="logo/bitfinex.png" class="exchange-logo">
            <div class="exchange-name">Bitfinex</div>
            <div class="exchange-fiat">USD, EUR, GBP, JPY</div>
            <div class="exchange-signup">Sign Up</div>
        </div>
        <div class="exchange-card">
            <img src="logo/bingX.png" class="exchange-logo">
            <div class="exchange-name">BingX</div>
            <div class="exchange-fiat">USD, EUR, GBP, JPY +4 more</div>
            <a href="https://bingx.com/invite/BSIQF4" target="_blank" style="color:#ffffff; font-weight:roman;">Sign Up</a>
        </div>        
        <div class="exchange-card">
            <img src="logo/bitmart.png" class="exchange-logo">
            <div class="exchange-name">BitMart</div>
            <div class="exchange-fiat">USD, EUR, GBP, JPY +3 more</div>
            <a href="https://www.bitmart.com/invite/nDFXdE/es" target="_blank" style="color:#ffffff; font-weight:roman;">Sign Up</a>
        </div>
        <div class="exchange-card">
            <img src="logo/Lbank.png" class="exchange-logo">
            <div class="exchange-name">LBank</div>
            <div class="exchange-fiat">USD, EUR, GBP, JPY +4 more</div>
            <a href="https://lbank.com/ref/EPKJ" target="_blank" style="color:#ffffff; font-weight:roman;">Sign Up</a>
        </div>
        <div class="exchange-card">
            <img src="logo/xt.png" alt="XT.COM" class="exchange-logo">
            <div class="exchange-name">XT.COM</div>
            <div class="exchange-fiat">USD, EUR, GBP, JPY +5 more</div>
            <div class="exchange-signup">Sign Up</div>
        </div>
    </div>
   <!-- ======= LIVE CRYPTO NEWS SECTION ======= -->
<section class="crypto-news-section" id="crypto-news">
    <div class="news-header">
        <h2>📡 Live Crypto News Dashboard</h2>
        <p class="subtitle">Stay updated with the latest crypto market news and trends in real time</p>
        <div class="news-controls">
            <div class="button-row">
                <button id="toggle-news" class="news-btn collapse-btn">
                    <i class="fas fa-compress-alt"></i> Collapse
                </button>
                <button id="refresh-news" class="news-btn refresh-btn">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <div class="search-container">
                    <input type="text" id="crypto-search" placeholder="Search crypto news..." class="search-input">
                    <button id="search-btn" class="news-btn search-btn">
                        <i class="fas fa-search"></i> Search
                    </button>
                </div>
            </div>
            <div class="button-row filter-buttons">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="bitcoin">Bitcoin</button>
                <button class="filter-btn" data-filter="ethereum">Ethereum</button>
                <button class="filter-btn" data-filter="altcoins">Altcoins</button>
                <button class="filter-btn" data-filter="memecoins">Memecoins</button>
                <button class="filter-btn" data-filter="nft">NFT</button>
                <button class="filter-btn" data-filter="defi">DeFi</button>
                <button class="filter-btn" data-filter="games">Crypto Games</button>
                <button class="filter-btn" data-filter="trending">Trending</button>
                <button class="filter-btn" data-filter="security">Security</button>
                <button class="filter-btn" data-filter="mining">Mining</button>
                <button class="filter-btn" data-filter="regulation">Regulation</button>
            </div>
        </div>
    </div>

    <div class="news-container">
        <div class="news-grid" id="news-grid">
            <div class="news-loading">
                <div class="loading-spinner"></div>
                <p>Loading crypto news...</p>
            </div>
        </div>
    </div>

    <!-- Market Stats Widget -->
    <div class="market-stats-widget" id="market-stats">
        <h3><i class="fas fa-chart-pie"></i> Global Crypto Market Stats</h3>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="market-cap">$2.34T <span class="positive"><i class="fas fa-caret-up"></i> 1.2%</span></div>
                <div class="stat-label">Market Cap</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="volume">$84.5B <span class="positive"><i class="fas fa-caret-up"></i> 3.4%</span></div>
                <div class="stat-label">24h Volume</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="btc-dominance">51.3% <span class="negative"><i class="fas fa-caret-down"></i> 0.7%</span></div>
                <div class="stat-label">BTC Dominance</div>
            </div>
            <div class="stat-card">
                <div class="stat-value"><i class="fas fa-smile"></i> 72/100</div>
                <div class="stat-label">Market Sentiment</div>
            </div>
        </div>
    </div>

    <!-- News Modal -->
    <div class="news-modal" id="news-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 id="modal-title"></h2>
            <div class="modal-meta">
                <span id="modal-source"></span>
                <span id="modal-date"></span>
            </div>
            <div id="modal-image-container"></div>
            <div id="modal-content"></div>
        </div>
    </div>
</section>

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Google Fonts - Inter -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
    /* General body styles from tradescript.html and Inter font */
    body {
        font-family: 'Inter', sans-serif;
        background: #0e1116; /* Black background from tradescript.html */
        color: #e2e8f0;
        line-height: 1.6;
        padding: 20px;
    }

    /* Styles for the News Section */
    .crypto-news-section {
        background: #1e222d; /* Darker gray background for the section */
        border-radius: 16px;
        padding: 20px; /* Reduced padding for compactness */
        margin: 30px auto;
        border: 1px solid #334155;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        max-width: 1200px; /* Max width for compactness */
    }

    .news-header {
        text-align: center;
        margin-bottom: 20px; /* Reduced margin */
    }

    .news-header h2 {
        font-size: 2rem; /* Slightly smaller font for compactness */
        margin-bottom: 8px;
        color: #e2e8f0;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }

    .subtitle {
        color: #94a3b8;
        font-size: 1.1rem; /* Slightly smaller font */
        max-width: 600px;
        margin: 0 auto 15px auto; /* Reduced margin */
    }

    .news-controls {
        display: flex;
        flex-direction: column;
        gap: 10px; /* Reduced gap */
        margin-bottom: 15px; /* Reduced margin */
    }

    .button-row {
        display: flex;
        flex-wrap: wrap;
        gap: 8px; /* Reduced gap */
        align-items: center;
        justify-content: center;
    }

    .news-btn, .filter-btn {
        padding: 8px 15px; /* Reduced padding for compactness */
        border-radius: 6px; /* Slightly smaller radius */
        font-size: 14px; /* Slightly smaller font */
    }

    .news-btn {
        background: #3a8dd8; /* Use blue from tradescript.html */
        color: #fff;
        border: none;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 6px;
        font-weight: 600;
        box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
    }

    .news-btn:hover {
        background: #337ac4; /* Darker blue on hover */
        transform: translateY(-2px);
        box-shadow: 0 5px 8px rgba(0, 0, 0, 0.15);
    }

    .collapse-btn {
        background: #10b981; /* Green color */
    }
    .collapse-btn:hover {
        background: #059669;
    }

    .refresh-btn {
        background: #3a8dd8;
    }

    .search-btn {
        background: #64748b;
    }
    .search-btn:hover {
        background: #475569;
    }

    .filter-btn {
        background: #1e222d; /* Background color of tradescript.html header */
        color: #cbd5e1;
        border: 1px solid #334155; /* Slight border for definition */
        font-weight: 500;
    }

    .filter-btn.active {
        background: #3a8dd8; /* Use blue from tradescript.html */
        color: white;
        box-shadow: 0 0 0 2px rgba(58, 141, 216, 0.4);
    }

    .filter-btn:hover:not(.active) {
        background: #2c313a; /* Darker grey on hover */
    }

    .search-container {
        display: flex;
        align-items: center;
        margin-left: auto;
        background: #2c313a; /* Darker grey from tradescript.html th */
        border-radius: 6px;
        overflow: hidden;
        border: 1px solid #334155;
        transition: all 0.2s;
    }

    .search-container:focus-within {
        border-color: #3a8dd8;
        box-shadow: 0 0 0 2px rgba(58, 141, 216, 0.4);
    }

    .search-input {
        padding: 8px 12px;
        border: none;
        background: transparent;
        color: #e2e8f0;
        font-size: 14px;
        width: 200px; /* Slightly narrower */
        outline: none;
    }

    .search-input::placeholder {
        color: #94a3b8;
    }

    .news-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); /* Adjusted minmax for compactness */
        gap: 20px; /* Reduced gap for compactness */
        margin-top: 20px;
    }

    .news-card {
        background: #1e222d; /* Matches section background */
        border-radius: 10px; /* Slightly smaller radius */
        padding: 15px; /* Consistent padding */
        transition: transform 0.3s, box-shadow 0.3s;
        border: 1px solid #2c313a; /* Darker border */
        cursor: pointer;
        display: flex;
        flex-direction: column;
        height: 100%;
        overflow: hidden;
    }

    .news-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        border-color: #3a8dd8;
    }

    .news-image-container {
        width: 100%;
        height: 160px; /* Height of image container slightly reduced for compactness */
        border-radius: 6px;
        overflow: hidden;
        margin-bottom: 10px;
        position: relative;
    }

    .news-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s;
    }

    .news-card:hover .news-image {
        transform: scale(1.05);
    }

    .default-image {
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, #2c313a, #1e222d);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #94a3b8;
        font-size: 13px;
        text-align: center;
        padding: 10px;
    }

    .news-card h3 {
        color: #e2e8f0;
        font-size: 17px; /* Slightly smaller font */
        margin: 0 0 5px 0; /* Reduced margin for compactness */
        line-height: 1.3;
        font-weight: 600;
        flex-grow: 1;
    }

    .news-content {
        color: #94a3b8;
        font-size: 14px; /* Slightly smaller font */
        margin-bottom: 8px; /* Reduced margin for compactness */
        line-height: 1.5;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .news-meta {
        color: #7b8a9c;
        font-size: 11px; /* Smaller font */
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: auto;
    }

    .source-badge {
        background: #2c313a; /* Matches table header/search container */
        padding: 2px 5px;
        border-radius: 3px;
        font-size: 10px;
    }

    /* Market Stats Widget Styles (adjusted for consistency) */
    .market-stats-widget {
        background: #1e222d; /* Matches section background */
        border-radius: 16px;
        padding: 20px;
        margin-top: 30px;
        border: 1px solid #334155;
    }

    .market-stats-widget h3 {
        color: #e2e8f0;
        margin-top: 0;
        margin-bottom: 15px; /* Reduced margin */
        font-size: 17px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); /* Adjusted minmax */
        gap: 15px; /* Reduced gap */
    }

    .stat-card {
        background: #2c313a; /* Darker gray */
        border-radius: 8px; /* Slightly smaller radius */
        padding: 15px; /* Reduced padding */
        text-align: center;
        transition: transform 0.3s;
        border: 1px solid #334155;
    }

    .stat-card:hover {
        transform: translateY(-2px);
        border-color: #3a8dd8;
    }

    .stat-value {
        color: #e2e8f0;
        font-size: 22px; /* Slightly smaller */
        font-weight: 700;
        margin-bottom: 6px; /* Reduced margin */
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
    }

    .positive {
        color: #00ff9f; /* Green from tradescript.html */
    }

    .negative {
        color: #ff4d4d; /* Red from tradescript.html */
    }

    .stat-label {
        color: #94a3b8;
        font-size: 13px; /* Slightly smaller */
    }

    /* News Modal Styles (adjusted for consistency) */
    .news-modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        overflow-y: auto;
        backdrop-filter: blur(5px);
    }

    .modal-content {
        background-color: #1e222d; /* Matches section background */
        margin: 30px auto; /* Adjusted margin */
        padding: 25px; /* Reduced padding */
        border: 1px solid #334155;
        border-radius: 12px;
        width: 95%;
        max-width: 800px; /* Reduced max-width for compactness */
        position: relative;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
    }

    .close-modal {
        color: #94a3b8;
        position: absolute;
        right: 20px; /* Adjusted position */
        top: 20px; /* Adjusted position */
        font-size: 30px;
        font-weight: bold;
        cursor: pointer;
        transition: color 0.3s;
        z-index: 10;
    }

    .close-modal:hover {
        color: #e2e8f0;
    }

    #modal-title {
        color: #e2e8f0;
        margin-top: 0;
        margin-bottom: 15px; /* Reduced margin */
        font-size: 26px; /* Slightly smaller */
        line-height: 1.3;
        padding-right: 20px;
    }

    .modal-meta {
        color: #94a3b8;
        font-size: 15px; /* Slightly smaller */
        margin-bottom: 20px; /* Reduced margin */
        display: flex;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 10px; /* Reduced gap */
        padding-bottom: 10px; /* Reduced padding */
        border-bottom: 1px solid #334155;
    }

    #modal-image-container {
        margin-bottom: 20px; /* Reduced margin */
        border-radius: 8px; /* Slightly smaller radius */
        overflow: hidden;
        max-height: 400px; /* Reduced max height */
    }

    #modal-image-container img {
        width: 100%;
        height: auto;
        display: block;
    }

    #modal-content {
        color: #cbd5e1;
        line-height: 1.7; /* Slightly tighter line height */
        font-size: 16px; /* Slightly smaller font */
    }

    #modal-content p {
        margin-bottom: 15px; /* Reduced margin */
    }

    /* Hidden keywords for SEO */
    .article-keywords {
        position: absolute;
        width: 1px;
        height: 1px;
        margin: -1px;
        padding: 0;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        border: 0;
    }

    .news-loading, .news-error, .news-empty {
        color: #94a3b8;
        text-align: center;
        padding: 30px 15px; /* Reduced padding */
        grid-column: 1 / -1;
        font-size: 16px; /* Slightly smaller */
    }

    .loading-spinner {
        border: 3px solid rgba(58, 141, 216, 0.3); /* Smaller border */
        border-top: 3px solid #3a8dd8;
        width: 40px; /* Smaller size */
        height: 40px;
        margin: 0 auto 15px; /* Reduced margin */
    }

    .notification {
        padding: 12px 20px; /* Reduced padding */
        border-radius: 6px; /* Smaller radius */
        font-size: 14px; /* Smaller font */
    }

    /* Media Queries for Responsiveness */
    @media (max-width: 768px) {
        .crypto-news-section {
            padding: 15px;
            margin: 20px auto;
        }
        .news-header h2 {
            font-size: 1.8rem;
        }
        .subtitle {
            font-size: 1rem;
        }
        .news-btn, .filter-btn {
            padding: 7px 12px;
            font-size: 13px;
        }
        .search-input {
            width: 100%;
        }
        .news-grid {
            grid-template-columns: 1fr;
            gap: 15px;
        }
        .news-card {
            padding: 10px;
        }
        .news-card h3 {
            font-size: 16px;
        }
        .news-content {
            font-size: 13px;
        }
        .news-meta {
            font-size: 10px;
        }
        .modal-content {
            margin: 20px auto;
            padding: 20px;
        }
        #modal-title {
            font-size: 22px;
        }
        .modal-meta {
            font-size: 14px;
        }
        #modal-image-container {
            max-height: 250px;
        }
        #modal-content {
            font-size: 15px;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', async () => {
        // Configuration
        const RSS_PROXY = "https://api.rss2json.com/v1/api.json?rss_url=";
        const RSS_FEEDS = [
            "https://cointelegraph.com/rss",
            "https://decrypt.co/feed",
            "https://cryptonews.com/news/feed/",
            "https://www.coindesk.com/arc/outboundfeeds/rss/"
        ].map(url => RSS_PROXY + encodeURIComponent(url));

        const COINGECKO_API = "https://api.coingecko.com/api/v3/global";

        // DOM Elements
        const newsGrid = document.getElementById('news-grid');
        const toggleBtn = document.getElementById('toggle-news');
        const refreshBtn = document.getElementById('refresh-news');
        const filterBtns = document.querySelectorAll('.filter-btn');
        const searchInput = document.getElementById('crypto-search');
        const searchBtn = document.getElementById('search-btn');
        const modal = document.getElementById('news-modal');
        const closeModal = document.querySelector('.close-modal');
        
        // State
        let allNews = [];
        let currentFilter = 'all';
        let isExpanded = true;

        // Initialization
        loadNews();
        loadMarketStats();
        setupEventListeners();

        // ===== MAIN FUNCTIONS =====
        async function loadNews() {
            try {
                newsGrid.innerHTML = `
                    <div class="news-loading">
                        <div class="loading-spinner"></div>
                        <p>Loading crypto news...</p>
                    </div>
                `;
                
                const news = await fetchNews(RSS_FEEDS);
                allNews = news;
                
                renderNews(filterNews(allNews, currentFilter));
            } catch (error) {
                console.error("Error loading news:", error);
                newsGrid.innerHTML = '<div class="news-error">Failed to load news. Try refreshing.</div>';
            }
        }

        async function fetchNews(feeds) {
            try {
                const responses = await Promise.all(
                    feeds.map(url => fetch(url).then(res => res.json()))
                );
                
                // Extract news and process images
                const newsItems = responses.flatMap(res => 
                    res.items?.map(item => {
                        const imageUrl = extractFirstImage(item.description) || 
                                        (item.enclosure && item.enclosure.link) || 
                                        (item.thumbnail && item.thumbnail) || 
                                        null;
                        
                        return {
                            title: item.title,
                            content: item.description || "No content available",
                            source: res.feed?.title.replace(/ - Latest News|Feed/g, "") || "Unknown Source",
                            date: item.pubDate || new Date().toISOString(),
                            keywords: extractKeywords(item.title + " " + (item.description || "")),
                            image: imageUrl,
                            // Clean and sanitize the content for the modal
                            fullContent: cleanAndSanitizeContent(item.description || item.content || ""), 
                            link: item.link
                        };
                    }) || []
                );
                
                return newsItems;
            } catch (error) {
                console.error("Error fetching news:", error);
                return [];
            }
        }

        function renderNews(news) {
            if (!news.length) {
                newsGrid.innerHTML = '<div class="news-empty">No news available for this filter.</div>';
                return;
            }

            newsGrid.innerHTML = news.map(item => `
                <div class="news-card" data-keywords="${item.keywords.join(',')}" aria-label="${item.title}">
                    <div class="news-image-container">
                        ${item.image ? 
                            `<img src="${item.image}" alt="${item.title}" class="news-image" onerror="this.onerror=null;this.src='https://placehold.co/600x400/334155/e2e8f0?text=Image+Not+Available';">` : 
                            `<div class="default-image" role="img" aria-label="Image not available for ${item.title}"><i class="fas fa-newspaper"></i> Image not available</div>`
                        }
                    </div>
                    <h3>${item.title}</h3>
                    <div class="news-content">${truncateContent(item.content, 150)}</div>
                    <div class="news-meta">
                        <span class="source-badge">${item.source}</span>
                        <span>${formatDate(item.date)}</span>
                    </div>
                </div>
            `).join('');

            // Add event listeners to news cards
            document.querySelectorAll('.news-card').forEach((card, index) => {
                card.addEventListener('click', () => openNewsModal(news[index]));
            });
        }

        async function loadMarketStats() {
            try {
                // Using real data from CoinGecko API
                const response = await fetch(COINGECKO_API);
                const data = await response.json();
                
                document.getElementById('market-cap').innerHTML = `$${formatNumber(data.data.total_market_cap.usd)} <span class="positive"><i class="fas fa-caret-up"></i> ${(data.data.market_cap_change_percentage_24h_usd || 1.2).toFixed(1)}%</span>`;
                document.getElementById('volume').innerHTML = `$${formatNumber(data.data.total_volume.usd)} <span class="positive"><i class="fas fa-caret-up"></i> 3.4%</span>`;
                document.getElementById('btc-dominance').innerHTML = `${data.data.market_cap_percentage.btc.toFixed(1)}% <span class="negative"><i class="fas fa-caret-down"></i> 0.7%</span>`;
            } catch (error) {
                console.error("Error loading market stats:", error);
                // Keep the sample data already in the HTML. It's safe for free APIs to fail.
            }
        }

        function openNewsModal(newsItem) {
            if (newsItem) {
                document.getElementById('modal-title').textContent = newsItem.title;
                document.getElementById('modal-source').textContent = newsItem.source;
                document.getElementById('modal-date').textContent = formatDate(newsItem.date, true);
                
                const imageContainer = document.getElementById('modal-image-container');
                imageContainer.innerHTML = newsItem.image ? 
                    `<img src="${newsItem.image}" alt="${newsItem.title}" class="news-image" onerror="this.onerror=null;this.src='https://placehold.co/600x400/334155/e2e8f0?text=Image+Not+Available+in+Modal';">` : 
                    `<div class="default-image" style="height: 200px;" role="img" aria-label="Image not available for ${newsItem.title}"><i class="fas fa-newspaper fa-3x"></i><p>Image not available</p></div>`;
                
                // Ensure the clean HTML content is inserted directly
                // Keywords are now in a visually hidden div for SEO purposes
                document.getElementById('modal-content').innerHTML = `
                    <div id="article-content">
                        ${newsItem.fullContent || '<p>Content not available.</p>'}
                    </div>
                    ${newsItem.keywords.length > 0 ? `
                        <div class="article-keywords" aria-hidden="true">
                            <h4>Keywords:</h4>
                            <div>
                                ${newsItem.keywords.map(keyword => `<span>#${keyword}</span>`).join('')}
                            </div>
                        </div>
                    ` : ''}
                `;
                
                modal.style.display = "block";
                document.body.style.overflow = "hidden"; // Disable body scroll
            }
        }

        function closeNewsModal() {
            modal.style.display = "none";
            document.body.style.overflow = "auto"; // Enable body scroll
        }

        // ===== BUTTON AND FILTER FUNCTIONALITY =====
        function setupEventListeners() {
            // Collapse/Expand Button
            toggleBtn.addEventListener('click', () => {
                isExpanded = !isExpanded;
                const newsContainer = document.querySelector('.news-container');
                newsContainer.style.display = isExpanded ? 'block' : 'none';
                toggleBtn.innerHTML = isExpanded ? 
                    '<i class="fas fa-compress-alt"></i> Collapse' : 
                    '<i class="fas fa-expand-alt"></i> Expand';
            });

            // Refresh Button
            refreshBtn.addEventListener('click', () => {
                // Spin animation
                refreshBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Refreshing...';
                
                // Reload news
                loadNews();
                loadMarketStats();
                
                // Restore button after 2 seconds and show notification
                setTimeout(() => {
                    refreshBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Refresh';
                    showNotification('News updated successfully');
                }, 2000);
            });

            // Filter Buttons
            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    filterBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentFilter = btn.dataset.filter;
                    renderNews(filterNews(allNews, currentFilter));
                });
            });

            // Search
            searchBtn.addEventListener('click', () => {
                const searchTerm = searchInput.value.trim().toLowerCase();
                if (searchTerm) {
                    const filtered = allNews.filter(item => 
                        item.title.toLowerCase().includes(searchTerm) || 
                        item.content.toLowerCase().includes(searchTerm) ||
                        item.keywords.some(kw => kw.includes(searchTerm))
                    );
                    renderNews(filtered);
                } else {
                    renderNews(filterNews(allNews, currentFilter));
                }
            });

            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    searchBtn.click();
                }
            });

            // Modal
            closeModal.addEventListener('click', closeNewsModal);
            window.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeNewsModal();
                }
            });
        }

        function filterNews(news, filter) {
            if (filter === 'all') return news;
            
            const filterMap = {
                bitcoin: ['bitcoin', 'btc'],
                ethereum: ['ethereum', 'eth'],
                altcoins: ['altcoin', 'xrp', 'solana', 'cardano', 'polkadot', 'avalanche', 'litecoin'],
                memecoins: ['meme', 'dogecoin', 'shiba', 'pepe', 'doge', 'shib'],
                nft: ['nft', 'non-fungible', 'non fungible', 'digital art', 'collectible'],
                defi: ['defi', 'decentralized finance', 'staking', 'yield', 'lending', 'borrowing'],
                games: ['game', 'nft', 'metaverse', 'web3', 'play-to-earn', 'gaming'],
                trending: ['trending', 'bullish', 'bearish', 'rally', 'surge', 'price prediction'],
                security: ['security', 'hack', 'phishing', 'scam', 'audit'],
                mining: ['mining', 'miner', 'hashrate', 'proof-of-work', 'pow', 'gpu'],
                regulation: ['regulation', 'sec', 'cftc', 'policy', 'law', 'government']
            };
            
            const keywords = filterMap[filter] || [filter];
            return news.filter(item => 
                keywords.some(kw => 
                    item.title.toLowerCase().includes(kw) || 
                    item.keywords.includes(kw)
                )
            );
        }

        // ===== HELPER FUNCTIONS =====
        function extractKeywords(text) {
            const keywords = [
                'bitcoin', 'ethereum', 'btc', 'eth', 
                'bullish', 'bearish', 'altcoin', 'meme',
                'game', 'nft', 'defi', 'web3', 'trending',
                'solana', 'cardano', 'polkadot', 'xrp',
                'dogecoin', 'shiba', 'pepe', 'avalanche',
                'blockchain', 'crypto', 'token', 'coin',
                'exchange', 'wallet', 'mining', 'staking',
                'security', 'hack', 'phishing', 'scam', 'audit',
                'miner', 'hashrate', 'proof-of-work', 'pow', 'gpu',
                'regulation', 'sec', 'cftc', 'policy', 'law', 'government'
            ];
            // Filter keywords from the text to ensure relevance
            const extracted = keywords.filter(kw => text.toLowerCase().includes(kw));
            // Add some generic keywords if none are found, or if too few
            if (extracted.length < 3) {
                if (text.toLowerCase().includes('crypto')) extracted.push('crypto');
                if (text.toLowerCase().includes('market')) extracted.push('market');
                if (text.toLowerCase().includes('news')) extracted.push('news');
            }
            // Remove duplicates and limit to a reasonable number
            return [...new Set(extracted)].slice(0, 5);
        }

        function extractFirstImage(html) {
            if (!html) return null;
            const imgRegex = /<img[^>]+src="([^">]+)"/;
            const match = html.match(imgRegex);
            return match ? match[1] : null;
        }

        // Function to clean and sanitize HTML content for display in modal
        function cleanAndSanitizeContent(html) {
            if (!html) return '';
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = html;
            tempDiv.querySelectorAll('script').forEach(script => script.remove());
            tempDiv.querySelectorAll('a').forEach(link => {
                const span = document.createElement('span');
                span.textContent = link.textContent;
                link.replaceWith(span);
            });
            tempDiv.querySelectorAll('img').forEach(img => img.remove());
            tempDiv.querySelectorAll('iframe').forEach(iframe => iframe.remove());
            tempDiv.querySelectorAll('[style]').forEach(el => el.removeAttribute('style'));
            tempDiv.querySelectorAll('[class]').forEach(el => el.removeAttribute('class'));
            return tempDiv.innerHTML;
        }

        function formatDate(dateStr, full = false) {
            const date = new Date(dateStr);
            if (full) {
                return date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }
            return date.toLocaleDateString('en-US', {
                month: 'short',
                day: 'numeric'
            });
        }

        function truncateContent(text, maxLength) {
            if (!text) return '';
            const stripped = text.replace(/<[^>]*>/g, '');
            return stripped.length > maxLength ? 
                stripped.substring(0, maxLength) + '...' : 
                stripped;
        }

        function formatNumber(num) {
            return new Intl.NumberFormat('en-US', {
                notation: 'compact',
                maximumFractionDigits: 1
            }).format(num);
        }
        
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Sample data for demonstration
        setTimeout(() => {
            if (document.querySelector('.news-loading')) {
                const sampleNews = [
                    {
                        title: "Bitcoin ETFs See Record Inflows, Boosting Market Confidence",
                        content: "Spot Bitcoin Exchange-Traded Funds (ETFs) have experienced unprecedented inflows this week, signaling growing institutional interest and confidence in the cryptocurrency market. This surge in investment is widely seen as a bullish indicator for Bitcoin's price trajectory.",
                        source: "Cointelegraph",
                        date: new Date().toISOString(),
                        image: "https://images.cointelegraph.com/images/840_aHR0cHM6Ly9zMy5jb2ludGVsZWdyYXBoLmNvbS91cGxvYWRzLzIwMjQtMDYvYjYxY2NkZjMtZWM1OS00ZDc0LWI4M2MtY2Q4YjM0Y2FhYjI4LmpwZw==.jpg",
                        fullContent: `
                            <p>Spot Bitcoin Exchange-Traded Funds (ETFs) have experienced unprecedented inflows this week, signaling growing institutional interest and confidence in the cryptocurrency market. This surge in investment is widely seen as a bullish indicator for Bitcoin's price trajectory.</p>
                            <p>Analysts report that the cumulative net inflows into these ETFs have surpassed $1.5 billion in the past five trading days, a new record since their inception. Major financial institutions are increasingly allocating capital into these investment vehicles, providing traditional investors with regulated access to Bitcoin.</p>
                            <p>The increased demand comes amidst a period of relative stability in the broader financial markets, making Bitcoin an attractive asset for diversification. Experts suggest that the continued acceptance of Bitcoin ETFs by mainstream finance could pave the way for further cryptocurrency derivatives and investment products.</p>
                            <p>Despite some volatility, the underlying sentiment remains strong, driven by macroeconomic factors and the upcoming Bitcoin halving event, which historically has preceded significant price rallies. The market eagerly anticipates how these new capital injections will influence Bitcoin's position as a global asset.</p>
                        `,
                        link: "#" 
                    },
                    {
                        title: "Ethereum's Dencun Upgrade Sets Stage for Layer-2 Dominance",
                        content: "The successful implementation of Ethereum's Dencun upgrade marks a pivotal moment for Layer-2 scaling solutions, promising reduced transaction costs and enhanced network efficiency.",
                        source: "Decrypt",
                        date: new Date(Date.now() - 86400000).toISOString(),
                        image: "https://decrypt.co/wp-content/uploads/2023/04/ETH_merge_shutterstock_1926591354.jpg?w=1024",
                        fullContent: `
                            <p>The successful implementation of Ethereum's Dencun upgrade marks a pivotal moment for Layer-2 scaling solutions, promising reduced transaction costs and enhanced network efficiency. This upgrade introduces "proto-danksharding," which significantly lowers data availability costs for rollups.</p>
                            <p>Rollups, such as Arbitrum and Optimism, are expected to benefit most from this upgrade, as they can now post transaction data more cheaply to the Ethereum mainnet. This reduction in cost is anticipated to be passed on to end-users, making decentralized applications (dApps) more accessible and affordable.</p>
                            <p>The Dencun upgrade is a crucial step in Ethereum's roadmap towards scalability, moving closer to a future where the network can handle mass adoption without prohibitive gas fees. Developers are already leveraging the new capabilities to build more complex and efficient applications.</p>
                            <p>Community response has been largely positive, with many seeing this as a necessary evolution for Ethereum to maintain its lead in the smart contract platform space. The upgrade is expected to foster innovation and growth across the DeFi and NFT ecosystems built on Ethereum Layer-2s.</p>
                        `,
                        link: "#"
                    },
                    {
                        title: "Gaming Guilds Redefine Play-to-Earn Economy with Massive Growth",
                        content: "Gaming guilds are rapidly expanding, transforming the play-to-earn (P2E) landscape by providing scholarships and capital to new players in blockchain games.",
                        source: "CryptoNews",
                        date: new Date(Date.now() - 172800000).toISOString(),
                        image: "https://cryptonews.com/wp-content/uploads/2023/05/nft-art.jpg",
                        fullContent: `
                            <p>Gaming guilds are rapidly expanding, transforming the play-to-earn (P2E) landscape by providing scholarships and capital to new players in blockchain games. These decentralized autonomous organizations (DAOs) pool resources to acquire valuable in-game assets and then lend them to players who might not otherwise afford them.</p>
                            <p>This model creates a symbiotic relationship where guilds earn a share of the players' in-game earnings, while players gain access to opportunities without upfront investment. This democratizes access to P2E games, especially in emerging markets where gaming can be a significant source of income.</p>
                            <p>The growth of these guilds highlights the evolving nature of the gaming industry, moving towards more community-driven and economically empowering models. Experts believe that gaming guilds will play a crucial role in onboarding the next wave of users into the broader Web3 ecosystem.</p>
                            <p>Challenges remain, including managing large and diverse player bases, optimizing asset utilization, and adapting to fluctuating game economies. However, continuous innovation in guild management tools and incentive structures promises to overcome these hurdles, fostering sustainable growth.</p>
                        `,
                        link: "#"
                    },
                    {
                        title: "DeFi Protocols Innovate with Real-World Asset Tokenization",
                        content: "Decentralized Finance (DeFi) is bridging the gap with traditional finance by increasingly tokenizing real-world assets (RWAs), from real estate to commodities.",
                        source: "CoinDesk",
                        date: new Date(Date.now() - 259200000).toISOString(),
                        image: "https://www.coindesk.com/resizer/v2/3JX5GQKXWZD5HLO7D6GZ5X2WHE.jpg",
                        fullContent: `
                            <p>Decentralized Finance (DeFi) is bridging the gap with traditional finance by increasingly tokenizing real-world assets (RWAs), from real estate to commodities. This innovation allows tangible assets to be represented as digital tokens on a blockchain, enabling fractional ownership, increased liquidity, and broader access to investments.</p>
                            <p>By tokenizing RWAs, DeFi protocols are opening up new avenues for capital efficiency and financial inclusion. Investors can gain exposure to assets like property, art, or even debt instruments without traditional intermediaries, often with lower transaction costs and faster settlement times.</p>
                            <p>This trend signifies a maturation of the DeFi space, moving beyond purely crypto-native assets to integrate with the multi-trillion dollar traditional financial markets. Regulatory frameworks are slowly adapting to accommodate these new financial instruments, paving the way for wider adoption.</p>
                            <p>Challenges include legal enforceability of tokenized ownership, accurate valuation of physical assets, and ensuring compliance across different jurisdictions. Nevertheless, the potential benefits in terms of transparency, accessibility, and efficiency are driving significant interest and development in the RWA tokenization sector.</p>
                        `,
                        link: "#"
                    }
                ];
                
                renderNews(sampleNews);
                allNews = sampleNews;
            }
        }, 1500); // Small delay to simulate loading
    });
</script>  

<!-- ======= CRYPTOQUEST GAME SECTION ======= -->
<section class="crypto-quest-section" id="crypto-quest">
    <div class="game-header">
        <h2>🧠 CryptoQuest: Test Your Knowledge!</h2>
        <p class="subtitle">Challenge yourself and learn about the exciting world of cryptocurrencies.</p>
        <div class="game-stats">
            <span class="stat-item">Score: <span id="score">0</span></span>
            <span class="stat-item">High Score: <span id="high-score">0</span></span>
            <span class="stat-item">Question: <span id="question-count">0/0</span></span>
        </div>
    </div>

    <div class="game-container">
        <div id="start-screen" class="game-screen active">
            <h3>Ready to become a Crypto Expert?</h3>
            <p>Answer questions across 12 exciting categories and expand your knowledge!</p>
            <button id="start-game-btn" class="game-btn primary-btn">Start CryptoQuest</button>
        </div>

        <div id="quiz-screen" class="game-screen">
            <div class="category-selection">
                <h4>Choose a Category:</h4>
                <div id="category-grid" class="category-grid">
                    <!-- Categories will be loaded here by JS -->
                </div>
            </div>

            <div class="question-area" style="display: none;">
                <p class="current-category">Category: <span id="current-category-name"></span></p>
                <h3 id="question-text"></h3>
                <!-- Placeholder for question image (optional, not used in this version but ready for future) -->
                <!-- <div id="question-image-container" class="question-image-container" style="display: none;">
                    <img id="question-image" src="" alt="Question image">
                </div> -->
                <div id="options-container" class="options-container">
                    <!-- Options buttons will be loaded here by JS -->
                </div>
                <div id="feedback-message" class="feedback-message"></div>
                <div class="navigation-buttons">
                    <button id="back-to-categories-btn" class="game-btn secondary-btn"><i class="fas fa-arrow-left"></i> Back to Categories</button>
                    <button id="next-question-btn" class="game-btn next-btn" style="display: none;">Next Question <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>
        </div>

        <div id="end-screen" class="game-screen">
            <h3>Quest Completed!</h3>
            <p id="final-score-text">Your Final Score: <span id="final-score">0</span></p>
            <p id="high-score-achieved" style="display: none;">🎉 New High Score!</p>
            <button id="restart-game-btn" class="game-btn primary-btn">Play Again</button>
        </div>
    </div>
</section>

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Google Fonts - Inter -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
    /* Inherit body styles from tradescript.html for consistent background/font */
    body {
        font-family: 'Inter', sans-serif;
        background: #0e1116; /* Black background from tradescript.html */
        color: #e2e8f0;
        line-height: 1.6;
        padding: 20px;
    }

    /* CryptoQuest Specific Styles */
    .crypto-quest-section {
        background: #1e222d; /* Darker gray background */
        border-radius: 16px;
        padding: 25px;
        margin: 40px auto; /* More margin to separate from news */
        border: 1px solid #334155;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        max-width: 1200px;
        text-align: center;
    }

    .game-header h2 {
        font-size: 2.2rem;
        margin-bottom: 10px;
        color: #e2e8f0;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }

    .crypto-quest-section .subtitle {
        color: #94a3b8;
        font-size: 1.2rem;
        max-width: 700px;
        margin: 0 auto 25px auto; /* More separation */
    }

    .game-stats {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-bottom: 30px;
        color: #cbd5e1;
        font-size: 1.1rem;
        font-weight: 600;
    }

    .stat-item {
        background: #2c313a; /* Dark gray for stats */
        padding: 8px 15px;
        border-radius: 8px;
        border: 1px solid #334155;
    }

    .game-screen {
        display: none;
        padding: 20px;
    }

    .game-screen.active {
        display: block;
    }

    #start-screen h3, #end-screen h3 {
        font-size: 2rem;
        color: #e2e8f0;
        margin-bottom: 15px;
    }

    #start-screen p {
        font-size: 1.1rem;
        color: #94a3b8;
        margin-bottom: 30px;
    }

    .game-btn {
        background-color: #3a8dd8; /* Blue from tradescript.html */
        color: #fff;
        border: none;
        padding: 12px 25px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1.1rem;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        display: inline-flex; /* For icons */
        align-items: center;
        justify-content: center;
        gap: 8px;
    }

    .game-btn:hover {
        background-color: #337ac4; /* Darker blue */
        transform: translateY(-2px);
        box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
    }

    .primary-btn {
        /* Already defined above */
    }

    .next-btn {
        background-color: #10b981; /* Green color */
        /* margin-top: 20px; Moved to navigation-buttons flex container */
    }
    .next-btn:hover {
        background-color: #059669; /* Darker green */
    }

    .secondary-btn { /* Style for the new "Back" button */
        background-color: #64748b; /* Grey color from search button */
        color: #fff;
    }
    .secondary-btn:hover {
        background-color: #475569; /* Darker grey */
    }

    .category-selection {
        margin-bottom: 30px;
    }

    .category-selection h4 {
        font-size: 1.5rem;
        color: #e2e8f0;
        margin-bottom: 20px;
    }

    .category-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); /* Adjusted minmax for more categories in a row */
        gap: 20px; /* Gap between category cards */
        max-width: 1000px; /* Increased max width for category grid */
        margin: 0 auto;
    }

    .category-card {
        background: #2c313a; /* Dark gray for category cards */
        border-radius: 10px;
        padding: 15px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 1.05rem;
        font-weight: 600;
        color: #cbd5e1;
        border: 1px solid #334155;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 120px; /* Increased min-height for image */
    }

    .category-card:hover {
        background: #334155;
        transform: translateY(-3px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        border-color: #3a8dd8;
    }

    .category-card img {
        width: 60px; /* Size for category icon */
        height: 60px;
        margin-bottom: 10px;
        border-radius: 8px; /* Slightly rounded images */
    }

    .question-area {
        background: #2c313a; /* Dark gray for question area */
        padding: 25px;
        border-radius: 10px;
        border: 1px solid #334155;
        max-width: 800px;
        margin: 0 auto;
        text-align: left; /* Align text within question area */
    }

    .current-category {
        font-size: 1rem;
        color: #94a3b8;
        margin-bottom: 15px;
        /* text-align: left; Already applied by parent */
    }

    #question-text {
        font-size: 1.6rem;
        color: #e2e8f0;
        margin-bottom: 25px;
        line-height: 1.4;
    }
    
    .question-image-container { /* Style for question image container if implemented */
        margin-bottom: 20px;
        text-align: center;
    }
    .question-image-container img {
        max-width: 100%;
        height: auto;
        border-radius: 8px;
    }

    .options-container {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .option-btn {
        background: #334155; /* Slightly lighter gray for options */
        color: #cbd5e1;
        border: 1px solid #475569;
        padding: 15px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1.1rem;
        text-align: left;
        transition: all 0.2s;
    }

    .option-btn:hover:not(.disabled) {
        background: #475569;
        transform: translateX(5px);
    }

    .option-btn.correct {
        background-color: #00ff9f; /* Green for correct */
        color: #1e222d; /* Dark text for contrast */
        border-color: #00e68e;
    }

    .option-btn.incorrect {
        background-color: #ff4d4d; /* Red for incorrect */
        color: #1e222d;
        border-color: #e64444;
    }

    .option-btn.disabled {
        cursor: not-allowed;
        opacity: 0.7;
    }

    .feedback-message {
        margin-top: 15px;
        font-size: 1.1rem;
        color: #cbd5e1;
        min-height: 30px; /* To prevent layout shift */
        /* text-align: left; Already applied by parent */
    }
    .feedback-message.correct {
        color: #00ff9f;
    }
    .feedback-message.incorrect {
        color: #ff4d4d;
    }

    .navigation-buttons {
        display: flex;
        justify-content: space-between; /* Space out the buttons */
        margin-top: 25px;
        gap: 15px; /* Gap between buttons */
    }
    .navigation-buttons button {
        flex-grow: 1; /* Allow buttons to grow and fill space */
        max-width: 250px; /* Limit max width */
    }


    #end-screen p {
        font-size: 1.2rem;
        color: #cbd5e1;
        margin-bottom: 15px;
    }

    #final-score {
        font-size: 2.5rem;
        font-weight: 700;
        color: #00ff9f;
    }

    #high-score-achieved {
        color: #f7e018; /* Yellow for new high score */
        font-size: 1.5rem;
        font-weight: 700;
        margin-top: 10px;
    }

    /* Media Queries for Responsiveness */
    @media (max-width: 768px) {
        .crypto-quest-section {
            padding: 15px;
            margin: 20px auto;
        }
        .game-header h2 {
            font-size: 1.8rem;
        }
        .crypto-quest-section .subtitle {
            font-size: 1rem;
        }
        .game-stats {
            flex-direction: column;
            gap: 10px;
            font-size: 1rem;
        }
        #start-screen h3, #end-screen h3 {
            font-size: 1.8rem;
        }
        .game-btn {
            padding: 10px 20px;
            font-size: 1rem;
        }
        .category-grid {
            grid-template-columns: 1fr;
        }
        .question-area {
            padding: 15px;
        }
        #question-text {
            font-size: 1.4rem;
        }
        .option-btn {
            padding: 12px;
            font-size: 1rem;
        }
        #final-score {
            font-size: 2rem;
        }
        #high-score-achieved {
            font-size: 1.2rem;
        }
        .navigation-buttons {
            flex-direction: column;
            gap: 10px;
        }
        .navigation-buttons button {
            max-width: 100%; /* Full width on small screens */
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DOM Elements ---
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const endScreen = document.getElementById('end-screen');
        const startGameBtn = document.getElementById('start-game-btn');
        const restartGameBtn = document.getElementById('restart-game-btn');
        const scoreDisplay = document.getElementById('score');
        const highScoreDisplay = document.getElementById('high-score');
        const questionCountDisplay = document.getElementById('question-count');
        const questionText = document.getElementById('question-text');
        // const questionImageContainer = document.getElementById('question-image-container'); // If using question images
        // const questionImage = document.getElementById('question-image'); // If using question images
        const optionsContainer = document.getElementById('options-container');
        const feedbackMessage = document.getElementById('feedback-message');
        const nextQuestionBtn = document.getElementById('next-question-btn');
        const backToCategoriesBtn = document.getElementById('back-to-categories-btn'); // New Back button
        const finalScoreDisplay = document.getElementById('final-score');
        const highScoreAchievedMessage = document.getElementById('high-score-achieved');
        const categoryGrid = document.getElementById('category-grid');
        const currentCategoryNameDisplay = document.getElementById('current-category-name');
        const questionArea = quizScreen.querySelector('.question-area');

        // --- Game State Variables ---
        let currentQuestions = []; // Questions for the current category
        let currentQuestionIndex = 0;
        let score = 0;
        let highScore = parseInt(localStorage.getItem('cryptoQuestHighScore')) || 0;
        let selectedCategory = null;

        // --- Question Database (Expand to 35 questions per category!) ---
        // Each category should have 11 Basic, 12 Intermediate, 12 Advanced questions.
        // I've provided a good set of examples for each difficulty and placeholders for expansion.
        const categories = {
            "Blockchain Fundamentals": {
                image: "https://placehold.co/100x100/3a8dd8/ffffff?text=BC",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What is a blockchain?", options: ["A centralized database", "A decentralized, distributed ledger", "A type of cryptocurrency wallet", "A mining algorithm"], a: "A decentralized, distributed ledger", exp: "A blockchain is a distributed database that maintains a continuously growing list of ordered records, called blocks.", difficulty: "basic" },
                    { q: "What does 'hashing' in blockchain create?", options: ["An encrypted message", "A unique fixed-size output from input data", "A new block of transactions", "A digital signature"], a: "A unique fixed-size output from input data", exp: "Hashing transforms any input data into a fixed-size string of characters, crucial for block integrity.", difficulty: "basic" },
                    { q: "What consensus mechanism does Bitcoin use?", options: ["Proof of Stake (PoS)", "Delegated Proof of Stake (DPoS)", "Proof of Work (PoW)", "Proof of Authority (PoA)"], a: "Proof of Work (PoW)", exp: "Proof of Work requires participants (miners) to expend computational effort to solve a puzzle, securing the network.", difficulty: "basic" },
                    { q: "What does 'decentralization' mean in crypto?", options: ["Control by a central bank", "No single entity controls the network", "Only a few large companies control the network", "Transactions are private"], a: "No single entity controls the network", exp: "Decentralization means control is distributed among many participants, rather than concentrated in one central authority.", difficulty: "basic" },
                    { q: "What is the purpose of a 'genesis block'?", options: ["The last block in a blockchain", "The first block in a blockchain", "A block containing smart contracts", "A block used for staking"], a: "The first block in a blockchain", exp: "The genesis block is the very first block of a blockchain, from which all subsequent blocks are derived.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "Which of these is NOT a characteristic of blockchain technology?", options: ["Immutability", "Transparency", "Centralized control", "Distributed ledger"], a: "Centralized control", exp: "Blockchain is fundamentally decentralized, meaning no single entity has control over the network.", difficulty: "intermediate" },
                    { q: "What is a 'node' in a blockchain network?", options: ["A type of smart contract", "A computer that verifies and stores blockchain data", "A cryptocurrency exchange", "A digital wallet address"], a: "A computer that verifies and stores blockchain data", exp: "Nodes are essential for maintaining the blockchain's integrity and distributing its data across the network.", difficulty: "intermediate" },
                    { q: "What does 'immutable' mean regarding a blockchain ledger?", options: ["It can be easily changed", "It is resistant to alteration or tampering once recorded", "It only stores financial data", "It is only visible to authorized parties"], a: "It is resistant to alteration or tampering once recorded", exp: "Immutability means that once data is recorded on a blockchain, it is extremely difficult to change or remove it.", difficulty: "intermediate" },
                    { q: "How does a distributed ledger enhance security?", options: ["By centralizing data storage", "By spreading copies of the ledger across many participants, making it resistant to single points of failure", "By encrypting all data", "By using a single authority for verification"], a: "By spreading copies of the ledger across many participants, making it resistant to single points of failure", exp: "A distributed ledger means no single point of attack can compromise the entire system, as many copies must be altered.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "Explain the 'Blockchain Trilemma'.", options: ["The challenge of balancing decentralization, security, and scalability", "The three main types of blockchains", "The three biggest challenges in crypto investing", "The three layers of a blockchain protocol"], a: "The challenge of balancing decentralization, security, and scalability", exp: "The Blockchain Trilemma posits that a blockchain can only achieve two of three properties (decentralization, security, scalability) simultaneously without significant trade-offs.", difficulty: "advanced" },
                    { q: "What role does cryptography play in blockchain?", options: ["It makes transactions faster", "It ensures security, privacy (for some chains), and integrity through hashing and digital signatures", "It reduces transaction fees", "It helps miners find blocks easily"], a: "It ensures security, privacy (for some chains), and integrity through hashing and digital signatures", exp: "Cryptography is fundamental to blockchain, providing the secure links between blocks and verifying transaction authenticity.", difficulty: "advanced" },
                    { q: "What is a Merkle Tree (or Hash Tree) used for in blockchain?", options: ["To store user passwords securely", "To efficiently verify large amounts of data in a block by summarizing all transactions into a single root hash", "To predict future cryptocurrency prices", "To manage smart contract execution"], a: "To efficiently verify large amounts of data in a block by summarizing all transactions into a single root hash", exp: "Merkle Trees are binary trees of hashes used to efficiently summarize and verify the integrity of large data sets, like all the transactions in a Bitcoin block.", difficulty: "advanced" },
                    // ... Add 8 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Popular Cryptocurrencies": {
                image: "https://placehold.co/100x100/FF9900/ffffff?text=BTC",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "Who is the pseudonymous creator of Bitcoin?", options: ["Vitalik Buterin", "Hal Finney", "Satoshi Nakamoto", "Changpeng Zhao"], a: "Satoshi Nakamoto", exp: "Satoshi Nakamoto is the name used by the unknown person or group of people who developed Bitcoin.", difficulty: "basic" },
                    { q: "What is Ethereum primarily known for?", options: ["Being the fastest cryptocurrency", "Enabling smart contracts and dApps", "Its use in stablecoins only", "Being purely a digital gold alternative"], a: "Enabling smart contracts and dApps", exp: "Ethereum introduced the concept of smart contracts, allowing for decentralized applications (dApps) to be built on its blockchain.", difficulty: "basic" },
                    { q: "What is a 'halving' event in Bitcoin?", options: ["When Bitcoin price halves", "When mining difficulty halves", "When the reward for mining new blocks halves", "When Bitcoin supply halves"], a: "When the reward for mining new blocks halves", exp: "A Bitcoin halving event cuts the reward for mining new blocks in half, reducing the rate at which new bitcoins are created.", difficulty: "basic" },
                    { q: "What problem do 'gas fees' address on the Ethereum network?", options: ["Exchange listing fees", "Transaction priority and network spam prevention", "Wallet setup costs", "Mining hardware expenses"], a: "Transaction priority and network spam prevention", exp: "Gas fees are a payment made by users to compensate for the computing energy required to process and validate transactions on the Ethereum blockchain, preventing network abuse.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "Which cryptocurrency is often called 'digital silver'?", options: ["Ethereum", "Litecoin", "Ripple (XRP)", "Cardano"], a: "Litecoin", exp: "Litecoin was created as a 'lighter' version of Bitcoin, often referred to as digital silver due to its faster block generation time.", difficulty: "intermediate" },
                    { q: "What is the native cryptocurrency of the Binance Smart Chain (BSC)?", options: ["BNB", "BUSD", "Cake", "ETH"], a: "BNB", exp: "BNB (Binance Coin) is the native cryptocurrency of Binance Chain and Binance Smart Chain, used for transaction fees and staking.", difficulty: "intermediate" },
                    { q: "Which of these is NOT a major altcoin by market capitalization (as of early 2020s)?", options: ["Solana", "Cardano", "Dogecoin", "MyspaceCoin"], a: "MyspaceCoin", exp: "MyspaceCoin is a fictional cryptocurrency. Solana, Cardano, and Dogecoin are well-known altcoins.", difficulty: "intermediate" },
                    { q: "What is the maximum supply of Bitcoin?", options: ["Unlimited", "100 million", "21 million", "1 billion"], a: "21 million", exp: "The total number of Bitcoins that will ever exist is capped at 21 million.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "What is the primary difference in tokenomics between Bitcoin and Ethereum?", options: ["Bitcoin has a fixed supply, Ethereum has a capped but increasing supply with deflationary mechanisms post-Merge", "Bitcoin is inflationary, Ethereum is deflationary", "Bitcoin is backed by gold, Ethereum is not", "Bitcoin has faster transactions"], a: "Bitcoin has a fixed supply, Ethereum has a capped but increasing supply with deflationary mechanisms post-Merge", exp: "Bitcoin's supply is capped at 21 million, making it deflationary by design. Ethereum's supply is dynamic, with recent updates introducing deflationary pressure.", difficulty: "advanced" },
                    { q: "How does Solana achieve its high transaction throughput?", options: ["By using Proof of Work exclusively", "Through a combination of Proof of History (PoH) and Proof of Stake (PoS)", "By processing transactions offline", "By having a very small network of validators"], a: "Through a combination of Proof of History (PoH) and Proof of Stake (PoS)", exp: "Solana's unique Proof of History mechanism, combined with PoS, allows for a high number of transactions per second.", difficulty: "advanced" },
                    { q: "What is 'EIP-1559' and what did it change for Ethereum?", options: ["A new consensus mechanism", "An upgrade that introduced a base fee for transactions that is burned, making ETH potentially deflationary", "A standard for new NFTs", "A regulation for DeFi protocols"], a: "An upgrade that introduced a base fee for transactions that is burned, making ETH potentially deflationary", exp: "EIP-1559, part of the London upgrade, changed Ethereum's fee market, introducing a base fee burned with each transaction, and improving fee predictability.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "DeFi (Decentralized Finance)": {
                image: "https://placehold.co/100x100/8B5CF6/ffffff?text=DeFi",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What is 'Yield Farming' in DeFi?", options: ["Growing crops on a farm using crypto", "Lending crypto assets to earn high returns", "Mining crypto on specialized hardware", "Buying and holding crypto long-term"], a: "Lending crypto assets to earn high returns", exp: "Yield farming involves locking up cryptocurrencies in DeFi protocols to generate high returns or rewards.", difficulty: "basic" },
                    { q: "What is a 'Liquidity Pool'?", options: ["A pool of water for miners", "A collection of funds locked in a smart contract", "A group of traders sharing strategies", "A centralized exchange's order book"], a: "A collection of funds locked in a smart contract", exp: "Liquidity pools facilitate decentralized trading, lending, and other DeFi services by providing assets for users to trade against.", difficulty: "basic" },
                    { q: "What is 'Staking' in Proof of Stake (PoS) networks?", options: ["Gambling crypto on sports events", "Locking up crypto to support network operations and earn rewards", "Selling crypto assets quickly", "Borrowing crypto using other assets as collateral"], a: "Locking up crypto to support network operations and earn rewards", exp: "Staking involves pledging your cryptocurrency to a blockchain network to help secure and validate transactions in exchange for rewards.", difficulty: "basic" },
                    { q: "Which type of exchange is core to DeFi?", options: ["Centralized Exchange (CEX)", "Decentralized Exchange (DEX)", "Traditional Stock Exchange", "Forex Exchange"], a: "Decentralized Exchange (DEX)", exp: "DEXs allow peer-to-peer cryptocurrency transactions to happen directly on the blockchain without intermediaries.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What is 'Impermanent Loss' in liquidity providing?", options: ["A permanent loss of all funds", "A temporary loss of funds due to price divergence after providing liquidity", "Loss of funds due to hacking", "Loss of interest earned from lending"], a: "A temporary loss of funds due to price divergence after providing liquidity", exp: "Impermanent loss occurs when the price of your tokens changes compared to when you deposited them in a liquidity pool.", difficulty: "intermediate" },
                    { q: "What is an 'Automated Market Maker' (AMM)?", options: ["A robot that trades crypto automatically", "A type of decentralized exchange protocol that uses mathematical formulas to price assets", "A centralized system for managing liquidity", "A smart contract for predicting market prices"], a: "A type of decentralized exchange protocol that uses mathematical formulas to price assets", exp: "AMMs are foundational to DEXs like Uniswap, allowing automated trading of digital assets by using liquidity pools instead of order books.", difficulty: "intermediate" },
                    { q: "Which of these is a common use case for DeFi lending protocols?", options: ["Issuing new government bonds", "Taking out a collateralized crypto loan", "Buying stocks on margin", "Facilitating international wire transfers"], a: "Taking out a collateralized crypto loan", exp: "DeFi lending protocols allow users to borrow cryptocurrencies by putting up other crypto as collateral, all without traditional banks.", difficulty: "intermediate" },
                    { q: "What is 'Flash Loans' in DeFi?", options: ["Loans that are approved instantly and never repaid", "Uncollateralized loans that must be borrowed and repaid within the same blockchain transaction", "Loans with very high interest rates", "Loans given to projects for marketing purposes"], a: "Uncollateralized loans that must be borrowed and repaid within the same blockchain transaction", exp: "Flash loans allow users to borrow large sums of money without collateral, provided the loan is repaid within the same transaction block.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "How do 'Wrapped Tokens' (e.g., wBTC) function in DeFi?", options: ["They are new cryptocurrencies with different properties", "They allow assets from one blockchain to be used on another blockchain (e.g., Bitcoin on Ethereum DeFi) by being pegged 1:1", "They are simply copies of existing tokens", "They are used only for privacy transactions"], a: "They allow assets from one blockchain to be used on another blockchain (e.g., Bitcoin on Ethereum DeFi) by being pegged 1:1", exp: "Wrapped tokens enable cross-chain compatibility, letting non-native assets participate in DeFi ecosystems on other blockchains.", difficulty: "advanced" },
                    { q: "What is a 'DAO' (Decentralized Autonomous Organization) in the context of DeFi governance?", options: ["A central bank for DeFi protocols", "An organization run by code and governed by its community of token holders", "A regulatory body for decentralized finance", "A type of crypto exchange"], a: "An organization run by code and governed by its community of token holders", exp: "DAOs enable decentralized governance of DeFi protocols, allowing token holders to vote on key decisions and changes.", difficulty: "advanced" },
                    { q: "What is 'Liquidity Mining'?", options: ["Mining Bitcoin with liquidity pools", "A process where users provide liquidity to a DeFi protocol and earn a protocol's native token as a reward, on top of trading fees", "A new method for crypto trading", "Extracting rare earth elements for crypto hardware"], a: "A process where users provide liquidity to a DeFi protocol and earn a protocol's native token as a reward, on top of trading fees", exp: "Liquidity mining incentivizes users to provide liquidity by distributing governance tokens or other rewards, beyond just transaction fees.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "NFTs (Non-Fungible Tokens)": {
                image: "https://placehold.co/100x100/FF6347/ffffff?text=NFT",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What makes an NFT 'non-fungible'?", options: ["It can be exchanged for any other token", "Each token is unique and cannot be replaced by another identical item", "It is divisible into smaller units", "It loses value over time"], a: "Each token is unique and cannot be replaced by another identical item", exp: "Non-fungible means unique and not interchangeable. Unlike Bitcoin, where any one Bitcoin is identical to another, each NFT has unique properties.", difficulty: "basic" },
                    { q: "Which blockchain is most commonly used for NFTs?", options: ["Bitcoin", "Litecoin", "Ethereum", "Dogecoin"], a: "Ethereum", exp: "Ethereum is the most popular blockchain for NFTs, supporting standards like ERC-721 and ERC-1155 for their creation.", difficulty: "basic" },
                    { q: "What does 'minting' an NFT refer to?", options: ["Selling an NFT on a marketplace", "Buying an NFT with cryptocurrency", "The process of creating an NFT on a blockchain", "Exchanging one NFT for another"], a: "The process of creating an NFT on a blockchain", exp: "Minting is the act of converting a digital file into a crypto collectible or digital asset recorded on a blockchain.", difficulty: "basic" },
                    { q: "Which of these is a popular use case for NFTs?", options: ["Digital currencies for daily transactions", "Voting in political elections", "Representing ownership of digital art and collectibles", "Trading traditional stocks"], a: "Representing ownership of digital art and collectibles", exp: "NFTs are widely used to prove ownership of unique digital items like art, music, and in-game assets.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What is an NFT marketplace?", options: ["A physical store to buy NFTs", "A platform to buy, sell, and trade NFTs", "A type of cryptocurrency exchange", "A social media platform for NFT artists"], a: "A platform to buy, sell, and trade NFTs", exp: "NFT marketplaces like OpenSea or Rarible allow users to list, browse, and exchange NFTs.", difficulty: "intermediate" },
                    { q: "What is 'royalties' for NFT creators?", options: ["A fixed payment received by the creator upon minting", "A percentage of the secondary sales price that the creator receives automatically", "A tax imposed on NFT transactions", "A fee paid by buyers to the marketplace"], a: "A percentage of the secondary sales price that the creator receives automatically", exp: "NFT smart contracts can be programmed to automatically pay a royalty percentage to the original creator on every subsequent sale of the NFT.", difficulty: "intermediate" },
                    { q: "Which standard is commonly used for NFTs on Ethereum?", options: ["ERC-20", "ERC-777", "ERC-721", "ERC-223"], a: "ERC-721", exp: "ERC-721 is a free, open standard that describes how to build non-fungible tokens on the Ethereum blockchain.", difficulty: "intermediate" },
                    { q: "What are 'Generative NFTs'?", options: ["NFTs that are created manually by artists", "NFTs created using algorithms that combine different traits to produce unique outputs", "NFTs that generate cryptocurrency passively", "NFTs that can be physically reproduced"], a: "NFTs created using algorithms that combine different traits to produce unique outputs", exp: "Generative NFTs use code to create unique combinations of pre-designed artistic elements, resulting in a distinct piece.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "Explain 'Intellectual Property Rights' in relation to NFTs.", options: ["Owning an NFT automatically grants full copyright to the underlying asset", "NFT ownership typically grants ownership of the token on the blockchain, but often not the full intellectual property rights to the underlying creative work unless explicitly stated", "NFTs transfer all IP rights to the marketplace", "IP rights are irrelevant for NFTs"], a: "NFT ownership typically grants ownership of the token on the blockchain, but often not the full intellectual property rights to the underlying creative work unless explicitly stated", exp: "NFTs primarily represent ownership of a unique digital item on the blockchain. The intellectual property rights to the content itself are separate and depend on licensing terms set by the creator.", difficulty: "advanced" },
                    { q: "What is a 'fractionalized NFT'?", options: ["An NFT that has lost most of its value", "An NFT that has been divided into smaller, fungible pieces, allowing multiple people to own a share", "An NFT that represents a fraction of a larger artwork", "A type of NFT used in DeFi lending"], a: "An NFT that has been divided into smaller, fungible pieces, allowing multiple people to own a share", exp: "Fractionalizing an NFT increases its liquidity and accessibility by allowing multiple investors to own a portion of a high-value NFT.", difficulty: "advanced" },
                    { q: "What is the ERC-1155 standard known for?", options: ["Creating only fungible tokens", "Creating only non-fungible tokens", "Combining fungible and non-fungible tokens in a single contract, allowing for batch transfers", "Being a standard for privacy tokens"], a: "Combining fungible and non-fungible tokens in a single contract, allowing for batch transfers", exp: "ERC-1155 is a multi-token standard that can represent multiple types of tokens (like ERC-20 and ERC-721) within a single smart contract, improving efficiency.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Security & Wallets": {
                image: "https://placehold.co/100x100/DC2626/ffffff?text=SEC",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What is a 'seed phrase' (or recovery phrase)?", options: ["Your wallet's password", "A list of cryptocurrencies you own", "A series of words that can restore your crypto wallet", "A type of blockchain transaction"], a: "A series of words that can restore your crypto wallet", exp: "Your seed phrase is the master key to your cryptocurrency, allowing you to access and restore your funds on any compatible wallet.", difficulty: "basic" },
                    { q: "What is 'phishing' in the crypto context?", options: ["A method of earning crypto rewards", "Scamming attempts to trick users into revealing private keys or login info", "A type of crypto exchange", "A security update for your wallet"], a: "Scamming attempts to trick users into revealing private keys or login info", exp: "Phishing involves deceptive tactics, often through fake websites or emails, to steal sensitive information from crypto users.", difficulty: "basic" },
                    { q: "Which type of wallet is generally considered the most secure for long-term storage?", options: ["Web wallet", "Mobile wallet", "Exchange wallet", "Hardware wallet"], a: "Hardware wallet", exp: "Hardware wallets store your private keys offline, making them highly resistant to online hacking attempts.", difficulty: "basic" },
                    { q: "What is a 'private key'?", options: ["Your public wallet address", "A secret alphanumeric code that allows access to your crypto", "A username for your exchange account", "A security question for password recovery"], a: "A secret alphanumeric code that allows access to your crypto", exp: "The private key is a critical piece of information used to authorize transactions and prove ownership of your cryptocurrency.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What is '2FA' (Two-Factor Authentication)?", options: ["A single password for all accounts", "A security method requiring two forms of verification", "A type of digital signature", "A blockchain consensus algorithm"], a: "A security method requiring two forms of verification", exp: "2FA adds an extra layer of security by requiring a second verification method (like a code from your phone) beyond your password.", difficulty: "intermediate" },
                    { q: "What is the primary risk of storing crypto on a centralized exchange?", options: ["High transaction fees", "Slow transaction speeds", "You don't own your private keys, making funds vulnerable to exchange hacks", "Lack of investment options"], a: "You don't own your private keys, making funds vulnerable to exchange hacks", exp: "On centralized exchanges, you typically do not have direct control over your private keys, meaning your funds are custodial and subject to the exchange's security.", difficulty: "intermediate" },
                    { q: "What is a 'cold wallet'?", options: ["A wallet kept in a refrigerator", "An online wallet that is rarely used", "A crypto wallet that is not connected to the internet", "A wallet designed for frozen assets"], a: "A crypto wallet that is not connected to the internet", exp: "Cold wallets (like hardware wallets or paper wallets) store cryptocurrency offline, providing superior security against online threats.", difficulty: "intermediate" },
                    { q: "What is the main danger if someone obtains your seed phrase?", options: ["They can only view your balance", "They can access and control all funds associated with that seed phrase", "They can only send you more crypto", "It only affects your wallet's design"], a: "They can access and control all funds associated with that seed phrase", exp: "A seed phrase is the ultimate backup for your wallet; anyone with it can access your funds.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "What is a 'multisig' wallet?", options: ["A wallet that holds multiple cryptocurrencies", "A wallet that requires multiple signatures (private keys) to authorize a transaction", "A wallet used for multiple users", "A wallet that generates multiple addresses"], a: "A wallet that requires multiple signatures (private keys) to authorize a transaction", exp: "Multisignature wallets require two or more private keys to sign and execute a transaction, enhancing security, especially for shared funds.", difficulty: "advanced" },
                    { q: "Explain the concept of 'Social Engineering' in crypto security.", options: ["Using algorithms to identify social trends", "Manipulating individuals into performing actions or divulging confidential information, often targeting human psychology rather than technical vulnerabilities", "Building social media applications on blockchain", "Creating decentralized communities for security audits"], a: "Manipulating individuals into performing actions or divulging confidential information, often targeting human psychology rather than technical vulnerabilities", exp: "Social engineering relies on deception to gain access to sensitive data or systems, common in crypto scams like phishing.", difficulty: "advanced" },
                    { q: "What is the purpose of a 'smart contract audit'?", options: ["To review a smart contract for aesthetic design", "To verify its code for vulnerabilities, bugs, and compliance with specifications before deployment", "To measure its financial performance", "To translate it into different programming languages"], a: "To verify its code for vulnerabilities, bugs, and compliance with specifications before deployment", exp: "Audits are critical for smart contracts to identify and fix security flaws before they can be exploited, protecting user funds.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Mining & Consensus": {
                image: "https://placehold.co/100x100/1E90FF/ffffff?text=MIN",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What is 'mining' in cryptocurrencies like Bitcoin?", options: ["Buying crypto on an exchange", "Solving complex mathematical puzzles to validate transactions and add new blocks", "Staking crypto for rewards", "Creating new cryptocurrencies from scratch"], a: "Solving complex mathematical puzzles to validate transactions and add new blocks", exp: "Mining is the process by which transactions are verified and added to the blockchain ledger, usually involving computational proof of work.", difficulty: "basic" },
                    { q: "What is 'hashrate' in crypto mining?", options: ["The speed of a blockchain transaction", "The total number of cryptocurrencies in circulation", "The computational power per second used by a miner or network", "The volatility of a cryptocurrency's price"], a: "The computational power per second used by a miner or network", exp: "Hashrate measures the total computational power being used to mine and process transactions on a Proof-of-Work blockchain.", difficulty: "basic" },
                    { q: "Which consensus mechanism focuses on validators staking their crypto?", options: ["Proof of Work (PoW)", "Proof of Burn (PoB)", "Proof of Stake (PoS)", "Proof of Capacity (PoC)"], a: "Proof of Stake (PoS)", exp: "In Proof of Stake, validators are chosen to create new blocks based on the amount of cryptocurrency they are 'staking' as collateral.", difficulty: "basic" },
                    { q: "What happens to the mining difficulty of Bitcoin as more miners join the network?", options: ["It decreases", "It remains the same", "It increases", "It becomes irrelevant"], a: "It increases", exp: "Bitcoin's difficulty adjusts periodically to ensure that, on average, a new block is mined every 10 minutes, regardless of the total hashrate.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What is an 'ASIC miner'?", options: ["A type of GPU for gaming", "A specialized computer designed for mining a specific cryptocurrency", "Software used for staking", "A decentralized exchange platform"], a: "A specialized computer designed for mining a specific cryptocurrency", exp: "ASICs (Application-Specific Integrated Circuits) are highly efficient hardware devices built solely for cryptocurrency mining.", difficulty: "intermediate" },
                    { q: "What is a 'mining pool'?", options: ["A group of crypto enthusiasts who share mining tips", "A collective of miners who combine their computational resources to increase their chances of mining a block", "A fund used to invest in mining equipment", "A blockchain where mining is not required"], a: "A collective of miners who combine their computational resources to increase their chances of mining a block", exp: "Mining pools allow individual miners to combine their hashrate and share block rewards proportionally to their contribution.", difficulty: "intermediate" },
                    { q: "Which of these typically consumes more energy?", options: ["Proof of Stake mining", "Proof of Work mining", "Running a cryptocurrency wallet", "Browsing a crypto news website"], a: "Proof of Work mining", exp: "Proof of Work systems, like Bitcoin's, require significant computational power (and thus energy) to solve cryptographic puzzles.", difficulty: "intermediate" },
                    { q: "What is 'block reward'?", options: ["A bonus for finding a block quickly", "The cryptocurrency amount a miner receives for successfully mining a block", "A penalty for incorrect mining", "The total transaction fees in a block"], a: "The cryptocurrency amount a miner receives for successfully mining a block", exp: "The block reward is a combination of newly minted coins and transaction fees awarded to the miner who successfully validates a new block.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "What is a '51% attack'?", options: ["An attack on a centralized exchange", "A theoretical attack where a single entity or group controls more than 50% of a blockchain's mining hashrate or staking power, enabling them to manipulate transactions", "An attack that encrypts 51% of network data", "A type of DDoS attack on crypto websites"], a: "A theoretical attack where a single entity or group controls more than 50% of a blockchain's mining hashrate or staking power, enabling them to manipulate transactions", exp: "A 51% attack can allow the attacker to prevent new transactions from gaining confirmations, halt payments between users, and even reverse transactions.", difficulty: "advanced" },
                    { q: "Explain 'Finality' in blockchain consensus.", options: ["The final price of a cryptocurrency", "The point at which transactions on a blockchain cannot be reversed, altered, or canceled", "The last block in a chain", "The end of a mining cycle"], a: "The point at which transactions on a blockchain cannot be reversed, altered, or canceled", exp: "Different consensus mechanisms offer different levels of finality; some provide instant finality, while others have probabilistic finality.", difficulty: "advanced" },
                    { q: "What is 'Nakamoto Consensus'?", options: ["The process of voting in DAOs", "The consensus mechanism used by Bitcoin, combining Proof of Work, the longest chain rule, and decentralized verification", "A proposal for a new stablecoin", "A method for securely storing private keys"], a: "The consensus mechanism used by Bitcoin, combining Proof of Work, the longest chain rule, and decentralized verification", exp: "Nakamoto Consensus refers to the set of rules and mechanisms that allow Bitcoin's decentralized network to agree on the state of the blockchain.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Web3 & Metaverse": {
                image: "https://placehold.co/100x100/A020F0/ffffff?text=W3",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What is 'Web3'?", options: ["The third version of the World Wide Web, powered by centralized servers", "A new iteration of the web featuring decentralization and blockchain technologies", "A new programming language for websites", "A type of mobile internet connection"], a: "A new iteration of the web featuring decentralization and blockchain technologies", exp: "Web3 envisions a decentralized internet built on blockchain, giving users more control over their data and digital identities.", difficulty: "basic" },
                    { q: "In Web3, who typically controls the data?", options: ["Large tech companies", "Government agencies", "The users themselves", "Internet service providers"], a: "The users themselves", exp: "Web3 aims to shift data ownership and control from corporations back to individual users through decentralized protocols.", difficulty: "basic" },
                    { q: "What is a 'Metaverse' in the context of Web3?", options: ["A new type of social media app", "A virtual 3D world where users can interact, play, and socialize", "A decentralized financial protocol", "A blockchain for gaming transactions"], a: "A virtual 3D world where users can interact, play, and socialize", difficulty: "basic" },
                    { q: "What role do NFTs play in the Metaverse?", options: ["They are used for sending messages", "They represent ownership of digital assets like land, wearables, and avatars", "They are used for mining cryptocurrencies", "They provide internet access"], a: "They represent ownership of digital assets like land, wearables, and avatars", exp: "NFTs enable true digital ownership in the metaverse, allowing users to buy, sell, and own unique virtual items.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What is a 'DAO' (Decentralized Autonomous Organization)?", options: ["A type of central bank", "A traditional company run by a CEO", "An organization run by code and governed by its community", "A financial advisory firm"], a: "An organization run by code and governed by its community", exp: "DAOs are blockchain-based organizations governed by smart contracts and their token holders, rather than a central authority.", difficulty: "intermediate" },
                    { q: "Which of these technologies is foundational to Web3?", options: ["Centralized cloud computing", "Relational databases", "Blockchain", "Traditional HTTP protocols"], a: "Blockchain", exp: "Blockchain technology provides the decentralized, transparent, and immutable ledger infrastructure that Web3 relies on.", difficulty: "intermediate" },
                    { q: "What is the concept of 'digital identity' in Web3?", options: ["Your social media profile", "An identity managed by a central authority like a government", "A self-sovereign identity controlled by the user, often linked to a wallet", "Your email address"], a: "A self-sovereign identity controlled by the user, often linked to a wallet", exp: "Web3 aims for self-sovereign identity, where users have direct control over their digital credentials and data, often through their crypto wallets.", difficulty: "intermediate" },
                    { q: "What is 'Interoperability' within Web3?", options: ["The ability of one dApp to connect to another dApp", "The seamless communication and exchange of data and assets between different blockchains and decentralized applications", "The compatibility of Web3 apps with Web2 apps", "The ease of developing Web3 applications"], a: "The seamless communication and exchange of data and assets between different blockchains and decentralized applications", exp: "Interoperability is crucial for a connected Web3 where assets and data can flow freely across various chains and platforms.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "How do 'Zero-Knowledge Proofs' (ZKPs) enhance privacy and scalability in Web3?", options: ["By making all transactions public", "By allowing one party to prove the truth of a statement to another without revealing any additional information", "By centralizing data storage", "By speeding up internet connections"], a: "By allowing one party to prove the truth of a statement to another without revealing any additional information", exp: "ZKPs are a cryptographic technique that enables secure and private verification of information without revealing the underlying data, crucial for privacy and scaling solutions like ZK-Rollups.", difficulty: "advanced" },
                    { q: "What is 'Soulbound Tokens' (SBTs) in Web3?", options: ["Tokens that can be freely traded and transferred", "Non-transferable NFTs that represent a person's identity, credentials, or achievements in the digital world", "Tokens used for gaming", "Tokens that grant voting rights"], a: "Non-transferable NFTs that represent a person's identity, credentials, or achievements in the digital world", exp: "SBTs are proposed as a way to build a reputation system in Web3, representing verifiable credentials like educational degrees or work history, which are permanently tied to a 'soul' (wallet).", difficulty: "advanced" },
                    { q: "What are 'Decentralized Identifiers' (DIDs) in Web3?", options: ["Usernames for social media platforms", "Globally unique, cryptographically verifiable identifiers that enable self-sovereign digital identity without central authorities", "Physical identification documents for crypto users", "IP addresses of blockchain nodes"], a: "Globally unique, cryptographically verifiable identifiers that enable self-sovereign digital identity without central authorities", exp: "DIDs are a core component of decentralized identity, allowing individuals and organizations to control their own digital identity on the blockchain.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Crypto Terminology": {
                image: "https://placehold.co/100x100/007bff/ffffff?text=ABC",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What does 'HODL' mean in crypto?", options: ["Sell your crypto quickly", "Hold on for Dear Life (keep your crypto)", "Buy low, sell high", "Lend your crypto for interest"], a: "Hold on for Dear Life (keep your crypto)", exp: "HODL originated from a misspelling of 'hold' and means to hold onto your cryptocurrencies regardless of price fluctuations.", difficulty: "basic" },
                    { q: "What is 'FUD'?", options: ["Fear, Uncertainty, and Doubt", "Fast Unlisted Derivatives", "Future Utility Development", "Financial Understanding Data"], a: "Fear, Uncertainty, and Doubt", exp: "FUD refers to the spread of misinformation to create negative sentiment about a cryptocurrency or the market.", difficulty: "basic" },
                    { q: "What does 'FOMO' stand for?", options: ["Future Of Money Operations", "Fear Of Missing Out", "Fast-Moving Opportunities", "Funds On My Orderbook"], a: "Fear Of Missing Out", exp: "FOMO describes the anxiety or fear of missing out on a potentially profitable investment or trend in the crypto market.", difficulty: "basic" },
                    { q: "What is a 'bear market'?", options: ["A market where prices are rising", "A market where prices are falling or expected to fall", "A market with low trading volume", "A market driven by fear"], a: "A market where prices are falling or expected to fall", exp: "A bear market is characterized by declining prices and widespread pessimism among investors.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "Who are 'whales' in the crypto market?", options: ["New investors", "Small-scale traders", "Individuals or entities holding very large amounts of cryptocurrency", "Regulators of the crypto market"], a: "Individuals or entities holding very large amounts of cryptocurrency", exp: "Whales are large holders whose buy or sell orders can significantly impact market prices due to their sheer volume.", difficulty: "intermediate" },
                    { q: "What is a 'bull market'?", options: ["A market where prices are falling", "A market where prices are rising or expected to rise", "A market with high volatility", "A market driven by greed"], a: "A market where prices are rising or expected to rise", exp: "A bull market is a period when asset prices are rising, leading to optimism and confidence among investors.", difficulty: "intermediate" },
                    { q: "What is 'DYOR' an acronym for?", options: ["Do Your Own Research", "Don't Yield On Returns", "Develop Your Own Robot", "Digital Yield Optimization Report"], a: "Do Your Own Research", exp: "DYOR is a common crypto adage encouraging investors to investigate projects thoroughly before investing, rather than relying on others' advice.", difficulty: "intermediate" },
                    { q: "What does 'ATH' stand for?", options: ["All-Time High", "Average Trading Hour", "Automatic Token Hashing", "Altcoin Trade History"], a: "All-Time High", exp: "ATH refers to the highest price a cryptocurrency has ever reached.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "What does 'Bagholder' refer to?", options: ["Someone who holds a large portfolio of profitable cryptocurrencies", "An investor who holds a cryptocurrency that has lost significant value, often to zero, and is unlikely to recover", "A person who creates new memecoins", "Someone who uses a hardware wallet"], a: "An investor who holds a cryptocurrency that has lost significant value, often to zero, and is unlikely to recover", exp: "A bagholder is stuck with an asset that has become worthless or nearly worthless, unwilling to sell and realize the loss.", difficulty: "advanced" },
                    { q: "What is a 'Vaporware' crypto project?", options: ["A project with fully developed software", "A project that is announced but never delivered or fails to fulfill its promises", "A project focused on virtual reality", "A crypto project related to cloud storage"], a: "A project that is announced but never delivered or fails to fulfill its promises", exp: "Vaporware refers to a project that exists more in hype than in actual development or functionality.", difficulty: "advanced" },
                    { q: "What is the 'Market Cap' (Market Capitalization) of a cryptocurrency?", options: ["The total amount of money invested in a crypto project", "The total value of all circulating coins of a cryptocurrency, calculated by multiplying the current price by the circulating supply", "The maximum number of coins that will ever exist", "The daily trading volume of a cryptocurrency"], a: "The total value of all circulating coins of a cryptocurrency, calculated by multiplying the current price by the circulating supply", exp: "Market cap is a common metric used to rank the relative size of cryptocurrencies.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Crypto Investing & Trading": {
                image: "https://placehold.co/100x100/FFD700/000000?text=TRADE",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What does 'DCA' stand for in crypto investing?", options: ["Decentralized Crypto Accounts", "Digital Currency Allocation", "Dollar-Cost Averaging", "Daily Crypto Analysis"], a: "Dollar-Cost Averaging", exp: "DCA is an investment strategy where an investor divides the total amount to be invested across periodic purchases of a target asset to reduce the impact of volatility.", difficulty: "basic" },
                    { q: "What is a 'pump and dump' scheme?", options: ["A legitimate investment strategy", "A fraudulent scheme where prices are artificially inflated before being sold off", "A method of liquidating assets quickly", "A regulated trading practice"], a: "A fraudulent scheme where prices are artificially inflated before being sold off", exp: "Pump and dump is a form of market manipulation where a scammer artificially inflates the price of a crypto asset and then sells their own holdings for a profit.", difficulty: "basic" },
                    { q: "What is 'liquidity' in a crypto market?", options: ["How easily an asset can be converted to cash without affecting its market price", "The total supply of a cryptocurrency", "The number of active users on an exchange", "The amount of profit generated by a trade"], a: "How easily an asset can be converted to cash without affecting its market price", exp: "High liquidity means there are many buyers and sellers, allowing assets to be traded quickly without significant price changes.", difficulty: "basic" },
                    { q: "What is a 'stop-loss' order?", options: ["An order to automatically buy more crypto if the price falls", "An order to sell a crypto asset if it reaches a certain price to limit potential losses", "An order to stop all trading activity", "An order that guarantees a profit"], a: "An order to sell a crypto asset if it reaches a certain price to limit potential losses", exp: "A stop-loss order is a risk management tool that automatically sells your asset if its price drops to a predetermined level.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What is a 'limit order' on an exchange?", options: ["An order to buy/sell immediately at the current market price", "An order to buy/sell at a specified price or better", "An order that executes only partially", "An order placed directly on the blockchain"], a: "An order to buy/sell at a specified price or better", exp: "A limit order allows you to set a maximum price you're willing to pay or a minimum price you're willing to accept when buying or selling crypto.", difficulty: "intermediate" },
                    { q: "What does 'slippage' refer to in crypto trading?", options: ["When a trader makes a mistake in their order", "The difference between the expected price of a trade and the price at which the trade is actually executed", "A security vulnerability on an exchange", "A sudden drop in market price"], a: "The difference between the expected price of a trade and the price at which the trade is actually executed", exp: "Slippage often occurs during periods of high volatility or when executing large orders, as the order book may not have enough liquidity at the desired price.", difficulty: "intermediate" },
                    { q: "What is a 'Market Order'?", options: ["An order to buy or sell at a specific future price", "An order to buy or sell immediately at the best available current market price", "An order that requires a deposit first", "An order that remains open indefinitely"], a: "An order to buy or sell immediately at the best available current market price", exp: "A market order is a request to buy or sell a cryptocurrency immediately at its current best available price on the exchange.", difficulty: "intermediate" },
                    { q: "What is the significance of 'volume' in trading?", options: ["It indicates the age of a cryptocurrency", "It represents the total number of cryptocurrencies in circulation", "It shows the amount of a crypto asset that has been traded over a period, indicating market interest and strength of price movements", "It determines the price volatility of an asset"], a: "It shows the amount of a crypto asset that has been traded over a period, indicating market interest and strength of price movements", exp: "High trading volume often confirms price trends; strong movements on low volume are less reliable.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "What is 'Futures Trading' in crypto?", options: ["Buying crypto for immediate delivery", "A contract to buy or sell a cryptocurrency at a predetermined price at a specified time in the future", "Trading crypto based on historical price data only", "A type of peer-to-peer exchange"], a: "A contract to buy or sell a cryptocurrency at a predetermined price at a specified time in the future", exp: "Futures trading allows traders to speculate on the future price of a cryptocurrency without owning the underlying asset, often involving leverage.", difficulty: "advanced" },
                    { q: "Explain 'Arbitrage' in crypto trading.", options: ["Buying and selling the same cryptocurrency on different exchanges simultaneously to profit from price discrepancies", "Buying a cryptocurrency and holding it long-term", "Trading based on news events", "Lending crypto to earn interest"], a: "Buying and selling the same cryptocurrency on different exchanges simultaneously to profit from price discrepancies", exp: "Arbitrage capitalizes on temporary price differences for the same asset across different exchanges or markets.", difficulty: "advanced" },
                    { q: "What is 'Leverage' in crypto trading?", options: ["A trading strategy that minimizes risk", "Using borrowed funds to increase potential returns from a trade, amplifying both profits and losses", "A method for securely storing large amounts of crypto", "A type of decentralized lending protocol"], a: "Using borrowed funds to increase potential returns from a trade, amplifying both profits and losses", exp: "Leverage allows traders to open larger positions with a smaller amount of capital, but it also magnifies the risk.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Regulations & Future": {
                image: "https://placehold.co/100x100/6A5ACD/ffffff?text=REG",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "Which country was the first to adopt Bitcoin as legal tender?", options: ["USA", "China", "El Salvador", "Japan"], a: "El Salvador", exp: "El Salvador made Bitcoin legal tender in September 2021, becoming the first country to do so.", difficulty: "basic" },
                    { q: "What is a 'CBDC'?", options: ["Central Bank Digital Currency", "Crypto-Backed Decentralized Coin", "Community Blockchain Development Council", "Centralized Bitcoin Derivative Contract"], a: "Central Bank Digital Currency", exp: "CBDCs are digital versions of a country's fiat currency, issued and regulated by its central bank.", difficulty: "basic" },
                    { q: "What is a 'stablecoin' designed to do?", options: ["Fluctuate wildly in price", "Maintain a stable value, typically pegged to a fiat currency or commodity", "Only be used for staking", "Increase in value exponentially"], a: "Maintain a stable value, typically pegged to a fiat currency or commodity", exp: "Stablecoins aim to offer price stability by being pegged to a stable asset like the US dollar, gold, or other cryptocurrencies.", difficulty: "basic" },
                    { q: "What is the primary concern for governments regarding cryptocurrencies?", options: ["Their energy consumption", "Loss of monetary control and potential for illicit activities", "Lack of public interest", "Difficulty in trading them"], a: "Loss of monetary control and potential for illicit activities", exp: "Governments are concerned about cryptocurrencies' potential for money laundering, terrorist financing, and challenging traditional financial control mechanisms.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "Which regulatory body in the US is often involved in cryptocurrency discussions?", options: ["FDA", "SEC (Securities and Exchange Commission)", "NASA", "FBI"], a: "SEC (Securities and Exchange Commission)", exp: "The SEC often debates whether certain cryptocurrencies should be classified as securities, impacting their regulation.", difficulty: "intermediate" },
                    { q: "What is the 'Travel Rule' as it applies to crypto?", options: ["A rule for international crypto transfers", "A regulation requiring financial institutions to share certain customer information for transactions above a threshold", "A rule about crypto exchanges' travel policies", "A guideline for using crypto while traveling"], a: "A regulation requiring financial institutions to share certain customer information for transactions above a threshold", exp: "The FATF's Travel Rule requires Virtual Asset Service Providers (VASPs) to transmit and obtain certain customer information during transactions above a specified amount.", difficulty: "intermediate" },
                    { q: "What does 'AML' stand for in crypto compliance?", options: ["Automated Market Liquidity", "Anti-Money Laundering", "Asset Management Ledger", "Advanced Mining Logic"], a: "Anti-Money Laundering", exp: "AML refers to the laws and regulations designed to prevent criminals from disguising illegally obtained funds as legitimate income.", difficulty: "intermediate" },
                    { q: "What is the general stance of most governments towards cryptocurrencies (as of mid-2020s)?", options: ["Full adoption as legal tender", "Outright ban and criminalization", "Exploring regulation and integration while addressing risks", "Ignoring them completely"], a: "Exploring regulation and integration while addressing risks", exp: "Many governments are working towards comprehensive regulatory frameworks to manage the risks and opportunities of crypto.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "What is the 'Howey Test' and its relevance to crypto?", options: ["A test for blockchain scalability", "A legal test used by the SEC to determine if a transaction qualifies as an 'investment contract' (and thus a security), often applied to crypto tokens", "A test for crypto wallet security", "A benchmark for mining efficiency"], a: "A legal test used by the SEC to determine if a transaction qualifies as an 'investment contract' (and thus a security), often applied to crypto tokens", exp: "If a crypto token meets the criteria of the Howey Test, it may be classified as a security and fall under SEC jurisdiction.", difficulty: "advanced" },
                    { q: "Explain the concept of 'Regulatory Sandbox' in crypto.", options: ["A simulated environment for testing new crypto games", "A framework set up by regulators to allow new crypto businesses to test innovative products/services in a controlled environment with relaxed regulatory requirements", "A place where crypto companies can store sensitive data", "A tool for tracing illicit crypto transactions"], a: "A framework set up by regulators to allow new crypto businesses to test innovative products/services in a controlled environment with relaxed regulatory requirements", exp: "Regulatory sandboxes aim to foster innovation in the crypto space while still monitoring potential risks.", difficulty: "advanced" },
                    { q: "What is 'FATF' and its role in crypto regulation?", options: ["Future of Atomic Trading Federation", "Financial Action Task Force; an intergovernmental organization that develops policies to combat money laundering and terrorist financing, including guidance for crypto assets", "A decentralized finance protocol", "A global crypto exchange"], a: "Financial Action Task Force; an intergovernmental organization that develops policies to combat money laundering and terrorist financing, including guidance for crypto assets", exp: "FATF issues recommendations and guidance that many countries adopt to regulate virtual assets and virtual asset service providers (VASPs).", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "History of Crypto": {
                image: "https://placehold.co/100x100/FF5733/ffffff?text=HIST",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "When was Bitcoin's whitepaper released?", options: ["2005", "2008", "2010", "2012"], a: "2008", exp: "Satoshi Nakamoto published the Bitcoin whitepaper, 'Bitcoin: A Peer-to-Peer Electronic Cash System,' on October 31, 2008.", difficulty: "basic" },
                    { q: "What was the 'pizza transaction' famous for?", options: ["The first time Bitcoin was used to buy a car", "The first real-world transaction using Bitcoin (for two pizzas)", "A major hack involving pizza delivery", "A famous Bitcoin exchange collapse"], a: "The first real-world transaction using Bitcoin (for two pizzas)", exp: "In 2010, Laszlo Hanyecz bought two pizzas for 10,000 Bitcoins, marking the first known real-world transaction using Bitcoin.", difficulty: "basic" },
                    { q: "Who co-founded Ethereum?", options: ["Elon Musk", "Charles Hoskinson", "Vitalik Buterin", "Jed McCaleb"], a: "Vitalik Buterin", exp: "Vitalik Buterin is the primary inventor of Ethereum, conceptualizing it in a 2013 white paper.", difficulty: "basic" },
                    { q: "What event significantly impacted Bitcoin's price in 2017?", options: ["Launch of Facebook Libra", "The ICO (Initial Coin Offering) boom", "Global stock market crash", "Introduction of new mining hardware"], a: "The ICO (Initial Coin Offering) boom", exp: "2017 saw a massive surge in Initial Coin Offerings (ICOs), where new crypto projects raised funds by selling their tokens, largely contributing to the crypto market bull run.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What was the name of the first major cryptocurrency exchange?", options: ["Coinbase", "Binance", "Mt. Gox", "Kraken"], a: "Mt. Gox", exp: "Mt. Gox was a Bitcoin exchange based in Tokyo that handled over 70% of all Bitcoin transactions worldwide at its peak in 2013-2014 before its collapse.", difficulty: "intermediate" },
                    { q: "Which country famously banned crypto mining in 2021?", options: ["USA", "Germany", "China", "Canada"], a: "China", exp: "China implemented a severe crackdown on cryptocurrency mining and trading in 2021, leading to a significant shift in global hashrate distribution.", difficulty: "intermediate" },
                    { q: "What major event happened in 2022 that significantly impacted the crypto market sentiment?", options: ["Bitcoin becoming legal tender in a country", "The collapse of Terra (LUNA) and FTX", "The launch of Ethereum 2.0", "Massive adoption by traditional banks"], a: "The collapse of Terra (LUNA) and FTX", exp: "The collapses of the Terra ecosystem (UST stablecoin and LUNA token) and the FTX exchange in 2022 led to widespread market contagion and loss of investor confidence.", difficulty: "intermediate" },
                    { q: "What was 'Cypherpunks' movement?", options: ["A group of crypto traders", "A movement advocating for privacy and cryptography, foundational to crypto ideas", "A group of early blockchain developers", "A centralized organization controlling internet security"], a: "A movement advocating for privacy and cryptography, foundational to crypto ideas", exp: "The Cypherpunks were an informal group of activists advocating for widespread strong cryptography and privacy-enhancing technologies as a route to social and political change.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "What was 'Bit Gold' and who proposed it?", options: ["The first successful cryptocurrency, by Satoshi Nakamoto", "A theoretical digital currency proposal by Nick Szabo, preceding Bitcoin", "A type of gold-backed stablecoin", "An early Bitcoin mining company"], a: "A theoretical digital currency proposal by Nick Szabo, preceding Bitcoin", exp: "Bit Gold, proposed in 1998 by Nick Szabo, is often cited as a precursor to Bitcoin, outlining many similar principles.", difficulty: "advanced" },
                    { q: "What were 'Hashcash' and 'B-money' and their relevance to Bitcoin?", options: ["Early cryptocurrencies that failed", "Precursors to Bitcoin that introduced concepts like proof-of-work (Hashcash by Adam Back) and digital cash (B-money by Wei Dai)", "Types of mining hardware", "Early forms of stablecoins"], a: "Precursors to Bitcoin that introduced concepts like proof-of-work (Hashcash by Adam Back) and digital cash (B-money by Wei Dai)", exp: "Both Hashcash and B-money explored concepts that Satoshi Nakamoto later integrated into Bitcoin's design.", difficulty: "advanced" },
                    { q: "What was the significance of the DAO hack in Ethereum's history?", options: ["It led to the creation of Ethereum Classic (ETC) and a hard fork of Ethereum", "It caused Ethereum to switch from PoW to PoS", "It was the first time smart contracts were used", "It led to a new regulatory framework for dApps"], a: "It led to the creation of Ethereum Classic (ETC) and a hard fork of Ethereum", exp: "The DAO hack in 2016, where millions of ETH were stolen, led to a controversial hard fork that created two separate Ethereum chains: Ethereum (ETH) and Ethereum Classic (ETC).", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Memecoins & Culture": {
                image: "https://placehold.co/100x100/FF00FF/ffffff?text=MEME",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "Which memecoin was created as a joke in 2013, featuring a Shiba Inu dog?", options: ["Shiba Inu (SHIB)", "Pepe Coin (PEPE)", "Dogecoin (DOGE)", "Floki Inu (FLOKI)"], a: "Dogecoin (DOGE)", exp: "Dogecoin was created in 2013 by Billy Markus and Jackson Palmer as a lighthearted alternative to traditional cryptocurrencies.", difficulty: "basic" },
                    { q: "Which celebrity is often associated with Dogecoin, causing its price to fluctuate?", options: ["Mark Cuban", "Elon Musk", "Kim Kardashian", "Jeff Bezos"], a: "Elon Musk", exp: "Elon Musk's tweets and public statements frequently impact Dogecoin's price due to his significant following and influence.", difficulty: "basic" },
                    { q: "What does 'HODL' mean in memecoin culture (and general crypto)?", options: ["Sell your crypto quickly", "Hold on for Dear Life (keep your crypto)", "Buy low, sell high", "Lend your crypto for interest"], a: "Hold on for Dear Life (keep your crypto)", exp: "HODL originated from a misspelling of 'hold' and means to hold onto your cryptocurrencies regardless of price fluctuations.", difficulty: "basic" },
                    { q: "What does 'Wen Lambo?' imply in crypto culture?", options: ["Asking when a new car model is released", "Expressing anticipation for a significant price increase that would allow luxury purchases", "Questioning the legality of a token", "Asking about the development progress of a project"], a: "Expressing anticipation for a significant price increase that would allow luxury purchases", exp: "It's a meme used by crypto investors to inquire when their holdings will dramatically increase in value, allowing them to buy a Lamborghini.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What is a 'Diamond Hand' in memecoin culture?", options: ["Someone who sells their crypto quickly", "Someone who holds onto their crypto through extreme volatility", "A highly profitable crypto trader", "A person who creates new memecoins"], a: "Someone who holds onto their crypto through extreme volatility", exp: "Diamond Hands refers to investors who refuse to sell their holdings, even during significant price drops, showing strong conviction.", difficulty: "intermediate" },
                    { q: "What is a 'Moonboy'?", options: ["A lunar mining enthusiast", "Someone who believes a cryptocurrency's price will go 'to the moon' (increase dramatically)", "A developer working on space-related blockchain projects", "A new investor who always loses money"], a: "Someone who believes a cryptocurrency's price will go 'to the moon' (increase dramatically)", exp: "A 'Moonboy' is an individual who is overly optimistic about the potential price increase of a cryptocurrency.", difficulty: "intermediate" },
                    { q: "Which memecoin was launched as an 'experiment' by an anonymous developer in 2020?", options: ["Dogecoin", "Pepe Coin", "Shiba Inu", "Bonk"], a: "Shiba Inu", exp: "Shiba Inu (SHIB) was created anonymously in August 2020 by 'Ryoshi' as an experiment in decentralized spontaneous community building.", difficulty: "intermediate" },
                    { q: "What is 'Paper Hands' in crypto slang?", options: ["An investor who makes significant profits", "Someone who sells their crypto quickly at the first sign of volatility or loss", "A person who trades with physical money", "An investor who buys only low-cap coins"], a: "Someone who sells their crypto quickly at the first sign of volatility or loss", exp: "Paper Hands refers to an investor who lacks conviction and sells their assets at a loss or for a small gain when market conditions become challenging.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "What is the phenomenon of 'Dogecoin Killers'?", options: ["Cryptocurrencies designed to compete directly with Dogecoin and potentially surpass its market cap", "Tokens that automatically burn Dogecoin", "New gaming projects featuring dogs", "Cryptocurrencies created to expose Dogecoin scams"], a: "Cryptocurrencies designed to compete directly with Dogecoin and potentially surpass its market cap", exp: "After Dogecoin's success, many new memecoins emerged aiming to achieve similar viral growth and market dominance.", difficulty: "advanced" },
                    { q: "What are 'NFT-backed Memecoins'?", options: ["Memecoins that are actually NFTs", "Memecoins whose value is tied to a collection of NFTs, often integrating aspects of both categories", "Memecoins used to buy NFTs", "Memecoins that act as governance tokens for NFT projects"], a: "Memecoins whose value is tied to a collection of NFTs, often integrating aspects of both categories", exp: "Some newer memecoins attempt to add more utility or backing by associating themselves with NFTs, blending their speculative nature with digital asset ownership.", difficulty: "advanced" },
                    { q: "What is the typical 'utility' of most memecoins?", options: ["Complex smart contract functionality", "Providing decentralized lending services", "Often driven by community, hype, and speculative trading rather than fundamental utility", "Serving as stable store of value"], a: "Often driven by community, hype, and speculative trading rather than fundamental utility", exp: "Unlike utility tokens designed for specific functions, memecoins' value is primarily derived from their community and viral appeal.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Blockchain Applications": {
                image: "https://placehold.co/100x100/4CAF50/ffffff?text=DAPP",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What is a 'dApp' (Decentralized Application)?", options: ["A mobile app for central banks", "An application built on a decentralized blockchain network", "A desktop application for trading crypto", "A traditional web application with crypto features"], a: "An application built on a decentralized blockchain network", exp: "dApps run on a decentralized network (like Ethereum) instead of a centralized server, offering transparency and censorship resistance.", difficulty: "basic" },
                    { q: "What is the primary benefit of blockchain in supply chain management?", options: ["Faster physical delivery of goods", "Enhanced transparency and traceability of products", "Lower manufacturing costs", "Increased marketing efficiency"], a: "Enhanced transparency and traceability of products", exp: "Blockchain provides an immutable record of a product's journey from origin to consumer, increasing trust and accountability.", difficulty: "basic" },
                    { q: "How can blockchain technology aid in voting systems?", options: ["By making votes easier to change", "By ensuring transparency, immutability, and security of votes", "By speeding up physical vote counting", "By allowing anonymous voting only"], a: "By ensuring transparency, immutability and security of votes", exp: "Blockchain could create tamper-proof and verifiable voting records, potentially increasing trust in electoral processes.", difficulty: "basic" },
                    { q: "What is 'tokenization' of assets?", options: ["Creating new cryptocurrencies", "Converting real-world or digital assets into blockchain-based tokens", "Sending crypto to another wallet", "Trading NFTs on an exchange"], a: "Converting real-world or digital assets into blockchain-based tokens", exp: "Tokenization allows fractional ownership and easier transfer of various assets by representing them as digital tokens on a blockchain.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What is the goal of 'blockchain gaming'?", options: ["To make games more expensive", "To integrate NFTs and crypto into gaming for true ownership and new economies", "To replace traditional gaming consoles", "To create games that require no internet connection"], a: "To integrate NFTs and crypto into gaming for true ownership and new economies", exp: "Blockchain games allow players to own in-game assets as NFTs and participate in play-to-earn economies.", difficulty: "intermediate" },
                    { q: "How can blockchain be used in identity management?", options: ["By storing all personal data on a public ledger", "By enabling decentralized, self-sovereign digital identities controlled by the individual", "By replacing government-issued IDs with crypto tokens", "By linking social media accounts to blockchain addresses"], a: "By enabling decentralized, self-sovereign digital identities controlled by the individual", exp: "Blockchain can provide a secure and verifiable way for individuals to manage their own digital identities without relying on central authorities.", difficulty: "intermediate" },
                    { q: "What is 'Interoperability' in blockchain?", options: ["The ability of different blockchains to communicate and exchange data or assets", "The process of securing a blockchain network", "The speed at which transactions are processed", "The cost of sending transactions on a blockchain"], a: "The ability of different blockchains to communicate and exchange data or assets", exp: "Interoperability aims to allow different blockchain networks to work together seamlessly, facilitating cross-chain transfers and interactions.", difficulty: "intermediate" },
                    { q: "What is 'token-gated content'?", options: ["Content that is free to access for everyone", "Content that can only be accessed by holders of a specific NFT or crypto token", "Content that requires a password to view", "Content that is censored by a central authority"], a: "Content that can only be accessed by holders of a specific NFT or crypto token", exp: "Token-gated content leverages blockchain to restrict access to digital content, communities, or experiences only to those who own a particular token or NFT, fostering exclusive communities.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "Explain the concept of 'Decentralized Science' (DeSci).", options: ["A new way to fund scientific research through centralized grants", "An approach to scientific research and funding that leverages blockchain for transparency, collaboration, and open access", "A type of scientific simulation running on a blockchain", "A decentralized database for scientific publications only"], a: "An approach to scientific research and funding that leverages blockchain for transparency, collaboration, and open access", exp: "DeSci aims to address inefficiencies and biases in traditional scientific funding and publishing by using decentralized technologies.", difficulty: "advanced" },
                    { q: "How does blockchain enable 'Digital Rights Management' (DRM) in a new way?", options: ["By creating physical copies of digital works", "By allowing creators to programmatically control the usage, distribution, and royalties of their digital assets through NFTs and smart contracts", "By encrypting all digital files", "By making all digital content free"], a: "By allowing creators to programmatically control the usage, distribution, and royalties of their digital assets through NFTs and smart contracts", exp: "Blockchain-based DRM through NFTs can give creators unprecedented control and revenue streams over their digital creations.", difficulty: "advanced" },
                    { q: "What are 'Decentralized Physical Infrastructure Networks' (DePIN)?", options: ["Centralized data centers for blockchain networks", "Blockchain networks that incentivize the deployment and operation of real-world physical infrastructure, like wireless networks or energy grids", "Protocols for managing physical crypto mining farms", "Decentralized applications for fitness tracking"], a: "Blockchain networks that incentivize the deployment and operation of real-world physical infrastructure, like wireless networks or energy grids", exp: "DePINs aim to build and maintain decentralized physical infrastructure through token incentives, disrupting traditional centralized models.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Altcoins & Ecosystems": {
                image: "https://placehold.co/100x100/8A2BE2/ffffff?text=ALTS",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What is the primary focus of Polkadot (DOT)?", options: ["Centralized exchange operations", "Providing interoperability between different blockchains", "Being a privacy coin", "Only supporting NFTs"], a: "Providing interoperability between different blockchains", exp: "Polkadot aims to enable different blockchains (parachains) to connect and communicate, creating a multi-chain ecosystem.", difficulty: "basic" },
                    { q: "Which project is known for its focus on 'Proof of History' consensus and high transaction throughput?", options: ["Cardano", "Solana", "XRP", "Litecoin"], a: "Solana", exp: "Solana combines Proof of History (PoH) with Proof of Stake (PoS) to achieve incredibly fast transaction speeds and high scalability.", difficulty: "basic" },
                    { q: "What is Cardano (ADA) known for in its development?", options: ["Rapid, unvetted updates", "A scientific and research-driven approach to blockchain development", "Focus solely on payments", "Being the first cryptocurrency"], a: "A scientific and research-driven approach to blockchain development", exp: "Cardano emphasizes a peer-reviewed, academic research-driven methodology for its blockchain and smart contract development.", difficulty: "basic" },
                    { q: "What is the main goal of Layer-2 scaling solutions like Arbitrum or Optimism on Ethereum?", options: ["To replace the Ethereum mainnet", "To increase Ethereum's transaction speed and reduce gas fees", "To make Ethereum more centralized", "To create new stablecoins"], a: "To increase Ethereum's transaction speed and reduce gas fees", exp: "Layer-2 solutions process transactions off the main Ethereum blockchain, bundling them and then submitting them back to the mainnet, improving efficiency.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What is XRP (Ripple) primarily designed for?", options: ["Decentralized gaming", "Fast and low-cost international payments for financial institutions", "Decentralized social media", "NFT marketplaces"], a: "Fast and low-cost international payments for financial institutions", exp: "XRP Ledger and XRP coin are designed to facilitate rapid, cheap, and scalable international money transfers for banks and payment providers.", difficulty: "intermediate" },
                    { q: "Which blockchain uses 'sharding' as a scaling solution?", options: ["Bitcoin", "Ethereum (post-merge roadmap)", "Dogecoin", "Litecoin"], a: "Ethereum (post-merge roadmap)", exp: "Ethereum's long-term scaling strategy involves sharding, which divides the network into smaller, more manageable 'shards' to process transactions in parallel.", difficulty: "intermediate" },
                    { q: "What is the primary feature of a 'privacy coin' like Monero (XMR)?", options: ["Extremely fast transactions", "Low transaction fees", "Enhanced anonymity and untraceability of transactions", "High staking rewards"], a: "Enhanced anonymity and untraceability of transactions", exp: "Privacy coins use various cryptographic techniques to obscure transaction details, including sender, receiver, and amount, offering greater privacy.", difficulty: "intermediate" },
                    { q: "What is a 'fork' in blockchain?", options: ["A new type of cryptocurrency wallet", "A split in a blockchain's history, leading to two separate chains (e.g., hard fork, soft fork)", "A tool used for crypto mining", "A temporary network slowdown"], a: "A split in a blockchain's history, leading to two separate chains (e.g., hard fork, soft fork)", exp: "Forks occur when a blockchain's rules are updated or when there are disagreements about its future direction, leading to a divergence.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "Explain the concept of 'Cross-Chain Bridges'.", options: ["Physical bridges connecting data centers", "Protocols that enable the transfer of assets and data between incompatible blockchain networks", "Bridges used in blockchain gaming", "Security features for wallets"], a: "Protocols that enable the transfer of assets and data between incompatible blockchain networks", exp: "Cross-chain bridges are crucial for interoperability, allowing value and information to flow between different blockchain ecosystems.", difficulty: "advanced" },
                    { q: "What is a 'Parachain' in the Polkadot ecosystem?", options: ["A type of smart contract on Polkadot", "An independent blockchain connected to the Polkadot Relay Chain, benefiting from its shared security and interoperability", "A sidechain connected to Ethereum", "A layer-2 scaling solution for Bitcoin"], a: "An independent blockchain connected to the Polkadot Relay Chain, benefiting from its shared security and interoperability", exp: "Parachains are application-specific blockchains that run in parallel within the Polkadot network, leveraging its security model.", difficulty: "advanced" },
                    { q: "What is the primary benefit of Cosmos (ATOM)'s 'Inter-Blockchain Communication Protocol' (IBC)?", options: ["To speed up transactions within a single blockchain", "To enable seamless and secure communication and value transfer between independent blockchains within the Cosmos ecosystem", "To allow traditional financial institutions to access crypto markets", "To create a centralized blockchain network"], a: "To enable seamless and secure communication and value transfer between independent blockchains within the Cosmos ecosystem", exp: "IBC is a protocol for secure data and asset exchange between heterogeneous blockchains in the Cosmos network, fostering interoperability.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Blockchain Development": {
                image: "https://placehold.co/100x100/663399/ffffff?text=DEV",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What is a 'smart contract'?", options: ["A traditional legal contract", "A self-executing contract with the terms of the agreement directly written into code", "A contract managed by a central authority", "A physical document used in crypto transactions"], a: "A self-executing contract with the terms of the agreement directly written into code", exp: "Smart contracts run on a blockchain and automatically execute when predefined conditions are met, without intermediaries.", difficulty: "basic" },
                    { q: "What language is commonly used for writing smart contracts on Ethereum?", options: ["Python", "Java", "Solidity", "C++"], a: "Solidity", exp: "Solidity is a high-level, contract-oriented programming language for implementing smart contracts on various EVM-compatible blockchains.", difficulty: "basic" },
                    { q: "What is a 'testnet'?", options: ["The main, live blockchain network", "A blockchain network used for development and testing without real-world value", "A network for stress-testing internet speed", "A private network for specific users only"], a: "A blockchain network used for development and testing without real-world value", exp: "Testnets allow developers to experiment with new features and dApps without risking real funds or impacting the mainnet.", difficulty: "basic" },
                    { q: "What does 'EVM compatibility' mean?", options: ["Compatibility with email systems", "The ability of a blockchain to run smart contracts designed for the Ethereum Virtual Machine", "Compatibility with electronic voting machines", "The ability to run on multiple operating systems"], a: "The ability of a blockchain to run smart contracts designed for the Ethereum Virtual Machine", exp: "EVM compatibility means a blockchain can execute smart contracts written for Ethereum, allowing for easier migration of dApps.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What is an 'oracle' in blockchain?", options: ["A person who predicts crypto prices", "A decentralized service that provides external data to smart contracts", "A type of blockchain validator", "A new form of cryptocurrency"], a: "A decentralized service that provides external data to smart contracts", exp: "Oracles act as bridges between blockchains and the outside world, feeding real-world data (like prices, weather) to smart contracts.", difficulty: "intermediate" },
                    { q: "What is a 'gas limit' in Ethereum transactions?", options: ["The maximum amount of fuel a miner can use", "The maximum amount of gas (computational effort) a user is willing to spend on a transaction", "The minimum number of transactions per block", "The total gas available on the network"], a: "The maximum amount of gas (computational effort) a user is willing to spend on a transaction", exp: "The gas limit sets the maximum amount of 'gas' you are willing to consume for a transaction, preventing infinite loops or excessive resource usage.", difficulty: "intermediate" },
                    { q: "What is the purpose of 'bridges' in blockchain?", options: ["To connect physical hardware to blockchain", "To facilitate the transfer of assets and data between different blockchain networks", "To provide financial loans to developers", "To secure a single blockchain network"], a: "To facilitate the transfer of assets and data between different blockchain networks", exp: "Blockchain bridges enable interoperability by allowing tokens and data to move between otherwise incompatible blockchains.", difficulty: "intermediate" },
                    { q: "What is a 'Whitepaper' in a crypto project?", options: ["A legal document for investing", "A detailed document outlining the project's vision, technology, use case, and roadmap", "A simplified marketing brochure", "A security audit report"], a: "A detailed document outlining the project's vision, technology, use case, and roadmap", exp: "A whitepaper is crucial for understanding the technical and conceptual foundations of a blockchain project.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "Explain 'Turing Completeness' in smart contracts.", options: ["The ability of a smart contract to solve any mathematical problem instantly", "The property of a smart contract language/platform that allows it to simulate any Turing machine, meaning it can perform any computation that a general-purpose computer can", "The ability to integrate with AI", "The measure of a smart contract's security"], a: "The property of a smart contract language/platform that allows it to simulate any Turing machine, meaning it can perform any computation that a general-purpose computer can", exp: "Turing completeness allows for complex and versatile smart contracts, but also introduces the risk of infinite loops or resource exhaustion.", difficulty: "advanced" },
                    { q: "What is a 'DAO Framework'?", options: ["A set of rules for DAO governance", "Software tools and templates that help in the creation, deployment, and management of Decentralized Autonomous Organizations", "A legal structure for DAOs", "A coding language for DAOs"], a: "Software tools and templates that help in the creation, deployment, and management of Decentralized Autonomous Organizations", exp: "DAO frameworks simplify the process of launching and operating DAOs, providing pre-built smart contracts for governance, treasury management, etc.", difficulty: "advanced" },
                    { q: "What is an 'SDK' (Software Development Kit) in blockchain development?", options: ["A type of cryptocurrency wallet", "A set of software development tools that allows the creation of applications for a certain platform or blockchain", "A blockchain consensus mechanism", "A security standard for dApps"], a: "A set of software development tools that allows the creation of applications for a certain platform or blockchain", exp: "SDKs provide developers with code samples, libraries, documentation, and tools to build on a specific blockchain or protocol more easily.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Decentralized Applications (dApps)": {
                image: "https://placehold.co/100x100/00CED1/ffffff?text=DApp",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "Which characteristic is essential for a dApp?", options: ["Centralized control", "Runs on a single server", "Open-source and runs on a decentralized network", "Requires government approval to function"], a: "Open-source and runs on a decentralized network", exp: "dApps are applications that operate on a decentralized peer-to-peer network, leveraging blockchain technology.", difficulty: "basic" },
                    { q: "What is a common use case for dApps in the financial sector?", options: ["Traditional banking apps", "Decentralized exchanges (DEXs) for trading crypto", "Stock market analysis software", "Credit card processing systems"], a: "Decentralized exchanges (DEXs) for trading crypto", exp: "DEXs are prominent dApps that allow users to trade cryptocurrencies directly without intermediaries.", difficulty: "basic" },
                    { q: "What does it mean for a dApp to be 'censorship-resistant'?", options: ["It can block specific users", "No single entity can prevent it from running or being accessed", "It is protected from cyberattacks", "It requires user permission to operate"], a: "No single entity can prevent it from running or being accessed", exp: "Because dApps run on decentralized networks, they are designed to be resilient to censorship or shutdown by any single authority.", difficulty: "basic" },
                    { q: "What is the role of a 'front-end' in a dApp?", options: ["It's the smart contract logic", "It's the user interface that interacts with the blockchain backend", "It manages network security", "It's the decentralized database"], a: "It's the user interface that interacts with the blockchain backend", exp: "The front-end of a dApp is what users see and interact with, which then communicates with the smart contracts on the blockchain.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What is a common challenge for dApps regarding scalability?", options: ["Too many users wanting to access them", "The underlying blockchain's transaction speed limitations", "Lack of developer interest", "Difficulty in finding hosting servers"], a: "The underlying blockchain's transaction speed limitations", exp: "Many dApps face scalability issues because they are limited by the throughput of the blockchain they run on, leading to high fees or slow transactions during peak usage.", difficulty: "intermediate" },
                    { q: "Which of these is NOT typically a component of a dApp?", options: ["Smart contracts", "Decentralized storage", "Centralized server database", "User interface"], a: "Centralized server database", exp: "A core principle of dApps is decentralization, so they typically avoid reliance on centralized server databases.", difficulty: "intermediate" },
                    { q: "What is a common use case for dApps outside of finance and gaming?", options: ["Traditional email services", "Supply chain tracking and provenance", "Centralized cloud storage", "Proprietary software development"], a: "Supply chain tracking and provenance", exp: "dApps can provide transparent and immutable records for tracking goods in a supply chain, ensuring authenticity and ethical sourcing.", difficulty: "intermediate" },
                    { q: "What is the role of 'IPFS' (InterPlanetary File System) in dApps?", options: ["A centralized database for dApp user data", "A distributed peer-to-peer file storage system often used by dApps to store data off-chain", "A tool for dApp security audits", "A new programming language for dApps"], a: "A distributed peer-to-peer file storage system often used by dApps to store data off-chain", exp: "IPFS allows dApps to store content in a decentralized way, making it censorship-resistant and more resilient.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "What is a 'Zero-Knowledge dApp' (zkDApp)?", options: ["A dApp that requires no user input", "A dApp that leverages Zero-Knowledge Proofs to enhance user privacy and network scalability by verifying transactions without revealing sensitive data", "A dApp that runs only on a testnet", "A dApp for anonymous voting"], a: "A dApp that leverages Zero-Knowledge Proofs to enhance user privacy and network scalability by verifying transactions without revealing sensitive data", exp: "zkDApps are at the forefront of privacy-preserving and scalable decentralized applications, ensuring data confidentiality while maintaining verifiability.", difficulty: "advanced" },
                    { q: "How do 'Subgraphs' (The Graph protocol) support dApps?", options: ["They are a type of smart contract", "They are open APIs built on top of blockchain data, allowing dApps to query data efficiently and reliably", "They are a scaling solution for dApps", "They are a user interface framework for dApps"], a: "They are open APIs built on top of blockchain data, allowing dApps to query data efficiently and reliably", exp: "Subgraphs solve the problem of efficiently accessing and querying data from blockchains, which is complex for dApps to do directly.", difficulty: "advanced" },
                    { q: "What is the significance of 'Account Abstraction' for dApps?", options: ["It makes dApps more complex to develop", "It simplifies the user experience by allowing smart contracts to initiate and pay for transactions directly, enabling features like gasless transactions or social recovery for wallets", "It removes the need for smart contracts", "It centralizes dApp control"], a: "It simplifies the user experience by allowing smart contracts to initiate and pay for transactions directly, enabling features like gasless transactions or social recovery for wallets", exp: "Account abstraction aims to make blockchain wallets and transactions more user-friendly by abstracting away cryptographic complexities.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Wallets & Keys": {
                image: "https://placehold.co/100x100/FFA500/ffffff?text=WALLET",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "Which of these is a 'hot wallet'?", options: ["A paper wallet", "A hardware wallet", "A mobile wallet connected to the internet", "A wallet stored in a bank vault"], a: "A mobile wallet connected to the internet", exp: "Hot wallets are connected to the internet, making them convenient for transactions but potentially more vulnerable to online threats.", difficulty: "basic" },
                    { q: "What is a 'public key' (or wallet address)?", options: ["A secret code for your crypto", "An address you can share for receiving crypto", "Your exchange login password", "A phrase to recover your wallet"], a: "An address you can share for receiving crypto", exp: "Your public key (wallet address) is similar to an email address; you can share it freely to receive funds.", difficulty: "basic" },
                    { q: "What is a 'private key'?", options: ["Your public wallet address", "A secret alphanumeric code that allows access to your crypto", "A username for your exchange account", "A security question for password recovery"], a: "A secret alphanumeric code that allows access to your crypto", exp: "The private key is a critical piece of information used to authorize transactions and prove ownership of your cryptocurrency.", difficulty: "basic" },
                    { q: "What is the main danger if someone obtains your seed phrase?", options: ["They can only view your balance", "They can access and control all funds associated with that seed phrase", "They can only send you more crypto", "It only affects your wallet's design"], a: "They can access and control all funds associated with that seed phrase", exp: "A seed phrase is the ultimate backup for your wallet; anyone with it can access your funds.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "How are funds moved from a hardware wallet?", options: ["By typing the seed phrase online", "By entering the private key directly into a computer", "By physically confirming the transaction on the device", "By sending an email request to the manufacturer"], a: "By physically confirming the transaction on the device", exp: "Hardware wallets require physical interaction (like pressing a button) on the device itself to sign and authorize transactions, keeping private keys offline.", difficulty: "intermediate" },
                    { q: "Which type of wallet typically allows you to stake cryptocurrencies directly from it?", options: ["Paper wallet", "Cold storage in a bank vault", "Non-custodial software wallets (desktop/mobile) that support staking protocols", "Only exchange wallets"], a: "Non-custodial software wallets (desktop/mobile) that support staking protocols", exp: "Non-custodial wallets allow you to retain control of your private keys while interacting directly with staking protocols.", difficulty: "intermediate" },
                    { q: "What is the primary difference between a 'custodial' and 'non-custodial' wallet?", options: ["Custodial wallets are more secure", "Non-custodial wallets are always offline", "Custodial wallets hold your private keys for you, non-custodial wallets give you full control", "Custodial wallets only hold Bitcoin, non-custodial hold altcoins"], a: "Custodial wallets hold your private keys for you, non-custodial wallets give you full control", exp: "With a non-custodial wallet, you are solely responsible for your private keys. With a custodial wallet, a third party holds them on your behalf.", difficulty: "intermediate" },
                    { q: "What is a 'brain wallet'?", options: ["A digital wallet for AI", "A wallet where the private key is generated from a memorized passphrase or seed phrase", "A type of hardware wallet with advanced security", "A wallet that connects directly to your brain"], a: "A wallet where the private key is generated from a memorized passphrase or seed phrase", exp: "Brain wallets rely on the user's memory, but they are highly insecure unless the passphrase is truly random and complex, making them vulnerable to brute-force attacks.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "What is a 'multisig' wallet?", options: ["A wallet that holds multiple cryptocurrencies", "A wallet that requires multiple signatures (private keys) to authorize a transaction", "A wallet used for multiple users", "A wallet that generates multiple addresses"], a: "A wallet that requires multiple signatures (private keys) to authorize a transaction", exp: "Multisignature wallets require two or more private keys to sign and execute a transaction, enhancing security, especially for shared funds.", difficulty: "advanced" },
                    { q: "Explain 'Hierarchical Deterministic (HD) Wallets'.", options: ["Wallets that only store one type of cryptocurrency", "Wallets that generate a tree-like structure of key pairs from a single seed phrase, making backups easier and managing multiple addresses simpler", "Wallets that require a hierarchy of approvals for transactions", "Wallets with a fixed number of addresses"], a: "Wallets that generate a tree-like structure of key pairs from a single seed phrase, making backups easier and managing multiple addresses simpler", exp: "HD wallets conform to BIP32/BIP44 standards, allowing for the derivation of numerous addresses from a single master seed, improving privacy and manageability.", difficulty: "advanced" },
                    { q: "What is 'UTXO' (Unspent Transaction Output) and its role in Bitcoin wallets?", options: ["A type of cryptocurrency asset", "The remaining output from a Bitcoin transaction that can be used as input for a new transaction, representing the spendable balance in a wallet", "A security standard for wallets", "A unique transaction identifier"], a: "The remaining output from a Bitcoin transaction that can be used as input for a new transaction, representing the spendable balance in a wallet", exp: "UTXOs are fundamental to how Bitcoin keeps track of who owns what, as they are the basis of a wallet's spendable balance.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Decentralized Autonomous Organizations (DAOs)": {
                image: "https://placehold.co/100x100/8B0000/ffffff?text=DAO",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What is a DAO?", options: ["A type of centralized bank", "An organization managed by a board of directors", "An organization run by code and governed by its community through voting", "A traditional company that uses blockchain for payments"], a: "An organization run by code and governed by its community through voting", exp: "DAOs are blockchain-based organizations that are typically governed by tokens, allowing token holders to vote on proposals.", difficulty: "basic" },
                    { q: "How are decisions typically made in a DAO?", options: ["By a single CEO", "Through traditional board meetings", "Via token-based voting on proposals", "By government regulation"], a: "Via token-based voting on proposals", exp: "Token holders in a DAO typically have voting power proportional to their holdings, allowing them to participate in governance decisions.", difficulty: "basic" },
                    { q: "What is a 'governance token'?", options: ["A token used only for trading", "A cryptocurrency issued by a government", "A token that grants holders voting rights and influence over a protocol's future", "A stablecoin used for transactions"], a: "A token that grants holders voting rights and influence over a protocol's future", exp: "Governance tokens allow their holders to propose and vote on changes to a decentralized protocol or DAO.", difficulty: "basic" },
                    { q: "What is one of the main benefits of a DAO?", options: ["Centralized control and efficiency", "Transparency and community-driven decision-making", "Faster transaction speeds for cryptocurrencies", "Guaranteed high investment returns"], a: "Transparency and community-driven decision-making", exp: "DAOs offer transparent operations and allow a distributed community to participate directly in decision-making.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What is a challenge faced by DAOs?", options: ["Difficulty in finding investors", "Achieving consensus among a large and diverse group of token holders", "Lack of available technology", "Being too centralized"], a: "Achieving consensus among a large and diverse group of token holders", exp: "Coordinating and reaching agreement within a large, decentralized community can be complex for DAOs.", difficulty: "intermediate" },
                    { q: "What happens if a DAO proposal passes?", options: ["It becomes a suggestion for the core team", "It is automatically executed by smart contracts or implemented by the community", "It is sent to a central committee for review", "It is discarded after a week"], a: "It is automatically executed by smart contracts or implemented by the community", exp: "The power of DAOs lies in their ability to execute approved proposals automatically via smart contracts or by community consensus.", difficulty: "intermediate" },
                    { q: "Which of these sectors is NOT seeing significant DAO adoption?", options: ["DeFi protocols", "NFT projects", "Venture capital funds", "Traditional brick-and-mortar retail stores"], a: "Traditional brick-and-mortar retail stores", exp: "DAOs are primarily digital-native organizations that operate in the blockchain and crypto space, less so in traditional physical businesses.", difficulty: "intermediate" },
                    { q: "What is 'Delegated Voting' in DAOs?", options: ["Voting on behalf of others without permission", "A mechanism where token holders can delegate their voting power to another address or representative without transferring ownership of their tokens", "A voting system only for large token holders", "Voting that requires a third-party intermediary"], a: "A mechanism where token holders can delegate their voting power to another address or representative without transferring ownership of their tokens", exp: "Delegated voting helps improve participation in DAO governance, as individuals can delegate their votes to experts or representatives.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "Explain the concept of 'Sybil Attack' vulnerability in DAOs.", options: ["An attack where a single entity creates multiple fake identities/wallets to gain disproportionate voting power", "An attack that aims to steal funds from a DAO treasury", "An attack that floods the DAO network with spam transactions", "An attack that targets smart contract vulnerabilities"], a: "An attack where a single entity creates multiple fake identities/wallets to gain disproportionate voting power", exp: "Sybil attacks are a risk for DAOs, as they can undermine democratic governance if a single actor can control multiple voting identities.", difficulty: "advanced" },
                    { q: "What is 'Quorum' in DAO governance?", options: ["The number of active DAO members", "The minimum percentage or number of votes required for a proposal to be considered valid or passed", "The maximum number of proposals a DAO can have", "The total value of assets managed by a DAO"], a: "The minimum percentage or number of votes required for a proposal to be considered valid or passed", exp: "A quorum ensures that important decisions are not made by a small minority of voters, promoting broader participation.", difficulty: "advanced" },
                    { q: "What is the role of 'Treasury Management' in a DAO?", options: ["Managing the personal funds of DAO members", "Overseeing and allocating the collective funds and assets held by the DAO, often through multi-signature wallets or smart contracts", "Managing the marketing budget of the DAO", "Handling the technical development of the DAO's protocol"], a: "Overseeing and allocating the collective funds and assets held by the DAO, often through multi-signature wallets or smart contracts", exp: "Effective treasury management is vital for a DAO's long-term sustainability and ability to fund its operations and initiatives.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Scalability Solutions": {
                image: "https://placehold.co/100x100/FF4500/ffffff?text=SCAL",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What is the main problem that Layer-2 solutions aim to solve for blockchains like Ethereum?", options: ["Security vulnerabilities", "Lack of decentralization", "Scalability (transaction speed and cost)", "Data storage limitations"], a: "Scalability (transaction speed and cost)", exp: "Layer-2 solutions help blockchains handle more transactions per second and reduce fees by processing them off-chain.", difficulty: "basic" },
                    { q: "What is a 'rollup' in the context of Layer-2?", options: ["A type of cryptocurrency wallet", "A scaling solution that executes transactions off-chain and then posts bundled transaction data back to the mainnet", "A new consensus mechanism", "A method for creating NFTs"], a: "A scaling solution that executes transactions off-chain and then posts bundled transaction data back to the mainnet", exp: "Rollups (like Optimistic and ZK-Rollups) bundle many transactions into a single batch and submit it to the main chain, significantly increasing throughput.", difficulty: "basic" },
                    { q: "What is 'sharding'?", options: ["Breaking a blockchain into smaller, more manageable pieces to process transactions in parallel", "A method for mining crypto more efficiently", "A type of smart contract", "A way to secure a blockchain against attacks"], a: "Breaking a blockchain into smaller, more manageable pieces to process transactions in parallel", exp: "Sharding is a database partitioning technique that aims to improve scalability by dividing the blockchain network into smaller, independent segments called 'shards'.", difficulty: "basic" },
                    { q: "What is the primary advantage of a 'sidechain'?", options: ["It is directly secured by the mainnet's consensus", "It allows for custom functionality and faster transactions without burdening the mainnet", "It eliminates the need for any fees", "It ensures complete anonymity for all transactions"], a: "It allows for custom functionality and faster transactions without burdening the mainnet", exp: "Sidechains are independent blockchains connected to a mainnet via a two-way peg, offering flexibility for different use cases and relieving mainnet congestion.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "Which Layer-2 solution uses 'fraud proofs' to ensure transaction validity?", options: ["ZK-Rollups", "Optimistic Rollups", "Sidechains", "State Channels"], a: "Optimistic Rollups", exp: "Optimistic Rollups assume transactions are valid by default but allow a dispute period during which fraud proofs can be submitted to challenge invalid transactions.", difficulty: "intermediate" },
                    { q: "What is the main difference between 'Optimistic Rollups' and 'ZK-Rollups'?", options: ["Optimistic Rollups are faster", "ZK-Rollups use cryptographic proofs (zero-knowledge proofs) for instant validity, while Optimistic Rollups use a fraud proof period", "ZK-Rollups are more expensive", "Optimistic Rollups are more secure"], a: "ZK-Rollups use cryptographic proofs (zero-knowledge proofs) for instant validity, while Optimistic Rollups use a fraud proof period", exp: "ZK-Rollups provide immediate finality by proving the validity of off-chain transactions cryptographically, whereas Optimistic Rollups rely on a challenge period.", difficulty: "intermediate" },
                    { q: "What is a 'State Channel'?", options: ["A channel for communicating between blockchains", "A Layer-2 solution that allows parties to conduct multiple transactions off-chain, with only the opening and closing transactions recorded on the main chain", "A method for securely storing private keys", "A platform for buying and selling crypto assets"], a: "A Layer-2 solution that allows parties to conduct multiple transactions off-chain, with only the opening and closing transactions recorded on the main chain", exp: "State channels are a Layer-2 scaling technique that enables participants to conduct a series of transactions off-chain while only committing the final state to the main blockchain.", difficulty: "intermediate" },
                    { q: "What is 'Data Availability' in the context of rollups?", options: ["How easily data can be accessed by users", "Ensuring that the data required to reconstruct the rollup state is available to all participants, preventing hidden fraud", "The amount of data stored on the blockchain", "The speed at which data is transferred between layers"], a: "Ensuring that the data required to reconstruct the rollup state is available to all participants, preventing hidden fraud", exp: "Data availability is critical for the security of rollups, as it allows anyone to verify the integrity of the off-chain computations.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "Explain 'Validiums' as a Layer-2 scaling solution.", options: ["A type of Proof of Work blockchain", "A scaling solution similar to ZK-Rollups, but where data is stored off-chain rather than on the mainnet, offering higher scalability but different security assumptions", "A solution for cross-chain communication", "A decentralized storage network"], a: "A scaling solution similar to ZK-Rollups, but where data is stored off-chain rather than on the mainnet, offering higher scalability but different security assumptions", exp: "Validiums offer very high throughput but rely on a committee to ensure data availability, making them suitable for specific enterprise or private blockchain use cases.", difficulty: "advanced" },
                    { q: "What is the concept of 'Modular Blockchains' and its relation to scalability?", options: ["Blockchains that can be upgraded easily", "An approach where different blockchain functions (execution, data availability, consensus) are handled by separate, specialized layers or chains, allowing for greater scalability and flexibility", "Blockchains built from pre-fabricated modules", "Blockchains that only process certain types of transactions"], a: "An approach where different blockchain functions (execution, data availability, consensus) are handled by separate, specialized layers or chains, allowing for greater scalability and flexibility", exp: "Modular blockchains aim to solve the scalability trilemma by optimizing each layer independently, leading to highly efficient and specialized chains.", difficulty: "advanced" },
                    { q: "How do 'Volition' scaling solutions combine elements of rollups and validiums?", options: ["They offer only one scaling option", "They give users the choice between storing transaction data on-chain (like a rollup) or off-chain (like a validium) for different security/cost tradeoffs", "They force all users to choose the most expensive option", "They combine all transactions into one block"], a: "They give users the choice between storing transaction data on-chain (like a rollup) or off-chain (like a validium) for different security/cost tradeoffs", exp: "Volition solutions offer flexibility, allowing users to select their preferred data availability and security guarantees based on their needs.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Token Standards & Types": {
                image: "https://placehold.co/100x100/FF69B4/ffffff?text=TOKEN",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What is the most common token standard for fungible tokens on Ethereum?", options: ["ERC-721", "ERC-1155", "ERC-20", "ERC-777"], a: "ERC-20", exp: "ERC-20 is the most prevalent standard for creating fungible (interchangeable) tokens on the Ethereum blockchain, like stablecoins or utility tokens.", difficulty: "basic" },
                    { q: "What type of token is an ERC-721 token?", options: ["Fungible token", "Security token", "Non-fungible token (NFT)", "Utility token"], a: "Non-fungible token (NFT)", exp: "ERC-721 is the standard specifically designed for unique, non-fungible tokens, often used for digital collectibles and art.", difficulty: "basic" },
                    { q: "What does a 'governance token' allow its holders to do?", options: ["Mine new cryptocurrency", "Vote on protocol changes and proposals", "Earn passive income without staking", "Exchange for any other cryptocurrency instantly"], a: "Vote on protocol changes and proposals", exp: "Governance tokens grant holders the right to participate in the decentralized governance of a project, such as a DAO or DeFi protocol.", difficulty: "basic" },
                    { q: "What is a 'utility token'?", options: ["A token used for governance", "A token that provides access to a product or service within an ecosystem", "A token backed by real-world assets", "A token that represents ownership in a company"], a: "A token that provides access to a product or service within an ecosystem", exp: "Utility tokens are designed to provide users with access to specific functionalities or services within a blockchain-based platform or dApp.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What is a 'security token'?", options: ["A token used for network security", "A digital representation of traditional securities (like stocks or bonds) on a blockchain", "A token that secures your wallet", "A token used only for voting"], a: "A digital representation of traditional securities (like stocks or bonds) on a blockchain", exp: "Security tokens are crypto tokens that represent ownership in an underlying asset or investment, similar to traditional securities, and are subject to securities regulations.", difficulty: "intermediate" },
                    { q: "Which token standard combines features of both fungible and non-fungible tokens?", options: ["ERC-20", "ERC-721", "ERC-1155", "BEP-20"], a: "ERC-1155", exp: "ERC-1155 allows a single smart contract to manage multiple token types, including both fungible and non-fungible tokens, making it highly versatile.", difficulty: "intermediate" },
                    { q: "What is the primary function of a 'Wrapped Bitcoin' (WBTC) token?", options: ["To create a new, separate Bitcoin blockchain", "To make Bitcoin fungible with Ethereum's ERC-20 standard, allowing it to be used in DeFi protocols", "To increase Bitcoin's supply", "To mine Bitcoin more efficiently on Ethereum"], a: "To make Bitcoin fungible with Ethereum's ERC-20 standard, allowing it to be used in DeFi protocols", exp: "WBTC is an ERC-20 token backed 1:1 by Bitcoin, enabling Bitcoin holders to participate in Ethereum's DeFi ecosystem.", difficulty: "intermediate" },
                    { q: "What is a 'Native Token' of a blockchain?", options: ["A token created by a centralized exchange", "A token that operates as the primary currency of a blockchain (e.g., ETH on Ethereum, BNB on BSC), used for transaction fees and staking", "A token that is backed by fiat currency", "A token used for governance only"], a: "A token that operates as the primary currency of a blockchain (e.g., ETH on Ethereum, BNB on BSC), used for transaction fees and staking", exp: "Native tokens are integral to the functioning of their respective blockchains, often used for paying gas fees and network security.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "Explain the difference between a 'Security Token Offering' (STO) and an 'Initial Coin Offering' (ICO).", options: ["There is no difference", "ICOs are typically utility tokens, STOs are digital securities subject to regulatory compliance", "STOs are for gaming tokens, ICOs are for DeFi tokens", "ICOs are regulated, STOs are not"], a: "ICOs are typically utility tokens, STOs are digital securities subject to regulatory compliance", exp: "STOs offer a more regulated fundraising method than ICOs, as they involve tokens classified as securities and must comply with relevant securities laws.", difficulty: "advanced" },
                    { q: "What is a 'Rebase Token'?", options: ["A token that constantly changes its blockchain", "A token whose total supply automatically adjusts (expands or contracts) to maintain a stable price, often by burning or minting tokens based on market conditions", "A token used for charity donations", "A token that can be swapped for any other token"], a: "A token whose total supply automatically adjusts (expands or contracts) to maintain a stable price, often by burning or minting tokens based on market conditions", exp: "Rebase tokens aim to stabilize their price by dynamically adjusting supply, similar to how central banks manage fiat currency supply.", difficulty: "advanced" },
                    { q: "What is the 'BRC-20' token standard and where is it used?", options: ["An Ethereum token standard", "A new experimental fungible token standard on the Bitcoin blockchain, allowing for token creation and transfer on Bitcoin's Ordinals protocol", "A Solana token standard for NFTs", "A privacy token standard"], a: "A new experimental fungible token standard on the Bitcoin blockchain, allowing for token creation and transfer on Bitcoin's Ordinals protocol", exp: "BRC-20 tokens leverage Bitcoin's Ordinals protocol, expanding its functionality beyond just NFTs to support fungible tokens.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Crypto & Society": {
                image: "https://placehold.co/100x100/4682B4/ffffff?text=SOC",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What is a common criticism of Bitcoin's environmental impact?", options: ["Its use of paper wallets", "The energy consumption of Proof of Work mining", "Its lack of physical presence", "The amount of data it stores"], a: "The energy consumption of Proof of Work mining", exp: "The energy consumed by Bitcoin's Proof of Work mining process is a frequent concern for environmentalists.", difficulty: "basic" },
                    { q: "How can cryptocurrencies facilitate financial inclusion?", options: ["By requiring users to have traditional bank accounts", "By providing access to financial services for the unbanked", "By increasing the cost of international remittances", "By creating new forms of debt"], a: "By providing access to financial services for the unbanked", exp: "Cryptocurrencies can offer financial services like payments, savings, and loans to individuals without access to traditional banking systems.", difficulty: "basic" },
                    { q: "What is 'blockchain for good'?", options: ["Blockchain projects that are highly profitable", "Using blockchain technology for social impact and humanitarian causes", "A marketing slogan for new cryptocurrencies", "A type of secure blockchain network"], a: "Using blockchain technology for social impact and humanitarian causes", exp: "Blockchain for good initiatives apply distributed ledger technology to areas like supply chain transparency, identity for refugees, or charitable donations.", difficulty: "basic" },
                    { q: "What is the 'digital divide' in the context of crypto adoption?", options: ["The difference between Bitcoin and other cryptocurrencies", "The gap between those with internet access/digital literacy and those without, impacting crypto accessibility", "The divide between centralized and decentralized finance", "The generational gap in technology use"], a: "The gap between those with internet access/digital literacy and those without, impacting crypto accessibility", exp: "The digital divide highlights how unequal access to technology and education can hinder broader crypto adoption.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "How can NFTs potentially impact creators' rights?", options: ["By making it harder to track ownership", "By allowing creators to earn royalties on secondary sales indefinitely", "By transferring all rights to the buyer upon sale", "By centralizing content distribution"], a: "By allowing creators to earn royalties on secondary sales indefinitely", exp: "NFT smart contracts can be programmed to automatically pay a percentage of future sales back to the original creator, providing a new revenue stream.", difficulty: "intermediate" },
                    { q: "What is the main concern regarding crypto and illicit activities?", options: ["High transaction fees", "The perceived anonymity and borderless nature making it attractive for money laundering and crime", "Slow transaction speeds", "Lack of investment opportunities"], a: "The perceived anonymity and borderless nature making it attractive for money laundering and crime", exp: "While transparency of public ledgers aids in tracking, the decentralized and borderless nature of crypto has raised concerns about its use in illicit finance.", difficulty: "intermediate" },
                    { q: "What is 'token-gated content' in Web3?", options: ["Content that is free to access for everyone", "Content that can only be accessed by holders of a specific NFT or crypto token", "Content that requires a password to view", "Content that is censored by a central authority"], a: "Content that can only be accessed by holders of a specific NFT or crypto token", exp: "Token-gated content leverages blockchain to restrict access to digital content, communities, or experiences only to those who own a particular token or NFT, fostering exclusive communities.", difficulty: "intermediate" },
                    { q: "How does blockchain potentially disrupt traditional financial systems?", options: ["By making them more centralized", "By offering decentralized alternatives to banks, brokers, and exchanges, reducing intermediaries and costs", "By increasing regulation in traditional finance", "By making financial transactions slower"], a: "By offering decentralized alternatives to banks, brokers, and exchanges, reducing intermediaries and costs", exp: "Blockchain can streamline processes, reduce fees, and provide greater access to financial services globally.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "Explain the concept of 'Universal Basic Income (UBI)' being explored with crypto.", options: ["A system where crypto is given to everyone based on their wealth", "Projects using blockchain to distribute a regular income to individuals, often with identity verification, aiming for global financial equity", "A type of crypto airdrop for developers", "A new form of decentralized lending"], a: "Projects using blockchain to distribute a regular income to individuals, often with identity verification, aiming for global financial equity", exp: "Blockchain-based UBI initiatives explore how transparent and immutable ledgers can facilitate fair and efficient distribution of funds, often without intermediaries.", difficulty: "advanced" },
                    { q: "How does blockchain contribute to 'Digital Sovereignty'?", options: ["By centralizing control over digital data", "By enabling individuals to have greater control and ownership over their digital assets, identity, and data, reducing reliance on large corporations", "By making digital data publicly accessible to everyone", "By creating new forms of digital currency"], a: "By enabling individuals to have greater control and ownership over their digital assets, identity, and data, reducing reliance on large corporations", exp: "Digital sovereignty is a core tenet of Web3, empowering users to manage their digital lives without intermediaries.", difficulty: "advanced" },
                    { q: "What is the primary socio-economic argument for 'Hyperbitcoinization'?", options: ["When Bitcoin becomes a niche investment", "The theoretical future state where Bitcoin becomes the world's dominant reserve currency and unit of account, replacing fiat currencies due to its deflationary and decentralized nature", "When Bitcoin is banned globally", "When Bitcoin is controlled by a single government"], a: "The theoretical future state where Bitcoin becomes the world's dominant reserve currency and unit of account, replacing fiat currencies due to its deflationary and decentralized nature", exp: "Proponents argue that Bitcoin's properties make it a superior monetary technology, leading to its eventual global adoption.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Crypto & Gaming": {
                image: "https://placehold.co/100x100/9932CC/ffffff?text=GAME",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "What is 'Play-to-Earn' (P2E) in blockchain gaming?", options: ["Playing games without earning anything", "A gaming model where players can earn crypto or NFTs through gameplay", "Paying to access game content", "A traditional gaming subscription model"], a: "A gaming model where players can earn crypto or NFTs through gameplay", exp: "P2E games integrate blockchain to allow players to earn real-world value assets by participating in the game economy.", difficulty: "basic" },
                    { q: "What enables true ownership of in-game assets in blockchain games?", options: ["Game servers", "NFTs", "In-game currency", "Cloud storage"], a: "NFTs", exp: "NFTs represent unique in-game items, giving players verifiable ownership that can be traded or sold outside the game.", difficulty: "basic" },
                    { q: "What is a 'gaming guild' in the P2E space?", options: ["A traditional gaming clan", "An organization that lends NFTs/capital to players to earn a share of their winnings", "A company that develops new games", "A group of game testers"], a: "An organization that lends NFTs/capital to players to earn a share of their winnings", exp: "Gaming guilds help new players enter P2E games by providing necessary in-game assets in exchange for a portion of the earnings, fostering community and accessibility.", difficulty: "basic" },
                    { q: "How do blockchain games differ from traditional games regarding asset ownership?", options: ["Assets are owned by the game developers in both cases", "Blockchain games allow players to truly own and trade in-game assets outside the game, unlike traditional games", "Traditional games have more valuable assets", "Blockchain games do not have any in-game assets"], a: "Blockchain games allow players to truly own and trade in-game assets outside the game, unlike traditional games", exp: "Blockchain technology brings true digital ownership to gaming, allowing players to buy, sell, or trade their in-game items as NFTs.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What is 'GameFi'?", options: ["A genre of traditional video games", "The fusion of gaming and decentralized finance (DeFi) elements within blockchain games", "A financial lending protocol for game developers", "A blockchain platform for game streaming"], a: "The fusion of gaming and decentralized finance (DeFi) elements within blockchain games", exp: "GameFi combines gaming, DeFi, and NFTs to create immersive and economically rewarding virtual worlds.", difficulty: "intermediate" },
                    { q: "Which concept allows players to earn by building and owning land in virtual worlds?", options: ["Cloud gaming", "Metaverse land ownership (via NFTs)", "Traditional real estate investment", "Stock market trading simulation"], a: "Metaverse land ownership (via NFTs)", exp: "Many metaverse platforms allow users to buy virtual land as NFTs, which can then be developed and monetized, offering new play-to-earn opportunities.", difficulty: "intermediate" },
                    { q: "What is the primary benefit of 'on-chain gaming'?", options: ["Faster graphics", "All game logic and assets are processed and stored on the blockchain, ensuring transparency and decentralization", "Easier game development", "Requires no internet connection"], a: "All game logic and assets are processed and stored on the blockchain, ensuring transparency and decentralization", exp: "On-chain gaming means that critical game elements and logic reside directly on the blockchain, making them verifiable and resistant to manipulation.", difficulty: "intermediate" },
                    { q: "What is a 'Game Token' (or native game currency)?", options: ["A token used only for trading on exchanges", "A cryptocurrency unique to a blockchain game, used for in-game purchases, rewards, or governance", "A token that gives access to all games on a platform", "A token that represents ownership of a gaming company"], a: "A cryptocurrency unique to a blockchain game, used for in-game purchases, rewards, or governance", exp: "Game tokens are integral to the play-to-earn economy, enabling players to earn and spend value within the game's ecosystem.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "Explain the concept of 'Interoperability' in blockchain gaming.", options: ["The ability to play games offline", "The ability for in-game assets (NFTs) or characters to be used across different blockchain games or metaverses", "The compatibility of gaming consoles with blockchain", "The ability to transfer game data between traditional and blockchain games"], a: "The ability for in-game assets (NFTs) or characters to be used across different blockchain games or metaverses", exp: "Interoperability aims to break down walled gardens in gaming, allowing assets to have utility across multiple virtual environments.", difficulty: "advanced" },
                    { q: "What are 'Fractionalized Gaming NFTs'?", options: ["NFTs that are less valuable than others", "Gaming NFTs that have been divided into smaller, fungible pieces, allowing multiple people to own a share and increasing accessibility to high-value assets", "NFTs used to represent a fraction of game time", "NFTs that are only part of a larger set"], a: "Gaming NFTs that have been divided into smaller, fungible pieces, allowing multiple people to own a share and increasing accessibility to high-value assets", exp: "Fractionalization democratizes ownership of rare or expensive in-game NFTs, allowing more players to participate in their value appreciation.", difficulty: "advanced" },
                    { q: "How do 'Subnets' (e.g., Avalanche subnets) enhance blockchain gaming ecosystems?", options: ["They provide centralized game servers", "They allow developers to create custom, application-specific blockchains with their own rules and native tokens, optimized for gaming, without impacting the main chain's performance", "They are a type of Layer-2 solution for gaming transactions", "They are used to create new types of NFTs for games"], a: "They allow developers to create custom, application-specific blockchains with their own rules and native tokens, optimized for gaming, without impacting the main chain's performance", exp: "Subnets provide dedicated, high-performance environments for games, offering greater control and scalability for complex gaming economies.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            },
            "Privacy in Crypto": {
                image: "https://placehold.co/100x100/6A5ACD/ffffff?text=PRIV",
                questions: [
                    // --- Basic Questions (Aim for 11) ---
                    { q: "Which type of coin is specifically designed to obscure transaction details?", options: ["Utility coin", "Stablecoin", "Privacy coin", "Governance coin"], a: "Privacy coin", exp: "Privacy coins like Monero (XMR) and Zcash (ZEC) use advanced cryptography to hide sender, receiver, and transaction amounts.", difficulty: "basic" },
                    { q: "Are Bitcoin transactions anonymous by default?", options: ["Yes, completely anonymous", "No, they are pseudonymous (addresses are public, identity is not directly linked)", "Only if you use a VPN", "Only if you transact small amounts"], a: "No, they are pseudonymous (addresses are public, identity is not directly linked)", exp: "Bitcoin transactions are public, and while addresses don't reveal personal identity directly, transaction history is traceable, making it pseudonymous.", difficulty: "basic" },
                    { q: "What does 'KYC' (Know Your Customer) primarily aim to prevent in crypto exchanges?", options: ["High trading fees", "Slow transaction speeds", "Money laundering and terrorist financing", "Price volatility"], a: "Money laundering and terrorist financing", exp: "KYC procedures on centralized exchanges require users to verify their identity to comply with anti-money laundering regulations.", difficulty: "basic" },
                    { q: "Is it possible to track transactions on a public blockchain?", options: ["No, it's impossible", "Yes, all transactions are publicly viewable, though identities are pseudonymous", "Only if you are a government agency", "Only for transactions over a certain amount"], a: "Yes, all transactions are publicly viewable, though identities are pseudonymous", exp: "Public blockchains are transparent ledgers, meaning anyone can view transaction details, but without direct identity links.", difficulty: "basic" },
                    // --- Intermediate Questions (Aim for 12) ---
                    { q: "What is a 'mixing service' (or tumbler) in crypto?", options: ["A service to blend different cryptocurrencies into one", "A service to obscure the origin and destination of cryptocurrency funds by mixing them with others", "A platform for crypto trading", "A tool for generating new wallet addresses"], a: "A service to obscure the origin and destination of cryptocurrency funds by mixing them with others", exp: "Mixing services aim to enhance privacy by breaking the on-chain link between sender and receiver, but are often scrutinized by regulators.", difficulty: "intermediate" },
                    { q: "What is 'Zero-Knowledge Proofs' (ZKPs) used for in crypto?", options: ["To prove you know the answer to a question without revealing the answer itself", "To create new types of cryptocurrencies", "To speed up blockchain transaction processing", "To provide data for smart contracts"], a: "To prove you know the answer to a question without revealing the answer itself", exp: "ZKPs allow one party to prove the truth of a statement to another without revealing any information beyond the validity of the statement itself, enhancing privacy and scalability.", difficulty: "intermediate" },
                    { q: "Which privacy feature is used by Monero (XMR) to obscure transaction details?", options: ["Transparent transactions", "Ring Signatures and Stealth Addresses", "Public ledger only", "Centralized mixing"], a: "Ring Signatures and Stealth Addresses", exp: "Monero uses Ring Signatures to mix your transaction with others and Stealth Addresses to hide the recipient's address, enhancing privacy.", difficulty: "intermediate" },
                    { q: "What is 'CoinJoin'?", options: ["A type of cryptocurrency exchange", "A privacy technique used in Bitcoin where multiple parties combine their transaction inputs into a single transaction to obscure the origins of individual coins", "A new type of staking pool", "A method for creating new cryptocurrencies"], a: "A privacy technique used in Bitcoin where multiple parties combine their transaction inputs into a single transaction to obscure the origins of individual coins", exp: "CoinJoin makes it harder for external parties to trace specific coins to specific users by mixing funds.", difficulty: "intermediate" },
                    // --- Advanced Questions (Aim for 12) ---
                    { q: "Explain the 'Anonymity Set' in privacy coins.", options: ["A group of anonymous developers", "The number of potential participants in a transaction that could be the real sender or receiver, making it harder to link specific identities to funds", "A predefined group of users for private transactions", "The total number of privacy coins in circulation"], a: "The number of potential participants in a transaction that could be the real sender or receiver, making it harder to link specific identities to funds", exp: "A larger anonymity set provides stronger privacy guarantees, as it increases the number of plausible individuals involved in a transaction.", difficulty: "advanced" },
                    { q: "How do 'zk-SNARKs' differ from 'zk-STARKs'?", options: ["They are both types of privacy coins", "They are both types of Zero-Knowledge Proofs, but SNARKs are smaller and require a trusted setup, while STARKs are larger but don't need a trusted setup and are quantum-resistant", "SNARKs are for scalability, STARKs are for privacy", "SNARKs are used in Bitcoin, STARKs in Ethereum"], a: "They are both types of Zero-Knowledge Proofs, but SNARKs are smaller and require a trusted setup, while STARKs are larger but don't need a trusted setup and are quantum-resistant", exp: "These are advanced cryptographic techniques used in various privacy-focused blockchains and scaling solutions.", difficulty: "advanced" },
                    { q: "What are 'Dark Pools' in crypto trading?", options: ["Pools of liquidity for privacy coins", "Private exchanges or venues where large crypto trades are executed without being visible to the public order books, often used by institutional investors to avoid market impact", "Illegal crypto trading platforms", "Decentralized liquidity pools with enhanced privacy features"], a: "Private exchanges or venues where large crypto trades are executed without being visible to the public order books, often used by institutional investors to avoid market impact", exp: "Dark pools offer a way for large traders to transact without immediately affecting market prices, although their transparency is a subject of debate.", difficulty: "advanced" },
                    // ... Add 7 more Basic, 8 more Intermediate, 9 more Advanced questions here for a total of 35
                ]
            }
        };

        const categoriesList = Object.keys(categories);
        let categoryQuestions = {}; // To store the shuffled questions for each category

        // --- Functions ---
        function loadHighScore() {
            highScoreDisplay.textContent = highScore;
        }

        function saveHighScore() {
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('cryptoQuestHighScore', highScore);
                highScoreDisplay.textContent = highScore;
                highScoreAchievedMessage.style.display = 'block';
            } else {
                highScoreAchievedMessage.style.display = 'none';
            }
        }

        function showScreen(screenId) {
            const screens = [startScreen, quizScreen, endScreen];
            screens.forEach(screen => {
                if (screen.id === screenId) {
                    screen.classList.add('active');
                } else {
                    screen.classList.remove('active');
                }
            });
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function populateCategories() {
            categoryGrid.innerHTML = ''; // Clear previous categories
            categoriesList.forEach(categoryName => {
                const categoryData = categories[categoryName];
                const categoryCard = document.createElement('div');
                categoryCard.classList.add('category-card');
                categoryCard.dataset.category = categoryName;

                // Add image
                if (categoryData.image) {
                    const img = document.createElement('img');
                    img.src = categoryData.image;
                    img.alt = categoryName + " icon";
                    categoryCard.appendChild(img);
                }

                const title = document.createElement('span');
                title.textContent = categoryName;
                categoryCard.appendChild(title);
                
                categoryCard.addEventListener('click', () => selectCategory(categoryName));
                categoryGrid.appendChild(categoryCard);
            });
            // Ensure category selection is visible when populating
            quizScreen.querySelector('.category-selection').style.display = 'block';
            questionArea.style.display = 'none'; // Hide question area initially
        }

        function selectCategory(categoryName) {
            selectedCategory = categoryName;
            currentCategoryNameDisplay.textContent = categoryName;
            
            // Get all questions for the selected category
            const allQuestionsForCategory = categories[categoryName].questions;
            
            // Shuffle them and select 7 for the current game round
            const shuffledQuestions = shuffleArray([...allQuestionsForCategory]);
            currentQuestions = shuffledQuestions.slice(0, 7); // Play 7 questions per round

            currentQuestionIndex = 0;
            score = 0;
            updateScoreDisplay();
            
            quizScreen.querySelector('.category-selection').style.display = 'none'; // Hide category selection
            questionArea.style.display = 'block'; // Show question area
            displayQuestion();
        }

        function displayQuestion() {
            feedbackMessage.textContent = '';
            feedbackMessage.classList.remove('correct', 'incorrect');
            nextQuestionBtn.style.display = 'none';
            optionsContainer.innerHTML = ''; // Clear previous options

            // If using question images:
            // questionImageContainer.style.display = 'none';
            // questionImage.src = '';

            if (currentQuestionIndex < currentQuestions.length) {
                const question = currentQuestions[currentQuestionIndex];
                questionText.textContent = question.q;
                questionCountDisplay.textContent = `${currentQuestionIndex + 1}/${currentQuestions.length}`;

                // If using question images:
                // if (question.image) {
                //     questionImage.src = question.image;
                //     questionImage.alt = question.q;
                //     questionImageContainer.style.display = 'block';
                // }

                shuffleArray(question.options).forEach(option => {
                    const optionBtn = document.createElement('button');
                    optionBtn.classList.add('option-btn');
                    optionBtn.textContent = option;
                    optionBtn.addEventListener('click', () => checkAnswer(option, question.a, question.exp));
                    optionsContainer.appendChild(optionBtn);
                });
            } else {
                endGame();
            }
        }

        function checkAnswer(selectedOption, correctAnswer, explanation) {
            // Disable all option buttons after selection
            document.querySelectorAll('.option-btn').forEach(btn => btn.classList.add('disabled'));

            if (selectedOption === correctAnswer) {
                score++;
                feedbackMessage.textContent = 'Correct! ' + explanation;
                feedbackMessage.classList.add('correct');
                // Highlight correct answer
                Array.from(optionsContainer.children).find(btn => btn.textContent === correctAnswer).classList.add('correct');
            } else {
                feedbackMessage.textContent = 'Incorrect. The correct answer was: ' + correctAnswer + '. ' + explanation;
                feedbackMessage.classList.add('incorrect');
                // Highlight correct and incorrect answers
                Array.from(optionsContainer.children).find(btn => btn.textContent === selectedOption).classList.add('incorrect');
                Array.from(optionsContainer.children).find(btn => btn.textContent === correctAnswer).classList.add('correct');
            }
            updateScoreDisplay();
            nextQuestionBtn.style.display = 'block';
        }

        function updateScoreDisplay() {
            scoreDisplay.textContent = score;
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < currentQuestions.length) {
                displayQuestion();
            } else {
                endGame();
            }
        }

        function endGame() {
            showScreen('end-screen');
            finalScoreDisplay.textContent = score;
            saveHighScore();
            // Reset state for next game
            selectedCategory = null;
            // No need to show/hide question area/category selection here, as resetGame handles it on restart
        }

        function resetGame() {
            currentQuestions = [];
            currentQuestionIndex = 0;
            score = 0;
            updateScoreDisplay();
            highScoreAchievedMessage.style.display = 'none';
            populateCategories(); // Re-populate categories for new game (and show category selection screen)
            showScreen('quiz-screen');
        }

        function goBackToCategories() {
            resetGame(); // Essentially resets the current game to go back to category selection
        }

        // --- Event Listeners ---
        startGameBtn.addEventListener('click', resetGame);
        nextQuestionBtn.addEventListener('click', nextQuestion);
        restartGameBtn.addEventListener('click', resetGame);
        backToCategoriesBtn.addEventListener('click', goBackToCategories); // Event listener for new Back button

        // Initial load
        loadHighScore();
        populateCategories(); // Load categories when the page first loads
    });
</script> 

    <!-- ======= SECCIÓN DEFI NAVIGATOR ======= -->
<section class="defi-navigator-section" id="defi-navigator">
    <div class="defi-header">
        <h2>🧭 DeFi Navigator: El Viaje del Rendimiento</h2>
        <p class="subtitle">Simula estrategias DeFi y aprende sobre staking, pools de liquidez y más, sin riesgo real.</p>
    </div>

    <div class="defi-container">
        <div class="defi-stats-panel">
            <div class="stat-card">
                <div class="stat-value"><span id="virtual-balance">$1000.00</span></div>
                <div class="stat-label">Saldo Virtual</div>
            </div>
            <div class="stat-card">
                <div class="stat-value"><span id="portfolio-value">$1000.00</span> <span id="portfolio-change" class="positive"></span></div>
                <div class="stat-label">Valor del Portafolio</div>
            </div>
        </div>

        <div class="defi-actions-panel">
            <h3>Tus Acciones DeFi</h3>
            <div class="action-buttons-grid">
                <button class="defi-btn action-btn" id="deposit-funds-btn"><i class="fas fa-plus-circle"></i> Depositar Fondos</button>
                
                <!-- Staking Buttons -->
                <button class="defi-btn action-btn" id="stake-eth-btn"><i class="fas fa-hand-holding-usd"></i> Staking ETH</button>
                <button class="defi-btn action-btn" id="stake-sol-btn"><i class="fas fa-hand-holding-usd"></i> Staking SOL</button>
                <button class="defi-btn action-btn" id="stake-atom-btn"><i class="fas fa-hand-holding-usd"></i> Staking ATOM</button>
                
                <!-- Liquidity Pool Buttons -->
                <button class="defi-btn action-btn" id="provide-lp-ethusdc-btn"><i class="fas fa-exchange-alt"></i> LP (ETH/USDC)</button>
                <button class="defi-btn action-btn" id="provide-lp-btcusdt-btn"><i class="fas fa-exchange-alt"></i> LP (BTC/USDT)</button>
                <button class="defi-btn action-btn" id="provide-lp-dogeusdt-btn"><i class="fas fa-exchange-alt"></i> LP (DOGE/USDT)</button>
                <button class="defi-btn action-btn" id="provide-lp-pepeusdt-btn"><i class="fas fa-exchange-alt"></i> LP (PEPE/USDT)</button>

                <button class="defi-btn success-btn" id="claim-rewards-btn"><i class="fas fa-gift"></i> Reclamar Recompensas</button>
                <button class="defi-btn warning-btn" id="withdraw-funds-btn"><i class="fas fa-minus-circle"></i> Retirar Todo</button>
            </div>

            <div class="action-details" id="action-details">
                <!-- Los detalles de la acción aparecerán aquí según los clics de los botones -->
                <p>Haz clic en una acción para ver los detalles.</p>
            </div>
        </div>

        <div class="defi-portfolio-summary">
            <h3>Tu Portafolio Activo</h3>
            <div class="portfolio-item">
                <span>Staked ETH:</span>
                <span id="staked-eth">0.0000 ETH ($0.00)</span>
            </div>
            <div class="portfolio-item">
                <span>Staked SOL:</span>
                <span id="staked-sol">0.0000 SOL ($0.00)</span>
            </div>
            <div class="portfolio-item">
                <span>Staked ATOM:</span>
                <span id="staked-atom">0.0000 ATOM ($0.00)</span>
            </div>
            <div class="portfolio-item">
                <span>LP (ETH/USDC) Tokens:</span>
                <span id="lp-ethusdc-tokens">0.00 LP ($0.00)</span>
            </div>
            <div class="portfolio-item">
                <span>LP (BTC/USDT) Tokens:</span>
                <span id="lp-btcusdt-tokens">0.00 LP ($0.00)</span>
            </div>
            <div class="portfolio-item">
                <span>LP (DOGE/USDT) Tokens:</span>
                <span id="lp-dogeusdt-tokens">0.00 LP ($0.00)</span>
            </div>
            <div class="portfolio-item">
                <span>LP (PEPE/USDT) Tokens:</span>
                <span id="lp-pepeusdt-tokens">0.00 LP ($0.00)</span>
            </div>
            <div class="portfolio-item">
                <span>Recompensas Pendientes:</span>
                <span id="pending-rewards">$0.00</span>
            </div>
        </div>

        <div class="defi-log-panel">
            <h3>Registro de Actividad</h3>
            <div class="log-container" id="defi-log">
                <!-- Las entradas del registro de actividad aparecerán aquí -->
            </div>
            <button class="defi-btn secondary-btn" id="reset-defi-btn"><i class="fas fa-redo"></i> Reiniciar Simulación</button>
        </div>
    </div>
</section>

<!-- Font Awesome para iconos -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Google Fonts - Inter -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
    /* Heredar estilos del body para un fondo/fuente consistentes */
    body {
        font-family: 'Inter', sans-serif;
        background: #0e1116; /* Fondo negro de tradescript.html */
        color: #e2e8f0;
        line-height: 1.6;
        padding: 20px;
    }

    /* Estilos específicos de DeFi Navigator */
    .defi-navigator-section {
        background: #1e222d; /* Fondo gris más oscuro */
        border-radius: 16px;
        padding: 25px;
        margin: 40px auto; /* Más margen para separar secciones */
        border: 1px solid #334155;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        max-width: 1200px;
        text-align: center;
    }

    .defi-header h2 {
        font-size: 2.2rem;
        margin-bottom: 10px;
        color: #e2e8f0;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }

    .defi-navigator-section .subtitle {
        color: #94a3b8;
        font-size: 1.2rem;
        max-width: 700px;
        margin: 0 auto 25px auto;
    }

    .defi-container {
        display: grid;
        grid-template-columns: 1fr;
        gap: 30px;
        margin-top: 30px;
    }

    @media (min-width: 768px) {
        .defi-container {
            grid-template-columns: 1fr 1fr; /* Dos columnas en pantallas más grandes */
        }
        .defi-actions-panel {
            grid-column: 1 / 2; /* Panel principal ocupa una columna */
        }
        .defi-portfolio-summary {
            grid-column: 2 / 3; /* Resumen del portafolio ocupa la otra */
        }
        .defi-stats-panel {
            grid-column: 1 / -1; /* Panel de estadísticas abarca todas las columnas */
        }
        .defi-log-panel {
            grid-column: 1 / -1; /* Panel de registro abarca todas las columnas */
        }
    }

    .defi-stats-panel {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 20px;
    }

    .defi-stats-panel .stat-card {
        background: #2c313a; /* Gris oscuro para las estadísticas */
        padding: 15px 25px;
        border-radius: 10px;
        border: 1px solid #334155;
        min-width: 200px;
        flex-grow: 1;
        max-width: 300px;
    }

    .defi-stats-panel .stat-value {
        font-size: 2.2rem;
        font-weight: 700;
        color: #e2e8f0;
        margin-bottom: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }

    .defi-stats-panel .stat-label {
        color: #94a3b8;
        font-size: 1.1rem;
    }

    .positive {
        color: #00ff9f; /* Verde de tradescript.html */
    }
    .negative {
        color: #ff4d4d; /* Rojo de tradescript.html */
    }

    .defi-actions-panel, .defi-portfolio-summary, .defi-log-panel {
        background: #2c313a; /* Gris oscuro para los paneles */
        border-radius: 12px;
        padding: 20px;
        border: 1px solid #334155;
        text-align: left;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    .defi-actions-panel h3, .defi-portfolio-summary h3, .defi-log-panel h3 {
        color: #e2e8f0;
        font-size: 1.8rem;
        margin-top: 0;
        margin-bottom: 20px;
    }

    .action-buttons-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
    }

    .defi-btn {
        background-color: #3a8dd8; /* Azul de tradescript.html */
        color: #fff;
        border: none;
        padding: 12px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }

    .defi-btn:hover {
        background-color: #337ac4; /* Azul más oscuro */
        transform: translateY(-2px);
        box-shadow: 0 5px 8px rgba(0, 0, 0, 0.15);
    }

    .action-btn {
        background-color: #3a8dd8; /* Color principal del botón de acción */
    }
    .action-btn:hover {
        background-color: #337ac4;
    }

    .secondary-btn {
        background-color: #64748b; /* Color gris para acciones secundarias */
    }
    .secondary-btn:hover {
        background-color: #475569;
    }
    
    .defi-btn.warning-btn {
        background-color: #ff4d4d; /* Rojo para acciones de advertencia/destructivas */
    }
    .defi-btn.warning-btn:hover {
        background-color: #cc0000;
    }

    .defi-btn.success-btn {
        background-color: #10b981; /* Verde para acciones exitosas/positivas */
    }
    .defi-btn.success-btn:hover {
        background-color: #059669;
    }

    .action-details {
        background: #1e222d; /* Coincide con el fondo de la sección principal */
        border: 1px solid #334155;
        border-radius: 8px;
        padding: 15px;
        margin-top: 15px;
        font-size: 1rem;
        color: #cbd5e1;
    }
    .action-details input {
        width: calc(100% - 20px);
        padding: 10px;
        margin: 10px 0;
        border: 1px solid #475569;
        background: #0e1116; /* Fondo negro para la entrada */
        border-radius: 5px;
        color: #e2e8f0;
        font-size: 1rem;
        outline: none;
    }
    .action-details button {
        margin-right: 10px;
    }
    .action-details .message {
        margin-top: 10px;
        font-size: 0.9rem;
        color: #94a3b8;
    }

    .portfolio-item {
        display: flex;
        justify-content: space-between;
        padding: 10px 0;
        border-bottom: 1px dashed #334155;
        color: #cbd5e1;
        font-size: 1.05rem;
    }
    .portfolio-item:last-child {
        border-bottom: none;
    }
    .portfolio-item span:first-child {
        color: #94a3b8;
    }
    .portfolio-item span:last-child {
        font-weight: 600;
    }

    .defi-log-panel {
        margin-top: 30px;
    }
    .log-container {
        height: 200px; /* Altura fija para el registro desplazable */
        overflow-y: auto;
        background: #1e222d;
        border: 1px solid #334155;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 20px;
        color: #cbd5e1;
        font-size: 0.95rem;
        line-height: 1.5;
    }
    .log-entry {
        margin-bottom: 8px;
        display: flex;
        gap: 8px;
    }
    .log-entry.positive {
        color: #00ff9f;
    }
    .log-entry.negative {
        color: #ff4d4d;
    }
    .log-entry.info {
        color: #3a8dd8;
    }
    .log-timestamp {
        font-size: 0.8em;
        color: #7b8a9c;
        white-space: nowrap;
    }

    /* Ajustes responsivos */
    @media (max-width: 768px) {
        .defi-navigator-section {
            padding: 15px;
            margin: 20px auto;
        }
        .defi-header h2 {
            font-size: 1.8rem;
        }
        .defi-navigator-section .subtitle {
            font-size: 1rem;
        }
        .defi-stats-panel {
            flex-direction: column;
            gap: 15px;
        }
        .defi-stats-panel .stat-card {
            min-width: unset;
            max-width: 100%;
        }
        .defi-stats-panel .stat-value {
            font-size: 1.8rem;
        }
        .defi-actions-panel h3, .defi-portfolio-summary h3, .defi-log-panel h3 {
            font-size: 1.5rem;
        }
        .action-buttons-grid {
            grid-template-columns: 1fr;
        }
        .defi-btn {
            padding: 10px 15px;
            font-size: 0.9rem;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Elementos del DOM ---
        const virtualBalanceDisplay = document.getElementById('virtual-balance');
        const portfolioValueDisplay = document.getElementById('portfolio-value');
        const portfolioChangeDisplay = document.getElementById('portfolio-change');
        const stakedEthDisplay = document.getElementById('staked-eth');
        const stakedSolDisplay = document.getElementById('staked-sol');
        const stakedAtomDisplay = document.getElementById('staked-atom');
        const lpEthUsdcTokensDisplay = document.getElementById('lp-ethusdc-tokens');
        const lpBtcUsdtTokensDisplay = document.getElementById('lp-btcusdt-tokens');
        const lpDogeUsdtTokensDisplay = document.getElementById('lp-dogeusdt-tokens');
        const lpPepeUsdtTokensDisplay = document.getElementById('lp-pepeusdt-tokens');
        const pendingRewardsDisplay = document.getElementById('pending-rewards');
        const actionDetailsPanel = document.getElementById('action-details');
        const defiLogContainer = document.getElementById('defi-log');
        const resetDefiBtn = document.getElementById('reset-defi-btn');

        // Botones de Acción
        const depositFundsBtn = document.getElementById('deposit-funds-btn');
        const stakeEthBtn = document.getElementById('stake-eth-btn');
        const stakeSolBtn = document.getElementById('stake-sol-btn');
        const stakeAtomBtn = document.getElementById('stake-atom-btn');
        const provideLpEthUsdcBtn = document.getElementById('provide-lp-ethusdc-btn');
        const provideLpBtcUsdtBtn = document.getElementById('provide-lp-btcusdt-btn');
        const provideLpDogeUsdtBtn = document.getElementById('provide-lp-dogeusdt-btn');
        const provideLpPepeUsdtBtn = document.getElementById('provide-lp-pepeusdt-btn');
        const claimRewardsBtn = document.getElementById('claim-rewards-btn');
        const withdrawFundsBtn = document.getElementById('withdraw-funds-btn');

        // --- Estado de la Simulación ---
        let virtualBalance = 1000.00; // Fondos virtuales iniciales

        // Precios simulados de los activos
        let ethPrice = 3000.00;
        let btcPrice = 65000.00;
        let solPrice = 150.00;
        let atomPrice = 10.00;
        let dogePrice = 0.15;
        let pepePrice = 0.000001; // Precio muy bajo para memecoin
        let usdtPrice = 1.00; // Stablecoin
        let usdcPrice = 1.00; // Stablecoin

        // Cantidades en staking
        let stakedETH = 0;
        let stakedSOL = 0;
        let stakedATOM = 0;

        // Variables de Liquidity Pool (LP)
        let lpEthUsdcTokens = 0;
        let lpEthUsdcInitialEthAmount = 0;
        let lpEthUsdcInitialUsdcAmount = 0;

        let lpBtcUsdtTokens = 0;
        let lpBtcUsdtInitialBtcAmount = 0;
        let lpBtcUsdtInitialUsdtAmount = 0;

        let lpDogeUsdtTokens = 0;
        let lpDogeUsdtInitialDogeAmount = 0;
        let lpDogeUsdtInitialUsdtAmount = 0;

        let lpPepeUsdtTokens = 0;
        let lpPepeUsdtInitialPepeAmount = 0;
        let lpPepeUsdtInitialUsdtAmount = 0;

        let totalRewards = 0; // Recompensas acumuladas

        // APRs simuladas (porcentajes anuales de rendimiento)
        const ethStakingAPR = 0.04; // 4% APR
        const solStakingAPR = 0.07; // 7% APR
        const atomStakingAPR = 0.10; // 10% APR
        const lpEthUsdcAPR = 0.08; // 8% APR para LP ETH/USDC
        const lpBtcUsdtAPR = 0.06; // 6% APR para LP BTC/USDT
        const lpDogeUsdtAPR = 0.20; // 20% APR para LP DOGE/USDT (más riesgo, más recompensa simulada)
        const lpPepeUsdtAPR = 0.30; // 30% APR para LP PEPE/USDT (aún más riesgo/recompensa simulada)

        let lastUpdateTime = Date.now();
        let portfolioInitialValue = virtualBalance; // Usado para el cálculo del cambio porcentual del portafolio

        // --- Constantes para la Simulación ---
        const SIMULATION_INTERVAL = 5000; // Actualizar cada 5 segundos para efecto visual
        const INITIAL_DEPOSIT_AMOUNT = 500; // Cantidad de depósito predeterminada

        // --- Funciones Principales ---

        function updateUI() {
            virtualBalanceDisplay.textContent = `$${virtualBalance.toFixed(2)}`;
            stakedEthDisplay.textContent = `${stakedETH.toFixed(4)} ETH ($${(stakedETH * ethPrice).toFixed(2)})`;
            stakedSolDisplay.textContent = `${stakedSOL.toFixed(4)} SOL ($${(stakedSOL * solPrice).toFixed(2)})`;
            stakedAtomDisplay.textContent = `${stakedATOM.toFixed(4)} ATOM ($${(stakedATOM * atomPrice).toFixed(2)})`;
            
            lpEthUsdcTokensDisplay.textContent = `${lpEthUsdcTokens.toFixed(4)} LP ($${calculateLpEthUsdcValue().toFixed(2)})`;
            lpBtcUsdtTokensDisplay.textContent = `${lpBtcUsdtTokens.toFixed(4)} LP ($${calculateLpBtcUsdtValue().toFixed(2)})`;
            lpDogeUsdtTokensDisplay.textContent = `${lpDogeUsdtTokens.toFixed(4)} LP ($${calculateLpDogeUsdtValue().toFixed(2)})`;
            lpPepeUsdtTokensDisplay.textContent = `${lpPepeUsdtTokens.toFixed(4)} LP ($${calculateLpPepeUsdtValue().toFixed(2)})`;
            
            pendingRewardsDisplay.textContent = `$${totalRewards.toFixed(2)}`;

            const currentPortfolioValue = virtualBalance +
                                         (stakedETH * ethPrice) +
                                         (stakedSOL * solPrice) +
                                         (stakedATOM * atomPrice) +
                                         calculateLpEthUsdcValue() +
                                         calculateLpBtcUsdtValue() +
                                         calculateLpDogeUsdtValue() +
                                         calculateLpPepeUsdtValue();
            portfolioValueDisplay.textContent = `$${currentPortfolioValue.toFixed(2)}`;

            const change = currentPortfolioValue - portfolioInitialValue;
            if (change > 0) {
                portfolioChangeDisplay.textContent = `(+${change.toFixed(2)})`;
                portfolioChangeDisplay.className = 'positive';
            } else if (change < 0) {
                portfolioChangeDisplay.textContent = `(${change.toFixed(2)})`;
                portfolioChangeDisplay.className = 'negative';
            } else {
                portfolioChangeDisplay.textContent = `(0.00)`;
                portfolioChangeDisplay.className = '';
            }
        }

        function addLogEntry(message, type = 'info') {
            const now = new Date();
            const timeString = now.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            const logEntryDiv = document.createElement('div');
            logEntryDiv.classList.add('log-entry', type);
            logEntryDiv.innerHTML = `<span class="log-timestamp">${timeString}</span> <span class="log-message">${message}</span>`;
            defiLogContainer.prepend(logEntryDiv); // Añadir al principio
            // Limitar entradas de registro para mantener un buen rendimiento
            if (defiLogContainer.children.length > 50) {
                defiLogContainer.removeChild(defiLogContainer.lastChild);
            }
        }

        function simulateMarketFluctuation() {
            // Simular cambio de precio de ETH
            ethPrice = ethPrice * (1 + (Math.random() - 0.5) * 0.02); // -1% a +1%
            ethPrice = Math.max(1000, ethPrice); 
            addLogEntry(`Precio de ETH fluctuó a $${ethPrice.toFixed(2)}`, 'info');

            // Simular cambio de precio de BTC
            btcPrice = btcPrice * (1 + (Math.random() - 0.5) * 0.015); // -0.75% a +0.75%
            btcPrice = Math.max(20000, btcPrice); 
            addLogEntry(`Precio de BTC fluctuó a $${btcPrice.toFixed(2)}`, 'info');

            // Simular cambio de precio de SOL
            solPrice = solPrice * (1 + (Math.random() - 0.5) * 0.03); // -1.5% a +1.5%
            solPrice = Math.max(50, solPrice); 
            addLogEntry(`Precio de SOL fluctuó a $${solPrice.toFixed(2)}`, 'info');

            // Simular cambio de precio de ATOM
            atomPrice = atomPrice * (1 + (Math.random() - 0.5) * 0.025); // -1.25% a +1.25%
            atomPrice = Math.max(5, atomPrice); 
            addLogEntry(`Precio de ATOM fluctuó a $${atomPrice.toFixed(2)}`, 'info');

            // Simular cambio de precio de DOGE (alta volatilidad)
            dogePrice = dogePrice * (1 + (Math.random() - 0.5) * 0.10); // -5% a +5%
            dogePrice = Math.max(0.05, dogePrice); 
            addLogEntry(`Precio de DOGE fluctuó a $${dogePrice.toFixed(4)}`, 'info');

            // Simular cambio de precio de PEPE (alta volatilidad extrema)
            pepePrice = pepePrice * (1 + (Math.random() - 0.5) * 0.20); // -10% a +10%
            pepePrice = Math.max(0.0000001, pepePrice); 
            addLogEntry(`Precio de PEPE fluctuó a $${pepePrice.toFixed(7)}`, 'info');

            updateUI();
        }

        function calculateYields() {
            const now = Date.now();
            const timeElapsedHours = (now - lastUpdateTime) / (1000 * 60 * 60); // Convertir ms a horas
            lastUpdateTime = now;

            let currentYield = 0;

            // Rendimiento de Staking (ETH)
            currentYield += (stakedETH * ethPrice * ethStakingAPR) / (365 * 24);
            // Rendimiento de Staking (SOL)
            currentYield += (stakedSOL * solPrice * solStakingAPR) / (365 * 24);
            // Rendimiento de Staking (ATOM)
            currentYield += (stakedATOM * atomPrice * atomStakingAPR) / (365 * 24);

            // Rendimiento de LP (ETH/USDC)
            currentYield += (calculateLpEthUsdcValue() * lpEthUsdcAPR) / (365 * 24);
            // Rendimiento de LP (BTC/USDT)
            currentYield += (calculateLpBtcUsdtValue() * lpBtcUsdtAPR) / (365 * 24);
            // Rendimiento de LP (DOGE/USDT)
            currentYield += (calculateLpDogeUsdtValue() * lpDogeUsdtAPR) / (365 * 24);
            // Rendimiento de LP (PEPE/USDT)
            currentYield += (calculateLpPepeUsdtValue() * lpPepeUsdtAPR) / (365 * 24);
            
            totalRewards += currentYield;

            if (currentYield > 0) {
                addLogEntry(`Ganancia de $${currentYield.toFixed(2)} en recompensas.`, 'positive');
            }

            updateUI();
        }

        // Funciones para calcular el valor actual de los tokens LP
        function calculateLpEthUsdcValue() {
            if (lpEthUsdcTokens === 0) return 0;
            // Se asume 50/50 al inicio y luego se valora con precios actuales
            const ethValue = lpEthUsdcInitialEthAmount * ethPrice;
            const usdcValue = lpEthUsdcInitialUsdcAmount * usdcPrice;
            return ethValue + usdcValue;
        }

        function calculateLpBtcUsdtValue() {
            if (lpBtcUsdtTokens === 0) return 0;
            const btcValue = lpBtcUsdtInitialBtcAmount * btcPrice;
            const usdtValue = lpBtcUsdtInitialUsdtAmount * usdtPrice;
            return btcValue + usdtValue;
        }

        function calculateLpDogeUsdtValue() {
            if (lpDogeUsdtTokens === 0) return 0;
            const dogeValue = lpDogeUsdtInitialDogeAmount * dogePrice;
            const usdtValue = lpDogeUsdtInitialUsdtAmount * usdtPrice;
            return dogeValue + usdtValue;
        }

        function calculateLpPepeUsdtValue() {
            if (lpPepeUsdtTokens === 0) return 0;
            const pepeValue = lpPepeUsdtInitialPepeAmount * pepePrice;
            const usdtValue = lpPepeUsdtInitialUsdtAmount * usdtPrice;
            return pepeValue + usdtValue;
        }

        // --- Manejadores de Acción ---

        function showDepositForm() {
            actionDetailsPanel.innerHTML = `
                <p>Deposita fondos virtuales para comenzar tu viaje DeFi.</p>
                <input type="number" id="deposit-amount" placeholder="Cantidad a depositar (USD)" value="${INITIAL_DEPOSIT_AMOUNT}" min="1">
                <button class="defi-btn success-btn" id="confirm-deposit-btn">Confirmar Depósito</button>
            `;
            document.getElementById('confirm-deposit-btn').onclick = () => {
                const amount = parseFloat(document.getElementById('deposit-amount').value);
                if (isNaN(amount) || amount <= 0) {
                    addLogEntry('Cantidad de depósito inválida.', 'negative');
                    return;
                }
                virtualBalance += amount;
                portfolioInitialValue += amount; // Ajustar valor inicial para cálculo de cambio porcentual
                addLogEntry(`Depositado $${amount.toFixed(2)}. Nuevo saldo: $${virtualBalance.toFixed(2)}`, 'positive');
                updateUI();
                actionDetailsPanel.innerHTML = '<p>¡Fondos depositados!</p>';
            };
        }

        // --- Funciones para Staking ---
        function createStakeForm(tokenName, price, stakedVar, apr) {
            actionDetailsPanel.innerHTML = `
                <p>Haz staking de tu ${tokenName} para ganar recompensas (APR simulado: ${(apr * 100).toFixed(1)}%).</p>
                <p>Precio actual de ${tokenName}: $${price.toFixed(tokenName === 'PEPE' ? 7 : 2)}</p>
                <input type="number" id="stake-amount" placeholder="Cantidad de ${tokenName} a hacer staking" min="0.0001" step="0.0001">
                <div class="message">Costo estimado: $0.00. Tu saldo actual: $${virtualBalance.toFixed(2)}</div>
                <button class="defi-btn action-btn" id="confirm-stake-btn">Confirmar Staking</button>
            `;

            const stakeInput = document.getElementById('stake-amount');
            const messageDiv = actionDetailsPanel.querySelector('.message');

            stakeInput.oninput = () => {
                const amount = parseFloat(stakeInput.value);
                const cost = amount * price;
                messageDiv.textContent = `Costo estimado: $${cost.toFixed(2)}. Tu saldo actual: $${virtualBalance.toFixed(2)}`;
            };

            document.getElementById('confirm-stake-btn').onclick = () => {
                const amount = parseFloat(stakeInput.value);
                if (isNaN(amount) || amount <= 0) {
                    addLogEntry(`Cantidad de ${tokenName} a hacer staking inválida.`, 'negative');
                    return;
                }
                const cost = amount * price;
                if (virtualBalance < cost) {
                    addLogEntry('Saldo insuficiente para hacer staking de esta cantidad.', 'negative');
                    return;
                }
                virtualBalance -= cost;
                eval(`${stakedVar} += ${amount}`); // Actualizar la variable de staking dinámicamente
                addLogEntry(`Staking de ${amount.toFixed(4)} ${tokenName} por $${cost.toFixed(2)}.`, 'positive');
                updateUI();
                actionDetailsPanel.innerHTML = `<p>¡${tokenName} en staking!</p>`;
            };
        }

        // --- Funciones para Proveer Liquidez ---
        function createProvideLpForm(token1Name, token1Price, token2Name, token2Price, lpApr, lpTokensVar, lpInitialToken1Var, lpInitialToken2Var) {
            actionDetailsPanel.innerHTML = `
                <p>Provee liquidez a un pool ${token1Name}/${token2Name} para ganar recompensas (APR simulado: ${(lpApr * 100).toFixed(1)}%).</p>
                <p>Precio actual de ${token1Name}: $${token1Price.toFixed(token1Name === 'PEPE' ? 7 : 2)}</p>
                <input type="number" id="lp-token1-amount" placeholder="Cantidad de ${token1Name} para LP" min="0.0001" step="0.0001">
                <div class="message">${token2Name} requerido: ~$0.00. Tu saldo actual: $${virtualBalance.toFixed(2)}</div>
                <button class="defi-btn action-btn" id="confirm-lp-btn">Confirmar Provisión de Liquidez</button>
            `;

            const lpToken1Input = document.getElementById('lp-token1-amount');
            const messageDiv = actionDetailsPanel.querySelector('.message');

            lpToken1Input.oninput = () => {
                const amountToken1 = parseFloat(lpToken1Input.value);
                const amountToken2 = amountToken1 * token1Price / token2Price; // Asumiendo división de valor 50/50
                const totalCost = (amountToken1 * token1Price) + (amountToken2 * token2Price);
                messageDiv.textContent = `${token2Name} requerido: ~$${amountToken2.toFixed(2)}. Costo total: $${totalCost.toFixed(2)}. Tu saldo actual: $${virtualBalance.toFixed(2)}`;
            };

            document.getElementById('confirm-lp-btn').onclick = () => {
                const amountToken1 = parseFloat(lpToken1Input.value);
                if (isNaN(amountToken1) || amountToken1 <= 0) {
                    addLogEntry(`Cantidad de ${token1Name} para LP inválida.`, 'negative');
                    return;
                }
                const amountToken2 = amountToken1 * token1Price / token2Price;
                const totalCost = (amountToken1 * token1Price) + (amountToken2 * token2Price);

                if (virtualBalance < totalCost) {
                    addLogEntry('Saldo insuficiente para proveer esta liquidez.', 'negative');
                    return;
                }

                virtualBalance -= totalCost;
                eval(`${lpTokensVar} += (amountToken1 + amountToken2)`); // Representación simplificada de tokens LP
                eval(`${lpInitialToken1Var} += amountToken1`);
                eval(`${lpInitialToken2Var} += amountToken2`);

                addLogEntry(`Provisión de ${amountToken1.toFixed(4)} ${token1Name} y $${amountToken2.toFixed(2)} ${token2Name} en pool de liquidez.`, 'positive');
                updateUI();
                actionDetailsPanel.innerHTML = '<p>¡Liquidez provista!</p>';
            };
        }

        function claimRewards() {
            if (totalRewards === 0) {
                addLogEntry('No hay recompensas pendientes para reclamar.', 'info');
                return;
            }
            virtualBalance += totalRewards;
            addLogEntry(`Reclamado $${totalRewards.toFixed(2)} en recompensas.`, 'positive');
            totalRewards = 0; // Reiniciar recompensas pendientes
            updateUI();
            actionDetailsPanel.innerHTML = '<p>¡Recompensas reclamadas!</p>';
        }

        function showWithdrawForm() {
            actionDetailsPanel.innerHTML = `
                <p>Retira tus fondos de staking y liquidez.</p>
                <div class="message">¿Estás seguro de que quieres retirar todos los fondos? Esto calculará la pérdida impermanente (si aplica).</div>
                <button class="defi-btn warning-btn" id="confirm-withdraw-btn">Confirmar Retiro</button>
            `;
            document.getElementById('confirm-withdraw-btn').onclick = () => {
                let withdrawnValue = 0;

                // Retirar Staked ETH
                if (stakedETH > 0) {
                    withdrawnValue += (stakedETH * ethPrice);
                    addLogEntry(`Retirado ${stakedETH.toFixed(4)} ETH ($${(stakedETH * ethPrice).toFixed(2)}) del staking.`, 'info');
                    stakedETH = 0;
                }
                // Retirar Staked SOL
                if (stakedSOL > 0) {
                    withdrawnValue += (stakedSOL * solPrice);
                    addLogEntry(`Retirado ${stakedSOL.toFixed(4)} SOL ($${(stakedSOL * solPrice).toFixed(2)}) del staking.`, 'info');
                    stakedSOL = 0;
                }
                // Retirar Staked ATOM
                if (stakedATOM > 0) {
                    withdrawnValue += (stakedATOM * atomPrice);
                    addLogEntry(`Retirado ${stakedATOM.toFixed(4)} ATOM ($${(stakedATOM * atomPrice).toFixed(2)}) del staking.`, 'info');
                    stakedATOM = 0;
                }

                // Retirar LP ETH/USDC
                if (lpEthUsdcTokens > 0) {
                    const currentLpValue = calculateLpEthUsdcValue();
                    withdrawnValue += currentLpValue;
                    const initialLpCombinedValue = (lpEthUsdcInitialEthAmount * 3000.00) + (lpEthUsdcInitialUsdcAmount * 1.00); // Usar precio inicial de ETH
                    const impermanentDifference = currentLpValue - initialLpCombinedValue;
                    if (impermanentDifference < 0) {
                        addLogEntry(`Retirado LP ETH/USDC ($${currentLpValue.toFixed(2)}). Pérdida impermanente simulada: $${Math.abs(impermanentDifference).toFixed(2)}.`, 'negative');
                    } else {
                        addLogEntry(`Retirado LP ETH/USDC ($${currentLpValue.toFixed(2)}). Ganancia/Sin pérdida impermanente simulada: $${impermanentDifference.toFixed(2)}.`, impermanentDifference >= 0 ? 'positive' : 'info');
                    }
                    lpEthUsdcTokens = 0; lpEthUsdcInitialEthAmount = 0; lpEthUsdcInitialUsdcAmount = 0;
                }

                // Retirar LP BTC/USDT
                if (lpBtcUsdtTokens > 0) {
                    const currentLpValue = calculateLpBtcUsdtValue();
                    withdrawnValue += currentLpValue;
                    const initialLpCombinedValue = (lpBtcUsdtInitialBtcAmount * 65000.00) + (lpBtcUsdtInitialUsdtAmount * 1.00); // Usar precio inicial de BTC
                    const impermanentDifference = currentLpValue - initialLpCombinedValue;
                    if (impermanentDifference < 0) {
                        addLogEntry(`Retirado LP BTC/USDT ($${currentLpValue.toFixed(2)}). Pérdida impermanente simulada: $${Math.abs(impermanentDifference).toFixed(2)}.`, 'negative');
                    } else {
                        addLogEntry(`Retirado LP BTC/USDT ($${currentLpValue.toFixed(2)}). Ganancia/Sin pérdida impermanente simulada: $${impermanentDifference.toFixed(2)}.`, impermanentDifference >= 0 ? 'positive' : 'info');
                    }
                    lpBtcUsdtTokens = 0; lpBtcUsdtInitialBtcAmount = 0; lpBtcUsdtInitialUsdtAmount = 0;
                }

                // Retirar LP DOGE/USDT
                if (lpDogeUsdtTokens > 0) {
                    const currentLpValue = calculateLpDogeUsdtValue();
                    withdrawnValue += currentLpValue;
                    const initialLpCombinedValue = (lpDogeUsdtInitialDogeAmount * 0.15) + (lpDogeUsdtInitialUsdtAmount * 1.00); // Usar precio inicial de DOGE
                    const impermanentDifference = currentLpValue - initialLpCombinedValue;
                    if (impermanentDifference < 0) {
                        addLogEntry(`Retirado LP DOGE/USDT ($${currentLpValue.toFixed(2)}). Pérdida impermanente simulada: $${Math.abs(impermanentDifference).toFixed(2)}.`, 'negative');
                    } else {
                        addLogEntry(`Retirado LP DOGE/USDT ($${currentLpValue.toFixed(2)}). Ganancia/Sin pérdida impermanente simulada: $${impermanentDifference.toFixed(2)}.`, impermanentDifference >= 0 ? 'positive' : 'info');
                    }
                    lpDogeUsdtTokens = 0; lpDogeUsdtInitialDogeAmount = 0; lpDogeUsdtInitialUsdtAmount = 0;
                }

                // Retirar LP PEPE/USDT
                if (lpPepeUsdtTokens > 0) {
                    const currentLpValue = calculateLpPepeUsdtValue();
                    withdrawnValue += currentLpValue;
                    const initialLpCombinedValue = (lpPepeUsdtInitialPepeAmount * 0.000001) + (lpPepeUsdtInitialUsdtAmount * 1.00); // Usar precio inicial de PEPE
                    const impermanentDifference = currentLpValue - initialLpCombinedValue;
                    if (impermanentDifference < 0) {
                        addLogEntry(`Retirado LP PEPE/USDT ($${currentLpValue.toFixed(2)}). Pérdida impermanente simulada: $${Math.abs(impermanentDifference).toFixed(2)}.`, 'negative');
                    } else {
                        addLogEntry(`Retirado LP PEPE/USDT ($${currentLpValue.toFixed(2)}). Ganancia/Sin pérdida impermanente simulada: $${impermanentDifference.toFixed(2)}.`, impermanentDifference >= 0 ? 'positive' : 'info');
                    }
                    lpPepeUsdtTokens = 0; lpPepeUsdtInitialPepeAmount = 0; lpPepeUsdtInitialUsdtAmount = 0;
                }

                // Reclamar cualquier recompensa restante
                if (totalRewards > 0) {
                    virtualBalance += totalRewards;
                    addLogEntry(`Reclamado $${totalRewards.toFixed(2)} en recompensas antes de retiro final.`, 'positive');
                    totalRewards = 0;
                }

                virtualBalance += withdrawnValue;
                addLogEntry(`Todos los fondos retirados. Saldo final: $${virtualBalance.toFixed(2)}.`, 'info');
                portfolioInitialValue = virtualBalance; // Restablecer la base para el cambio porcentual
                updateUI();
                actionDetailsPanel.innerHTML = '<p>¡Todos los fondos han sido retirados!</p>';
            };
        }

        // --- Manejadores de Eventos ---
        depositFundsBtn.addEventListener('click', showDepositForm);
        stakeEthBtn.addEventListener('click', () => createStakeForm('ETH', ethPrice, 'stakedETH', ethStakingAPR));
        stakeSolBtn.addEventListener('click', () => createStakeForm('SOL', solPrice, 'stakedSOL', solStakingAPR));
        stakeAtomBtn.addEventListener('click', () => createStakeForm('ATOM', atomPrice, 'stakedATOM', atomStakingAPR));
        
        provideLpEthUsdcBtn.addEventListener('click', () => createProvideLpForm('ETH', ethPrice, 'USDC', usdcPrice, lpEthUsdcAPR, 'lpEthUsdcTokens', 'lpEthUsdcInitialEthAmount', 'lpEthUsdcInitialUsdcAmount'));
        provideLpBtcUsdtBtn.addEventListener('click', () => createProvideLpForm('BTC', btcPrice, 'USDT', usdtPrice, lpBtcUsdtAPR, 'lpBtcUsdtTokens', 'lpBtcUsdtInitialBtcAmount', 'lpBtcUsdtInitialUsdtAmount'));
        provideLpDogeUsdtBtn.addEventListener('click', () => createProvideLpForm('DOGE', dogePrice, 'USDT', usdtPrice, lpDogeUsdtAPR, 'lpDogeUsdtTokens', 'lpDogeUsdtInitialDogeAmount', 'lpDogeUsdtInitialUsdtAmount'));
        provideLpPepeUsdtBtn.addEventListener('click', () => createProvideLpForm('PEPE', pepePrice, 'USDT', usdtPrice, lpPepeUsdtAPR, 'lpPepeUsdtTokens', 'lpPepeUsdtInitialPepeAmount', 'lpPepeUsdtInitialUsdtAmount'));

        claimRewardsBtn.addEventListener('click', claimRewards);
        withdrawFundsBtn.addEventListener('click', showWithdrawForm);

        resetDefiBtn.addEventListener('click', () => {
            virtualBalance = 1000.00;
            ethPrice = 3000.00;
            btcPrice = 65000.00;
            solPrice = 150.00;
            atomPrice = 10.00;
            dogePrice = 0.15;
            pepePrice = 0.000001;
            usdtPrice = 1.00;
            usdcPrice = 1.00;

            stakedETH = 0;
            stakedSOL = 0;
            stakedATOM = 0;

            lpEthUsdcTokens = 0;
            lpEthUsdcInitialEthAmount = 0;
            lpEthUsdcInitialUsdcAmount = 0;

            lpBtcUsdtTokens = 0;
            lpBtcUsdtInitialBtcAmount = 0;
            lpBtcUsdtInitialUsdtAmount = 0;

            lpDogeUsdtTokens = 0;
            lpDogeUsdtInitialDogeAmount = 0;
            lpDogeUsdtInitialUsdtAmount = 0;

            lpPepeUsdtTokens = 0;
            lpPepeUsdtInitialPepeAmount = 0;
            lpPepeUsdtInitialUsdtAmount = 0;

            totalRewards = 0;
            lastUpdateTime = Date.now();
            portfolioInitialValue = virtualBalance;
            defiLogContainer.innerHTML = ''; // Limpiar registro
            actionDetailsPanel.innerHTML = '<p>Haz clic en una acción para ver los detalles.</p>';
            addLogEntry('Simulación DeFi reiniciada.', 'info');
            updateUI();
        });

        // Inicialización
        updateUI();
        setInterval(simulateMarketFluctuation, SIMULATION_INTERVAL); // Simular cambios de mercado periódicamente
        setInterval(calculateYields, SIMULATION_INTERVAL); // Calcular rendimientos periódicamente
        
        // Mensaje inicial
        addLogEntry('Bienvenido a DeFi Navigator. ¡Comienza depositando fondos!', 'info');
    });
</script>

    <div class="ad-banner bottom-banner">
        <!-- Bottom Content Banner (728x90) -->
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
             crossorigin="anonymous"></script>
        <!-- CryptoSim_Bottom -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
             data-ad-slot="XXXXXXXXXX"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <!-- Trading History Table -->
        <h2>Trading History</h2>
        <table style="width: 100 %; border-collapse: collapse;">
        <thead>
            <tr>
                <th>#</th>
                <th>Coin</th>
                <th>Amount</th>
                <th>Result</th>
                <th>Status</th>
                <th>Time</th>
            </tr>
        </thead>
        <tbody id="history-table">
            <!-- History rows will be added here -->
        </tbody>
    </table>
</div>

<footer>
    <div class="footer-links">
        <a href="footer/about.html">About</a>
        <a href="footer/howtoplay.html">How to Play</a>
        <a href="footer/faq.html">FAQ</a>
        <a href="footer/privacypolicy.html">Privacy Policy</a>
        <a href="footer/terms.html">Terms of Service</a>
        <a href="footer/contact.html">Contact</a>
    </div>
    <p>&copy; 2025 TradeSim. All rights reserved.</p>
</footer>

<script src="https://s3.tradingview.com/tv.js"></script>
<script>
    'use strict';
    
    // Trading Simulation Logic
    let selectedSymbol = document.getElementById("crypto-select").value;
    let chartWidget;
    let balance = 100000;
    let currentStake = 0;
    let tradeRunning = false;
    let profitOrLoss = 0;
    let tradeId = 1;
    let timerInterval = null;
    let secondsLeft = 0;

    const balanceDisplay = document.getElementById("balance");
    const profitLossDisplay = document.getElementById("profit-loss");
    const timerDisplay = document.getElementById("timer");

    function updateBalance() {
        balanceDisplay.textContent = balance.toFixed(2);
    }

    function showProfitLoss(text, isProfit = true) {
        profitLossDisplay.textContent = text;
        profitLossDisplay.className = isProfit ? "profit-loss profit" : "profit-loss loss";
    }

    function addHistory(status) {
        const table = document.getElementById("history-table");
        const row = table.insertRow(0);
        row.innerHTML = `
            <td>${tradeId++}</td>
            <td>${selectedSymbol.split(":")[1]}</td>
            <td>$${currentStake.toFixed(2)}</td>
            <td>${profitOrLoss >= 0 ? '+' : '-'}$${Math.abs(profitOrLoss).toFixed(2)}</td>
            <td>${status}</td>
            <td>${new Date().toLocaleTimeString()}</td>
        `;
    }

    function loadChart(symbol) {
        if (chartWidget) {
            chartWidget.setSymbol(symbol);
            return;
        }
        
        chartWidget = new TradingView.widget({
            "autosize": true,
            "symbol": symbol,
            "interval": "15",
            "timezone": "Etc/UTC",
            "theme": "dark",
            "style": "1",
            "locale": "en",
            "toolbar_bg": "#1e222d",
            "enable_publishing": false,
            "hide_side_toolbar": false,
            "container_id": "tradingview-widget-container"
        });
    }

    function deposit() {
        const amount = parseFloat(prompt("Enter deposit amount (minimum $1):", "1"));
        if (!isNaN(amount) && amount >= 1) {
            balance += amount;
            updateBalance();
            alert(`Successfully deposited $${amount.toFixed(2)}`);
        } else {
            alert("Minimum deposit amount is $1");
        }
    }

    function withdraw() {
        const amount = parseFloat(prompt("Enter withdrawal amount (minimum $1):", "1"));
        if (!isNaN(amount) && amount >= 1 && amount <= balance) {
            balance -= amount;
            updateBalance();
            alert(`Successfully withdrew $${amount.toFixed(2)}`);
        } else {
            alert("Invalid amount (minimum $1, maximum your balance)");
        }
    }

    function startTimer(seconds, callback) {
        secondsLeft = seconds;
        timerDisplay.textContent = `Timer: ${secondsLeft}s`;

        timerInterval = setInterval(() => {
            secondsLeft--;
            timerDisplay.textContent = `Timer: ${secondsLeft}s`;
            if (secondsLeft <= 0) {
                clearInterval(timerInterval);
                callback();
            }
        }, 1000);
    }

    function buy() {
        if (tradeRunning) return alert("Finish current trade first.");
        const stake = parseFloat(document.getElementById("trade-amount").value);
        if (!stake || stake < 10 || stake > balance) {
            return alert("Invalid amount (min $10, max your balance)");
        }

        currentStake = stake;
        balance -= stake;
        updateBalance();

        showProfitLoss("Trade running...", true);
        tradeRunning = true;

        startTimer(10, () => {
            profitOrLoss = Math.random() > 0.5 ? stake * 0.2 : -stake * 0.3;
            showProfitLoss(`Trade ready. You may Sell or Cancel now.`, profitOrLoss >= 0);
        });
    }

    function sell() {
        if (!tradeRunning) return alert("No trade to sell.");
        clearInterval(timerInterval);
        timerDisplay.textContent = "Timer: 0s";

        const result = currentStake + profitOrLoss;
        balance += result;
        updateBalance();

        const resultText = profitOrLoss >= 0 
            ? `Profit: $${profitOrLoss.toFixed(2)}`
            : `Loss: $${Math.abs(profitOrLoss).toFixed(2)}`;
        
        showProfitLoss(resultText, profitOrLoss >= 0);
        addHistory("Closed");

        currentStake = 0;
        profitOrLoss = 0;
        tradeRunning = false;
    }

    function cancelTrade() {
        if (!tradeRunning) return alert("No active trade to cancel.");
        clearInterval(timerInterval);
        timerDisplay.textContent = "Timer: 0s";

        if (profitOrLoss === 0) {
            balance += currentStake;
            showProfitLoss("Trade cancelled. Stake refunded.");
        } else {
            const result = currentStake + profitOrLoss;
            balance += result;
            showProfitLoss(
                profitOrLoss >= 0 
                    ? `Profit (on cancel): $${profitOrLoss.toFixed(2)}`
                    : `Loss (on cancel): $${Math.abs(profitOrLoss).toFixed(2)}`,
                profitOrLoss >= 0
            );
        }

        updateBalance();
        addHistory("Cancelled");
        currentStake = 0;
        profitOrLoss = 0;
        tradeRunning = false;
    }

    function closeAll() {
        if (!tradeRunning) return alert("No active trades");
        cancelTrade();
    }

    function resetAccount() {
        if (confirm("Reset account to $100,000? All history will be lost.")) {
            balance = 100000;
            tradeId = 1;
            document.getElementById("history-table").innerHTML = "";
            updateBalance();
            showProfitLoss("");
        }
    }

    // Initialize
    document.getElementById("crypto-select").addEventListener("change", function() {
        selectedSymbol = this.value;
        loadChart(selectedSymbol);
    });

    window.onload = () => {
        loadChart(selectedSymbol);
        updateBalance();
    };
</script>
</body>
</html>
